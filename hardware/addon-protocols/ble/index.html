<!DOCTYPE html><html><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>Add-On Protocol - BLE | MyGeotab SDK</title><meta name=generator content="Jekyll v3.6.2"><meta property=og:title content="Add-On Protocol - BLE"><meta name=author content="The Geotab Team"><meta property=og:locale content=en_US><meta name=description content="The Geotab SDK (Software Development Kit) is a powerful set of tools for automating tasks and working with the data in MyGeotab. Within these documents you will find information on how to develop JavaScript and C# applications, build and integrate Add-Ins and use MyGeotab with third-party systems."><meta property=og:description content="The Geotab SDK (Software Development Kit) is a powerful set of tools for automating tasks and working with the data in MyGeotab. Within these documents you will find information on how to develop JavaScript and C# applications, build and integrate Add-Ins and use MyGeotab with third-party systems."><link rel=canonical href=https://geotab.github.io/sdk/hardware/addon-protocols/ble/ ><meta property=og:url content=https://geotab.github.io/sdk/hardware/addon-protocols/ble/ ><meta property=og:site_name content="MyGeotab SDK"><script type=application/ld+json>{"description":"The Geotab SDK (Software Development Kit) is a powerful set of tools for automating tasks and working with the data in MyGeotab. Within these documents you will find information on how to develop JavaScript and C# applications, build and integrate Add-Ins and use MyGeotab with third-party systems.","author":{"@type":"Person","name":"The Geotab Team"},"@type":"WebPage","url":"https://geotab.github.io/sdk/hardware/addon-protocols/ble/","headline":"Add-On Protocol - BLE","@context":"http://schema.org"}</script><link rel=stylesheet href=/sdk/assets/stylesheets/style-64faf25016.min.css><link rel=apple-touch-icon-precomposed sizes=144x144 href=/sdk/assets/images/touch/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=/sdk/assets/favicon.ico></head><body><header><nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark"><a class=navbar-brand href=/sdk/ ><img src=/sdk/assets/images/pillar.svg width=30 height=30 class="d-inline-block align-top" alt=""> MyGeotab SDK </a><button class="navbar-toggler d-lg-none" id=toggler type=button><span class=navbar-toggler-icon></span></button></nav></header><div id=wrapper><div id=sidebar-wrapper class=bg-light><nav id=sidebar class=sidebar><h4>Software</h4><ul class="nav flex-column"><li class=nav-link><a href=/sdk/software/introduction/ >Introduction</a></li><h5>Guides</h5><ul class="nav flex-column"><li class=nav-link><a href=/sdk/software/guides/getting-started/ >Getting Started</a></li><li class=nav-link><a href=/sdk/software/guides/concepts/ >Concepts</a></li><li class=nav-link><a href=/sdk/software/guides/using-in-javascript/ >Using in Javascript</a></li><li class=nav-link><a href=/sdk/software/guides/using-in-dotnet/ >Using in dotnet</a></li><li class=nav-link><a href=/sdk/software/guides/data-feed>Data Feed</a></li><li class=nav-link><a href=/sdk/software/guides/mygeotab-urls/ >Using MyGeotab URLs</a></li><li class=nav-link><a href=/sdk/software/guides/go-device-logging/ >GO Device Logging</a></li><li class=nav-link><a href=/sdk/software/guides/third-party-devices/ >Using Third-Party Devices</a></li><li class=nav-link><a href=/sdk/software/guides/developing-addins/ >Devloping Add-Ins</a></li><li class=nav-link><a href=/sdk/software/guides/drive-addins/ >Geotab Drive Add-Ins</a></li></ul><h5>API</h5><ul class="nav flex-column"><li class=nav-link><a href=/sdk/software/api/reference/ >Reference</a></li><li class=nav-link><a href=/sdk/software/api/runner.html>Runner</a></li><li class=nav-link><a href=/sdk/software/api/clients/ >API Clients</a></li></ul><h5>Code Samples</h5><ul class="nav flex-column"><li class=nav-link><a href=/sdk/software/js-samples/ >Javascript Examples</a></li><li class=nav-link><a href=https://github.com/Geotab/sdk-dotnet-samples#dotnet-examples>Dotnet Examples</a></li><li class=nav-link><a href=https://github.com/geotab/sdk-addin-examples>Add-in Examples</a></li></ul></ul><h4>Hardware</h4><ul class="nav flex-column"><li class=nav-link><a href=/sdk/hardware/introduction/ >Introduction</a></li><h5>Add-on Protocols</h5><ul class="nav flex-column"><li class=nav-link><a href=/sdk/hardware/addon-protocols/rs232-usb/ >RS232 & USB</a></li><li class=nav-link><a href=/sdk/hardware/addon-protocols/can/ >CAN</a></li><li class="nav-link active"><a href=/sdk/hardware/addon-protocols/ble/ >BLE</a></li></ul><h5>Code Samples</h5><ul class="nav flex-column"><li class=nav-link><a href=/sdk/hardware/samples/python/ >Python</a></li><li class=nav-link><a href=https://github.com/Geotab/android-external-device-example>Andoid</a></li></ul><h5>Developing an IOX</h5><ul class="nav flex-column"><li class=nav-link><a href=/sdk/hardware/developing-an-iox/hardware-design-guide/ >Hardware Design Guide</a></li><li class=nav-link><a href=/sdk/hardware/developing-an-iox/messaging-protocol/ >Messaging Protocol</a></li></ul></ul><h4>Resources</h4><ul class="nav flex-column"><li class=nav-link><a href=https://helpdesk.geotab.com/hc/en-us/community/topics/200655183-SDK-Forum>Forums</a></li><li class=nav-link><a href=https://www.geotab.com/dev-channel/ >Dev Channel</a></li><li class=nav-link><a href=/sdk/resources/new/ >What's New</a></li></ul></nav></div><main role=main><div class=container-fluid><div class=row><article class=col-md-12><header><a href=https://github.com/Geotab/sdk/blob/master/src/hardware/addon-protocols/ble.md class="float-right small"><svg class="octicon octicon-mark-github" viewBox="0 0 16 16" version=1.1 width=16 height=16 aria-hidden=true><path fill-rule=evenodd d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg> Edit on GitHub</a><h1>Add-On Protocol - BLE</h1></header><div><h2 id=advertising-packet>Advertising Packet</h2><table><thead><tr><th>Offset</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>1</td><td>0x02</td><td>AD length</td></tr><tr><td>2</td><td>0x01</td><td>Flags</td></tr><tr><td>3</td><td>0x06</td><td>-LE General Discoverable Mode-BR/EDR Not Supported</td></tr><tr><td>4</td><td>0x06 +Optional Length</td><td>AD length</td></tr><tr><td>5</td><td>0xFF</td><td>Manufacturer Specific Data</td></tr><tr><td>6</td><td>0x0275</td><td>Geotab&rsquo;s Company ID</td></tr><tr><td>8</td><td>0x00</td><td>Advertising packet version number</td></tr><tr><td>9</td><td>0xXX</td><td>Tx Power Level</td></tr><tr><td>10</td><td>0xXX</td><td>Battery Level</td></tr><tr><td>Optional Length(11 to 31)</td><td>0xXX</td><td>Optional Information identifier</td></tr><tr><td>3 bytes</td><td>Optional Information data</td><td></td></tr><tr><td>&hellip;</td><td>&hellip;</td><td></td></tr><tr><td>0xXX</td><td>Optional Information identifier</td><td></td></tr><tr><td>X bytes</td><td>Optional Information data</td><td></td></tr></tbody></table><h3 id=required-data-types>Required Data Types</h3><table><thead><tr><th>Description</th><th>Unit type</th><th>Range</th></tr></thead><tbody><tr><td>Tx Power Level</td><td>Sint 8</td><td>Resolution: 1 dBmMin: −100 dBmMax: 20 dBm</td></tr><tr><td>Battery Level</td><td>Uint 8</td><td>Resolution: 1 %Min: 0%Max: 100%</td></tr></tbody></table><h3 id=optional-information-types>Optional Information Types</h3><p>These information types are optional and are not part of the required packet structure. Each entry must be preceded by the corresponding information identifier byte. If multiple information entries are used in the same advertisement packet, they should be arranged in an incrementing order based on their information identifier. The identifiers in the table below are those that are currently defined. Geotab will define new identifiers for any new sensors as required. You must use the IDs as defined by Geotab. If there is undefined data, contact us via the Help Desk and we will define the data and send you the required ID.</p><table><thead><tr><th>Information identifier</th><th>Description</th><th>Unit type</th><th>Length (bytes)</th><th>Units</th></tr></thead><tbody><tr><td>0 to 4</td><td>Reserved</td><td></td><td></td><td></td></tr><tr><td>5</td><td>Firmware Version</td><td>FP24</td><td>3</td><td>None</td></tr><tr><td>6</td><td>Accelerometer Event Counter</td><td>FP24</td><td>3</td><td>None</td></tr><tr><td>7</td><td>Temperature</td><td>FP24</td><td>3</td><td>Degrees Celsius (°C)</td></tr><tr><td>8</td><td>Illuminance</td><td>FP24</td><td>3</td><td>Lux (lx)</td></tr><tr><td>9</td><td>Relative Humidity</td><td>FP24</td><td>3</td><td>Percent (%)</td></tr><tr><td>10</td><td>Barometric Pressure</td><td>FP24</td><td>3</td><td>Pascals (Pa)</td></tr><tr><td>11</td><td>Altitude</td><td>FP24</td><td>3</td><td>Meters (m)</td></tr><tr><td>12 to 199</td><td>Reserved(for future data types)</td><td>FP24</td><td>3</td><td></td></tr><tr><td>200 to 229</td><td>Reserved</td><td></td><td></td><td></td></tr><tr><td>230 to 239</td><td>Generic Byte (1 to 10)</td><td>UINT8</td><td>1</td><td>None</td></tr><tr><td>240 to 249</td><td>Generic Timer (1 to 10)</td><td>UINT8UINT16</td><td>12</td><td>Event CounterUnits Of Time</td></tr><tr><td>250 to 253</td><td>Reserved</td><td></td><td></td><td></td></tr><tr><td>254</td><td>Wakeup Event</td><td>UINT8</td><td>1</td><td>None</td></tr><tr><td>255</td><td>Custom Data</td><td>UINT8</td><td>X</td><td>None</td></tr></tbody></table><h3 id=fp24-floating-point-24-bit>FP24 (Floating Point 24 bit)</h3><p>Same as FP32 but the 8 least-significant bits dropped.</p><table><thead><tr><th>S</th><th>E</th><th>E</th><th>E</th><th>E</th><th>E</th><th>E</th><th>E</th><th>E</th><th>F</th><th>F</th><th>F</th><th>F</th><th>F</th><th>F</th><th>F</th><th>F</th><th>F</th><th>F</th><th>F</th><th>F</th><th>F</th><th>F</th><th>F</th></tr></thead><tbody><tr><td>23</td><td>22</td><td>21</td><td>20</td><td>19</td><td>18</td><td>17</td><td>16</td><td>15</td><td>14</td><td>13</td><td>12</td><td>11</td><td>10</td><td>9</td><td>8</td><td>7</td><td>6</td><td>5</td><td>4</td><td>3</td><td>2</td><td>1</td><td>0</td></tr></tbody></table><p>[ -2<sup>16,</sup> 2<sup>16</sup> ] can be exactly represented</p><p>[ -2<sup>17,</sup> -2<sup>16</sup> -1 ] or [ 2<sup>16</sup> +1, 2<sup>17</sup> ] rounded to a multiple of 2</p><p>[ -2<sup>18,</sup> -2<sup>17</sup> -1 ] or [ 2<sup>17</sup> +1 2<sup>18</sup> ] rounded to a multiple of 4</p><p>…</p><p>Infinity at: 2<sup>128</sup></p><h3 id=fp24-conversions>FP24 Conversions:</h3><table><thead><tr><th>Action</th><th></th></tr></thead><tbody><tr><td>Store</td><td>Convert to FP32FP24 = FP32 &gt;&gt; 8</td></tr><tr><td>Read</td><td>FP32 = FP24 &lt;&lt; 8Read as FP32</td></tr></tbody></table><p>Note:</p><p>For all information types that use the FP24 format, a new log will be generated for any change in the data. For example, a change in temperature from 2°C to 2.000061°C would trigger a new log. Some implementations may only require a reporting resolution of 1°C. If an excessive number of logs are generated, we will disable reporting on BLE data. The onus is on the implementer to choose an appropriate reporting resolution for their data.</p><h3 id=generic-byte>Generic Byte</h3><p>The Generic Byte type can store one byte of data (0 to 255). It could be used to count the number of times a button is pressed. Or simply store the state of a toggle (0 or 1) switch. A new log will be generated on any change of data.</p><h3 id=generic-timer>Generic Timer</h3><p>The Generic Timer allows keeping track of an elapsed time. The Units Of Time are not specifically defined and can be chosen by the implementor. If may make sense to measure some durations in hours, while others may warrant seconds. The Units Of Time may continuously increment. A new log will not be saved until a new event counter value is reported. The Generic Timer can be associated with other data types. For example, you could associate Generic Timer 1 with temperature to indicating the time when a chosen temperature threshold was exceeded.</p><h3 id=wakeup-event>Wakeup Event</h3><p>A custom parameter is used to configure the IOX-BT to wakeup periodically to check for any wakeup events from beacons within range. The wakeup duration is 1s every 30s while sleeping. This periodic wakeup can be enabled using the following custom parameter:</p><p><parameter description="Enable Periodic Bluetooth Wakeup" offset=167 bytes=80 isenabled=true></p><p>The implementor of this protocol should increase the frequency of advertisements sent during an attempted wakeup event. A 100ms advertisement interval that persists for a minimum of 1 minute is recommended.</p><p>When sending the wakeup event as part of the advertisement data a value of 0x00 means &ldquo;no event&rdquo;. Anything greater than 0 that has not already been reported on will cause the GO to wakeup and report on the beacon advertisements. The event is only used as an indication for reporting the changes in the rest of the advertisement data. The actual contents of the alert event byte will not be sent/reported.</p><h3 id=custom-data>Custom Data</h3><p>Arbitrary data can be placed in the custom data segment. The data will not be interpreted by MyGeotab, but will be accessible through the API. The onus is on the implementor to extract and interpret the data. The data must be preceded by the length. The length is limited by the amount of data that can fit in the optional information section. The maximum custom data length is 18 bytes. A new log will be generated on any change in the data.</p><table><thead><tr><th>Offset</th><th>Description</th></tr></thead><tbody><tr><td>1</td><td>Length</td></tr><tr><td>2 to Length</td><td>Custom Data</td></tr></tbody></table><p>Example:</p><table><thead><tr><th>Type</th><th>Length</th><th>Data</th></tr></thead><tbody><tr><td>255</td><td>8</td><td>1</td></tr></tbody></table><h3 id=message-interleaving>Message Interleaving</h3><p>Message interleaving is not supported. The data types in the packet must remain consistent between advertisements.</p><h3 id=example-packets>Example Packets</h3><p>Reporting temperature</p><table><thead><tr><th>Offset</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>1</td><td>0x02</td><td>AD length</td></tr><tr><td>2</td><td>0x01</td><td>Flags</td></tr><tr><td>3</td><td>0x06</td><td>-LE General Discoverable Mode-BR/EDR Not Supported</td></tr><tr><td>4</td><td>0x0A</td><td>AD length</td></tr><tr><td>5</td><td>0xFF</td><td>Manufacturer Specific Data</td></tr><tr><td>6</td><td>0x0275</td><td>Geotab&rsquo;s Company ID</td></tr><tr><td>8</td><td>0x00</td><td>Advertising packet version number</td></tr><tr><td>9</td><td>0xC6</td><td>Tx Power Level (-58dBm)</td></tr><tr><td>10</td><td>0x64</td><td>Battery Level (100%)</td></tr><tr><td>11</td><td>0x07</td><td>Temperature</td></tr><tr><td>12</td><td>0x00</td><td>0x412000 FP24 = 10°C</td></tr><tr><td>13</td><td>0x20</td><td></td></tr><tr><td>14</td><td>0x41</td><td></td></tr></tbody></table><p>Reporting a timer</p><table><thead><tr><th>Offset</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>1</td><td>0x02</td><td>AD length</td></tr><tr><td>2</td><td>0x01</td><td>Flags</td></tr><tr><td>3</td><td>0x06</td><td>-LE General Discoverable Mode-BR/EDR Not Supported</td></tr><tr><td>4</td><td>0x0A</td><td>AD length</td></tr><tr><td>5</td><td>0xFF</td><td>Manufacturer Specific Data</td></tr><tr><td>6</td><td>0x0275</td><td>Geotab&rsquo;s Company ID</td></tr><tr><td>8</td><td>0x00</td><td>Advertising packet version number</td></tr><tr><td>9</td><td>0xC6</td><td>Tx Power Level (-58dBm)</td></tr><tr><td>10</td><td>0x64</td><td>Battery Level (100%)</td></tr><tr><td>11</td><td>0xF1</td><td>Generic Timer 2</td></tr><tr><td>12</td><td>0x03</td><td>Event</td></tr><tr><td>13</td><td>0xF4</td><td>0x01F4 = 500 minutes</td></tr><tr><td>14</td><td>0x01</td><td></td></tr></tbody></table><p>Reporting temperature and a timer</p><table><thead><tr><th>Offset</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>1</td><td>0x02</td><td>AD length</td></tr><tr><td>2</td><td>0x01</td><td>Flags</td></tr><tr><td>3</td><td>0x06</td><td>-LE General Discoverable Mode-BR/EDR Not Supported</td></tr><tr><td>4</td><td>0x0E</td><td>AD length</td></tr><tr><td>5</td><td>0xFF</td><td>Manufacturer Specific Data</td></tr><tr><td>6</td><td>0x0275</td><td>Geotab&rsquo;s Company ID</td></tr><tr><td>8</td><td>0x00</td><td>Advertising packet version number</td></tr><tr><td>9</td><td>0xC6</td><td>Tx Power Level (-58dBm)</td></tr><tr><td>10</td><td>0x64</td><td>Battery Level (100%)</td></tr><tr><td>11</td><td>0x07</td><td>Temperature</td></tr><tr><td>12</td><td>0x00</td><td>0x412000 FP24 = 10°C</td></tr><tr><td>13</td><td>0x20</td><td></td></tr><tr><td>14</td><td>0x41</td><td></td></tr><tr><td>15</td><td>0xF1</td><td>Generic Timer 2</td></tr><tr><td>16</td><td>0x03</td><td>Event</td></tr><tr><td>17</td><td>0xF4</td><td>0x01F4 = 500 minutes</td></tr><tr><td>18</td><td>0x01</td><td></td></tr></tbody></table><p>Reporting custom data</p><table><thead><tr><th>Offset</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>1</td><td>0x02</td><td>AD length</td></tr><tr><td>2</td><td>0x01</td><td>Flags</td></tr><tr><td>3</td><td>0x06</td><td>-LE General Discoverable Mode-BR/EDR Not Supported</td></tr><tr><td>4</td><td>0x0F</td><td>AD length</td></tr><tr><td>5</td><td>0xFF</td><td>Manufacturer Specific Data</td></tr><tr><td>6</td><td>0x0275</td><td>Geotab&rsquo;s Company ID</td></tr><tr><td>8</td><td>0x00</td><td>Advertising packet version number</td></tr><tr><td>9</td><td>0xC6</td><td>Tx Power Level (-58dBm)</td></tr><tr><td>10</td><td>0x64</td><td>Battery Level (100%)</td></tr><tr><td>11</td><td>0xFF</td><td>Custom Data</td></tr><tr><td>12</td><td>0x07</td><td>Length</td></tr><tr><td>13</td><td>0x42</td><td>Custom data&quot;Beacon1&quot; in ASCII</td></tr><tr><td>14</td><td>0x65</td><td></td></tr><tr><td>15</td><td>0x61</td><td></td></tr><tr><td>16</td><td>0x63</td><td></td></tr><tr><td>17</td><td>0x6F</td><td></td></tr><tr><td>18</td><td>0x6E</td><td></td></tr><tr><td>19</td><td>0x31</td><td></td></tr></tbody></table><p>Reporting temperature + counter + timer + custom data</p><table><thead><tr><th>Offset</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>1</td><td>0x02</td><td>AD length</td></tr><tr><td>2</td><td>0x01</td><td>Flags</td></tr><tr><td>3</td><td>0x06</td><td>-LE General Discoverable Mode-BR/EDR Not Supported</td></tr><tr><td>4</td><td>0x19</td><td>AD length</td></tr><tr><td>5</td><td>0xFF</td><td>Manufacturer Specific Data</td></tr><tr><td>6</td><td>0x0275</td><td>Geotab&rsquo;s Company ID</td></tr><tr><td>8</td><td>0x00</td><td>Advertising packet version number</td></tr><tr><td>9</td><td>0xC6</td><td>Tx Power Level (-58dBm)</td></tr><tr><td>10</td><td>0x64</td><td>Battery Level (100%)</td></tr><tr><td>11</td><td>0x07</td><td>Temperature</td></tr><tr><td>12</td><td>0x00</td><td>0x412000 FP24 = 10°C</td></tr><tr><td>13</td><td>0x20</td><td></td></tr><tr><td>14</td><td>0x41</td><td></td></tr><tr><td>15</td><td>0xE6</td><td>Generic Counter 1</td></tr><tr><td>16</td><td>0x08</td><td>Count</td></tr><tr><td>17</td><td>0xF1</td><td>Generic Timer 2</td></tr><tr><td>18</td><td>0x03</td><td>Event</td></tr><tr><td>19</td><td>0xF4</td><td>0x01F4 = 500 minutes</td></tr><tr><td>20</td><td>0x01</td><td></td></tr><tr><td>21</td><td>0xFF</td><td>Custom Data</td></tr><tr><td>22</td><td>0x07</td><td>Length</td></tr><tr><td>23</td><td>0x42</td><td>Custom data&quot;Beacon1&quot; in ASCII</td></tr><tr><td>24</td><td>0x65</td><td></td></tr><tr><td>25</td><td>0x61</td><td></td></tr><tr><td>26</td><td>0x63</td><td></td></tr><tr><td>27</td><td>0x6F</td><td></td></tr><tr><td>28</td><td>0x6E</td><td></td></tr><tr><td>29</td><td>0x31</td><td></td></tr></tbody></table></div></article></div></div></main></div><script src=/sdk/assets/javascript/index-766ac277eb.min.js></script></body></html>