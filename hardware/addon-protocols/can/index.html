<!DOCTYPE html><html lang=En><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>Add-On Protocol - CAN | MyGeotab SDK</title><meta name=generator content="Jekyll v4.2.0"><meta property=og:title content="Add-On Protocol - CAN"><meta name=author content="The Geotab Team"><meta property=og:locale content=en_US><meta name=description content="The Geotab SDK (Software Development Kit) is a powerful set of tools for automating tasks and working with the data in MyGeotab. Within these documents you will find information on how to develop JavaScript and C# applications, build and integrate Add-Ins and use MyGeotab with third-party systems."><meta property=og:description content="The Geotab SDK (Software Development Kit) is a powerful set of tools for automating tasks and working with the data in MyGeotab. Within these documents you will find information on how to develop JavaScript and C# applications, build and integrate Add-Ins and use MyGeotab with third-party systems."><link rel=canonical href=https://geotab.github.io/sdk/hardware/addon-protocols/can/ ><meta property=og:url content=https://geotab.github.io/sdk/hardware/addon-protocols/can/ ><meta property=og:site_name content="MyGeotab SDK"><meta name=twitter:card content=summary><meta property=twitter:title content="Add-On Protocol - CAN"><script type=application/ld+json>{"author":{"@type":"Person","name":"The Geotab Team"},"headline":"Add-On Protocol - CAN","@type":"WebPage","description":"The Geotab SDK (Software Development Kit) is a powerful set of tools for automating tasks and working with the data in MyGeotab. Within these documents you will find information on how to develop JavaScript and C# applications, build and integrate Add-Ins and use MyGeotab with third-party systems.","url":"https://geotab.github.io/sdk/hardware/addon-protocols/can/","@context":"https://schema.org"}</script><link rel=stylesheet href=/sdk/assets/stylesheets/style-a7f3802103.min.css><link rel=stylesheet href=/sdk/assets/stylesheets/style.css><link rel=apple-touch-icon-precomposed sizes=144x144 href=/sdk/assets/images/touch/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=/sdk/favicon.ico></head><body><header><nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark" title=navigationBar><a class=navbar-brand href=/sdk/ ><img src=/sdk/assets/images/pillar.svg width=30 height=30 class="d-inline-block align-top" alt=""> MyGeotab SDK </a><button class="navbar-toggler d-lg-none" id=toggler type=button aria-label="navigation bar toggler"><span class=navbar-toggler-icon></span></button></nav></header><div id=wrapper><div id=sidebar-wrapper class=bg-light><nav id=sidebar class=sidebar><h4>Software</h4><ul class="nav flex-column"><li class=nav-link><a href=/sdk/software/introduction/ >Software Introduction</a></li><li class=nav-link><a href=/sdk/resources/new/ >What's New</a></li><li><h5>Guides</h5><ul class="nav flex-column"><li class=nav-link><a href=/sdk/software/guides/getting-started/ >Getting Started</a></li><li class=nav-link><a href=/sdk/software/guides/concepts/ >Concepts</a></li><li class=nav-link><a href=/sdk/software/guides/using-in-javascript/ >Using in Javascript</a></li><li class=nav-link><a href=/sdk/software/guides/using-in-dotnet/ >Using in .Net</a></li><li class=nav-link><a href=/sdk/software/guides/using-in-java/ >Using in Java</a> <span class=beta>Beta</span></li><li class=nav-link><a href=/sdk/software/guides/data-feed/ >Data Feed</a></li><li class=nav-link><a href=/sdk/software/guides/mygeotab-urls/ >Using MyGeotab URLs</a></li><li class=nav-link><a href=/sdk/software/guides/using-go-devices/ >Using GO Devices</a></li><li class=nav-link><a href=/sdk/software/guides/go-device-logging/ >GO Device Logging</a></li><li class=nav-link><a href=/sdk/software/guides/custom-telematics-devices/ >Using Custom Telematics Devices</a></li><li class=nav-link><a href=/sdk/software/guides/developing-addins/ >Developing Add-Ins</a></li><li class=nav-link><a href=/sdk/software/guides/addin-storage/ >Using Add-Ins for data storage</a></li><li class=nav-link><a href=/sdk/software/guides/drive-addins/ >Geotab Drive Add-Ins</a></li><li class=nav-link><a href=/sdk/software/guides/map-add-ins-docs/ >Map Add-ins</a></li><li class=nav-link><a href=https://github.com/Geotab/mg-media-files>Media Files</a> <span class=beta>Beta</span></li><li class=nav-link><a href=/sdk/software/guides/power-bi/ >Connect to Power BI</a></li></ul></li><li><h5>API</h5><ul class="nav flex-column"><li class=nav-link><a href=/sdk/software/api/reference/ >Reference</a></li><li class=nav-link><a href=/sdk/software/api/runner.html>Runner</a></li><li class=nav-link><a href=/sdk/software/api/clients/ >API Clients</a></li></ul></li><li><h5>Code Samples</h5><ul class="nav flex-column"><li class=nav-link><a href=/sdk/software/js-samples/ >Javascript Examples</a></li><li class=nav-link><a href=https://github.com/Geotab/sdk-dotnet-samples>.Net Examples</a></li><li class=nav-link><a href=https://github.com/Geotab/sdk-java-samples>Java Examples</a> <span class=beta>Beta</span></li><li class=nav-link><a href=https://github.com/Geotab/sdk-addin-samples>Add-in Examples</a></li></ul></li></ul><hr><h4>Hardware</h4><ul class="nav flex-column"><li class=nav-link><a href=/sdk/hardware/introduction/ >Hardware Introduction</a></li><li class=nav-link><a href=/sdk/hardware/hardware-add-on-data-types/ >Hardware Add-On data types</a></li><li><h5>Add-on Protocols</h5><ul class="nav flex-column"><li class=nav-link><a href=/sdk/hardware/addon-protocols/rs232-usb/ >RS232 & USB</a></li><li class="nav-link active"><a href=/sdk/hardware/addon-protocols/can/ >CAN</a></li><li class=nav-link><a href=/sdk/hardware/addon-protocols/ble/ >BLE</a></li></ul></li><li><h5>Code Samples</h5><ul class="nav flex-column"><li class=nav-link><a href=/sdk/hardware/samples/python/ >Python</a></li><li class=nav-link><a href=https://github.com/Geotab/android-external-device-example>Android</a></li></ul></li><li><h5>Developing an IOX</h5><ul class="nav flex-column"><li class=nav-link><a href=/sdk/hardware/developing-an-iox/hardware-design-guide/ >Hardware Design Guide</a></li><li class=nav-link><a href=/sdk/hardware/developing-an-iox/messaging-protocol/ >Messaging Protocol</a></li></ul></li></ul><hr><h4>MyAdmin SDK</h4><ul class="nav flex-column"><li class=nav-link><a href=/sdk/myadmin-sdk/introduction/ >MyAdmin SDK Introduction</a></li><li><h5>Guides</h5><ul class="nav flex-column"><li class=nav-link><a href=/sdk/myadmin-sdk/guides/getting-started/ >Getting Started</a></li><li class=nav-link><a href=/sdk/myadmin-sdk/guides/concepts/ >Concepts</a></li><li class=nav-link><a href=/sdk/myadmin-sdk/guides/using-with-dotnet/ >Using with .NET</a></li><li class=nav-link><a href=/sdk/myadmin-sdk/guides/using-with-javascript/ >Using with JavaScript</a></li></ul></li><li><h5>API</h5><ul class="nav flex-column"><li class=nav-link><a href=/sdk/myadmin-sdk/api/reference/ >Reference</a></li></ul></li><li><h5>Code Samples</h5><ul class="nav flex-column"><li class=nav-link><a href=/sdk/myadmin-sdk/code-samples/dotnet-examples/ >.NET Examples</a></li><li class=nav-link><a href=/sdk/myadmin-sdk/code-samples/javascript-examples/ >JavaScript Examples</a></li></ul></li></ul><hr><h4>Resources</h4><ul class="nav flex-column"><li class=nav-link><a href=https://community.geotab.com/s/ >Forums</a></li><li class=nav-link><a href=https://www.geotab.com/dev-channel/ >Dev Channel</a></li></ul><hr></nav></div><main role=main><div class=container-fluid><div class=row><article class=col-md-12><header><a href=https://github.com/Geotab/sdk/blob/master/src/hardware/addon-protocols/can.md class="float-right small"><svg class="octicon octicon-mark-github" viewBox="0 0 16 16" version=1.1 width=16 height=16 aria-hidden=true><path fill-rule=evenodd d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg> Edit on GitHub</a><h1>Add-On Protocol - CAN</h1></header><div><p>External devices can communicate with the Geotab GO device through the revised Third-Party Data CAN protocol. No initial handshake is required to communicate through the IOX-CAN. The GO device will start processing third-party data if it is in the correct format. Once processed, the third-party data will be saved and sent to MyGeotab as Status Data.</p><h2 id=integration-process>Integration Process</h2><p>The following process should be followed when attempting to integrate a third-party device with the GO device using our Third-Party Data CAN Protocol:</p><h3 id=1---request-external-device-id>1 - Request External Device ID</h3><p>Contact <a href=mailto:soleng@geotab.com>Geotab Solution Engineering team</a> to obtain an External Device ID for your third-party device. This will allow us to uniquely identify your device when it connects to a GO device. Thereafter, any connection established by that type of external device will be recorded as Status Data in MyGeotab under the naming format "[External device name] device connected".</p><h3 id=2---request-status-data-ids>2 - Request Status Data IDs</h3><p>Contact <a href=mailto:soleng@geotab.com>Geotab Solution Engineering team</a> to obtain Status Data IDs for every individual piece of information you wish to send to the GO device. For each piece of information, conversion parameters are also required. Conversions must be in the form as per the examples below:</p><table><thead><tr><th>Status Data ID</th><th>Description</th><th>Multiplier</th><th>Offset</th><th>Unit</th></tr></thead><tbody><tr><td>5 (assigned by Geotab)</td><td>Odometer</td><td>0.1</td><td>0</td><td>km</td></tr><tr><td>53 (assigned by Geotab)</td><td>Outside Temperature</td><td>1</td><td>–40</td><td>degrees C</td></tr></tbody></table><p>A multiplier and offset must be supplied by the third-party vendor when requesting Status Data IDs so that MyGeotab can convert the data.</p><p>The GO device will relay the raw data sent by the external device to MyGeotab. MyGeotab will then take the raw value received from the GO device and adjust by the multiplier and the offset. When MyGeotab applies the conversion, the multiplier is always done first, followed by the offset, as per the formula:</p><p>Final Value = (Initial Value × Multiplier) + Offset</p><p>For example, if you are reporting a temperature range from -40 °C to 215 °C, the third-party device would send values from 0 to 255 (can't send negative values). The offset would be set to -40 so that MyGeotab would know to subtract 40 from the value obtained from the GO device. So a reported value of 0 by the third-party device would show up as -40 °C in MyGeotab.</p><p>Another example: The third-party device is sending a distance in 0.1 km increments, such that a value of 1223 represents a distance of 122.3 km. A multiplier of 0.1 should be applied so that the value is properly converted to kilometers on MyGeotab.</p><p>The unit refers to the unit of measurement that you wish to see in MyGeotab after all the conversions are complete. Geotab uses metric units and all predefined status IDs currently used by Geotab are in metric units.</p><h3 id=3---implement-the-third-party-can-protocol>3 - Implement the Third-Party CAN Protocol</h3><p>Implement the Third-Party CAN Protocol in the external device as detailed below. The CAN speed to be used will be 250K or 500K and the external device should have its CAN transceiver set to normal mode. The IOX CAN will auto-baud between 250K and 500K.</p><h3 id=can-id>CAN ID</h3><p>The CAN ID will be an extended frame message (29-bit) and will be broken down into 4 bytes with the most significant byte (MSB) (byte 1) containing 5 bits to make up the 29-bit ID header. A breakdown of the CAN ID is shown below:</p><table><thead><tr><th>Byte</th><th>Description</th><th>Value</th></tr></thead><tbody><tr><td>Byte 1</td><td>MSB, 5 bits</td><td>0</td></tr><tr><td>Byte 2 and 3</td><td>Geotab's Parameter Group Number (PGN)</td><td>0x0FDB</td></tr><tr><td>Byte 4</td><td>Message Type</td><td>Varied</td></tr></tbody></table><h4 id=data-length-dlc>Data Length (DLC)</h4><p>Indicates how many bytes of data are being sent (up to a maximum of 8).</p><h4 id=data>Data</h4><p>All values must be sent with the least significant byte first.</p><p>Each piece of information related to the third-party device must be sent individually and have its own Status Data ID as part of the message.</p><p>Note: See <a href=#appendix-a-raw-message-data-example-for-iox-can>Appendix A</a> for an example of raw message data.</p><h2 id=messages-from-go-device>Messages from GO device</h2><h3 id=msg-type-0x02-third-party-data-acknowledge>Msg Type 0x02: Third-Party Data Acknowledge</h3><p>Issued by the GO device on receipt of Third-Party Data from the External Device.</p><table><thead><tr><th>CAN ID Breakdown</th><th>Value</th></tr></thead><tbody><tr><td>Byte 1</td><td>0x00</td></tr><tr><td>Byte 2 (Geotab PGN)</td><td>0x0F</td></tr><tr><td>Byte 3 (Geotab PGN)</td><td>0xDB</td></tr><tr><td>Byte 4 (Message Type)</td><td>0x02</td></tr><tr><td>Data Length</td><td> </td></tr><tr><td>DLC</td><td>1</td></tr><tr><td>Data Breakdown</td><td> </td></tr><tr><td>Data 1</td><td>The Message Type acknowledged</td></tr></tbody></table><h2 id=messages-from-external-device>Messages from External Device</h2><h3 id=msg-type-0x81-third-party-device-id>Msg Type 0x81: Third-Party Device ID</h3><p>Issued by the external device on power-up every second until the Acknowledge message (Msg Type 0x02) is received.</p><table><thead><tr><th>CAN ID Breakdown</th><th>Value</th></tr></thead><tbody><tr><td>Byte 1</td><td>0x00</td></tr><tr><td>Byte 2 (Geotab PGN)</td><td>0x0F</td></tr><tr><td>Byte 3 (Geotab PGN)</td><td>0xDB</td></tr><tr><td>Byte 4 (Message Type)</td><td>0x81</td></tr><tr><td>Data Length</td><td>Value</td></tr><tr><td>DLC</td><td>2</td></tr><tr><td>Data Breakdown</td><td>Value</td></tr><tr><td>Data 1–2</td><td>Device ID (assigned by Geotab)</td></tr><tr><td>Reply: Third-Party Device ID Ack</td><td> </td></tr></tbody></table><h3 id=msg-type-0x80-third-party-data-as-status-data>Msg Type 0x80: Third-Party Data as Status Data</h3><p>Issued by the external device whenever it wants Third-Party Data saved on the GO device.</p><table><thead><tr><th>CAN ID Breakdown</th><th>Value</th></tr></thead><tbody><tr><td>Byte 1</td><td>0x00</td></tr><tr><td>Byte 2 (Geotab PGN)</td><td>0x0F</td></tr><tr><td>Byte 3 (Geotab PGN)</td><td>0xDB</td></tr><tr><td>Byte 4 (Message Type)</td><td>0x80</td></tr><tr><td>Data Length</td><td>Value</td></tr><tr><td>DLC</td><td>6</td></tr><tr><td>Data Breakdown</td><td>Value</td></tr><tr><td>Byte 1–2</td><td>Status Data ID</td></tr><tr><td>Byte 3–6</td><td>Status Data</td></tr><tr><td>Reply: Third-Party Data Ack (Msg Type 0x02)</td><td> </td></tr></tbody></table><h3 id=msg-type-0x82-free-format-third-party-data>Msg Type 0x82: Free Format Third-Party Data</h3><p>Currently not implemented.</p><h3 id=msg-type-0x87-third-party-data-as-priority-status-data>Msg Type 0x87: Third-Party Data as Priority Status Data</h3><p>Priority Status Data will follow an expedited processing workflow on the GoDevice but will otherwise be treated the same as the 0x80 Status Data message. It will also be logged using an Iridium modem connection if available.</p><table><thead><tr><th>CAN ID Breakdown</th><th>Value</th></tr></thead><tbody><tr><td>Byte 1</td><td>0x00</td></tr><tr><td>Byte 2 (Geotab PGN)</td><td>0x0F</td></tr><tr><td>Byte 3 (Geotab PGN)</td><td>0xDB</td></tr><tr><td>Byte 4 (Message Type)</td><td>0x87</td></tr><tr><td>Data Length</td><td>Value</td></tr><tr><td>DLC</td><td>6</td></tr><tr><td>Data Breakdown</td><td>Value</td></tr><tr><td>Byte 1–2</td><td>Status Data ID</td></tr><tr><td>Byte 3–6</td><td>Status Data</td></tr><tr><td>Reply: Third-Party Data Ack (Msg Type 0x02)</td><td> </td></tr></tbody></table><h2 id=messages-from-mygeotab>Messages from MyGeotab</h2><p>To send messages from MyGeotab to the external device, please download the source code of the <a href=/software/js-samples/#starter-kit>Starter Kit</a> sample, and replace the <a href=https://github.com/Geotab/sdk/blob/master/src/software/js-samples/starterKit.html#L76>Sample API</a> with the following script. The alternative is paste the script in the <a href=/software/api/runner.html>Runner</a>.</p><div class="language-javascript highlighter-rouge"><div class=highlight><pre class=highlight><code>    <span class=nx>api</span><span class=p>.</span><span class=nx>call</span><span class=p>(</span><span class=dl>"</span><span class=s2>Add</span><span class=dl>"</span><span class=p>,</span> <span class=p>{</span>
                <span class=dl>"</span><span class=s2>typeName</span><span class=dl>"</span><span class=p>:</span> <span class=dl>"</span><span class=s2>TextMessage</span><span class=dl>"</span><span class=p>,</span>
                <span class=dl>"</span><span class=s2>entity</span><span class=dl>"</span><span class=p>:</span> <span class=p>{</span>
                  <span class=dl>"</span><span class=s2>isDirectionToVehicle</span><span class=dl>"</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
                  <span class=dl>"</span><span class=s2>activeFrom</span><span class=dl>"</span><span class=p>:</span> <span class=dl>"</span><span class=s2>1986-01-01T00:00:00.000Z</span><span class=dl>"</span><span class=p>,</span>
                  <span class=dl>"</span><span class=s2>activeTo</span><span class=dl>"</span><span class=p>:</span> <span class=dl>"</span><span class=s2>2050-01-01T00:00:00.000Z</span><span class=dl>"</span><span class=p>,</span>
                  <span class=dl>"</span><span class=s2>messageContent</span><span class=dl>"</span><span class=p>:</span> <span class=p>{</span>
                    <span class=dl>"</span><span class=s2>contentType</span><span class=dl>"</span><span class=p>:</span> <span class=dl>"</span><span class=s2>CAN</span><span class=dl>"</span><span class=p>,</span>  
                    <span class=dl>"</span><span class=s2>channel</span><span class=dl>"</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>                   <span class=c1>//Taken from Get&lt;IoxAddOn&gt; call</span>
                    <span class=dl>"</span><span class=s2>arbitrationId</span><span class=dl>"</span><span class=p>:</span>  <span class=mi>217055107</span><span class=p>,</span>    <span class=c1>//Fixed value do not change</span>
                    <span class=dl>"</span><span class=s2>isAcknowledgeRequired</span><span class=dl>"</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
                    <span class=dl>"</span><span class=s2>extendedFrameFlag</span><span class=dl>"</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
                    <span class=dl>"</span><span class=s2>data</span><span class=dl>"</span><span class=p>:</span> <span class=nx>base64_encoded_byte</span>     <span class=c1>//Replace with your data encoded in base64</span>
                  <span class=p>},</span>
                  <span class=dl>"</span><span class=s2>device</span><span class=dl>"</span><span class=p>:</span> <span class=p>{</span>
                    <span class=dl>"</span><span class=s2>id</span><span class=dl>"</span><span class=p>:</span> <span class=nx>device</span><span class=p>.</span><span class=nx>id</span>                 <span class=c1>//Replace with device id of interest</span>
                  <span class=p>}</span>
                <span class=p>}</span>
              <span class=p>},</span> <span class=kd>function</span><span class=p>(</span><span class=nx>result</span><span class=p>)</span> <span class=p>{</span>
                  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=dl>"</span><span class=s2>Done: </span><span class=dl>"</span><span class=p>,</span> <span class=nx>result</span><span class=p>);</span>
              <span class=p>},</span> <span class=kd>function</span><span class=p>(</span><span class=nx>e</span><span class=p>)</span> <span class=p>{</span>
                  <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=dl>"</span><span class=s2>Failed:</span><span class=dl>"</span><span class=p>,</span> <span class=nx>e</span><span class=p>);</span>
              <span class=p>});</span>
</code></pre></div></div><h2 id=appendix>Appendix</h2><h3 id=appendix-a-raw-message-data-example-for-iox-can>Appendix A: Raw Message Data Example for IOX-CAN</h3><p>Third-Party Device ID from External Device (4208 is a test Device ID).</p><p>(Device ID: 4208 = 0x1070)</p><p>CAN ID: 0x000FDB81</p><p>DLC: 02</p><p>Data: 0x70, 0x10</p><p>Third-Party Device ID Acknowledge from GO device</p><p>CAN ID: 0x000FDB02</p><p>DLC: 01</p><p>Data: 0x81</p><p>…</p><p>Third-Party Data from External Device</p><p>(Status Data ID: 9999 = 0x270F, Data Value: 230 = 0x000000E6)</p><p>CAN ID: 0x000FDB80</p><p>DLC: 06</p><p>Data: 0x0F, 0x27, 0xE6, 0x00, 0x00, 0x00</p><p>Third-Party Data Acknowledge from GO device</p><p>CAN ID: 0x000FDB02</p><p>DLC: 01</p><p>Data: 0x80</p></div></article></div></div><footer class="footer mt-auto py-3"><a href=https://www.geotab.com/security/ target=_blank>Security</a> &nbsp;&nbsp;|&nbsp;&nbsp; <a href=https://docs.google.com/document/d/1sVygLN02w2xNovFY4q5vw-oAzfYxCd7WLhyToElgDbs/pub rel=noopener target=_blank>Privacy Policy</a> &nbsp;&nbsp;|&nbsp;&nbsp; <a href=https://myadmin.geotab.com/sdk rel=noopener target=_blank>MyAdmin SDK</a> &nbsp;&nbsp;|&nbsp;&nbsp; <a href=https://docs.google.com/document/d/1jA8Qc8WZMhmaqdjd8Ng8rY4iMI073xCfLNt_DSP72TQ/edit rel=noopener target=_blank>End User Agreement</a><div class="copyright-container copyright-white-text">Copyright &copy; 2017 Geotab</div></footer></main></div><script src=/sdk/assets/javascript/index.js></script></body></html>