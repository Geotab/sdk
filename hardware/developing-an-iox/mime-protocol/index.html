<!DOCTYPE html><html lang=En><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><script src=https://cmp.osano.com/Azq8VcSSUm67lg5f/3c378e5d-3772-41f7-8106-94eeee3a3c15/osano.js></script><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-5V5GBX4');</script><title>MIME Protocol | Geotab Developers</title><meta name=generator content="Jekyll v4.4.1"><meta property=og:title content="MIME Protocol"><meta name=author content="The Geotab Team"><meta property=og:locale content=en_US><meta name=description content="This site provides tools for integrating with various types of Geotab products."><meta property=og:description content="This site provides tools for integrating with various types of Geotab products."><link rel=canonical href=https://geotab.github.io/sdk/hardware/developing-an-iox/mime-protocol/ ><meta property=og:url content=https://geotab.github.io/sdk/hardware/developing-an-iox/mime-protocol/ ><meta property=og:site_name content="Geotab Developers"><meta property=og:type content=website><meta name=twitter:card content=summary><meta property=twitter:title content="MIME Protocol"><script type=application/ld+json>{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"The Geotab Team"},"description":"This site provides tools for integrating with various types of Geotab products.","headline":"MIME Protocol","url":"https://geotab.github.io/sdk/hardware/developing-an-iox/mime-protocol/"}</script><link rel=stylesheet href=/sdk/assets/stylesheets/style-45c7a0b6b4.min.css><link rel=stylesheet href=/sdk/assets/stylesheets/style.css><link rel=apple-touch-icon-precomposed sizes=144x144 href=/sdk/assets/images/touch/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=/sdk/favicon.ico></head><body><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5V5GBX4" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><header><div class=deprecation-modal id=site-deprecation-modal><button class=close id=deprecation-modal-close>&times;</button><div class=navbar-deprecation-banner><h2>üì¢ This site was deprecated on April 30, 2024. üì¢</h2><h1>Check out the new <a href=https://developers.geotab.com target=_blank rel="noreferrer noopener" title="Geotab SDK - Developers Site">developers.geotab.com</a></h1><h3>This site will redirect to developers.geotab.com starting May 31, 2024.</h3></div></div><div class=navbar-deprecation-banner id=runner-deprecation-banner style="background-color: #A01F0E;"><span style="color: white;">üì¢ This site will be going away on May 12, 2025. Check out the new </span><a href=https://developers.geotab.com/myGeotab/runner target=_blank rel="noreferrer noopener" title="API Runner" style="color: white; text-decoration: underline;">API Runner</a></div><nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark" title=navigationBar><div><a class=navbar-brand href=https://developers.geotab.com target=_blank rel="noreferrer noopener"><img src=/sdk/assets/images/pillar.svg width=30 height=30 class="d-inline-block align-top" alt=""> Geotab Developers </a><button class="navbar-toggler d-lg-none" id=toggler type=button aria-label="navigation bar toggler"><span class=navbar-toggler-icon></span></button></div></nav><script>let banner = document.getElementById("deprecation-banner");
        let modal = document.getElementById("site-deprecation-modal");

        let closeButton = document.getElementById("deprecation-modal-close");
        closeButton.addEventListener("click", () => {
            modal.style.display = "none";
        });

        if (window.location.href.includes("runner") && banner) {
            banner.parentElement.removeChild(banner);
        }

        if (window.location.href.includes("runner") && modal) {
            modal.parentElement.removeChild(modal);
        }

        if(!window.location.href.includes("runner")) {
            window.location.href = "https://developers.geotab.com";
        }</script></header><div id=wrapper><div id=sidebar-wrapper class=bg-light><nav id=sidebar class=sidebar><h4>MyGeotab SDK</h4><ul class="nav flex-column"><li class=nav-link><a href=/sdk/software/introduction/ >MyGeotab SDK Introduction</a></li><li class=nav-link><a href=/sdk/resources/new/ >What's New</a></li><li><h5>Guides</h5><ul class="nav flex-column"><li class=nav-link><a href=/sdk/software/guides/getting-started/ >Getting Started</a></li><li class=nav-link><a href=/sdk/software/guides/concepts/ >Concepts</a></li><li class=nav-link><a href=/sdk/software/guides/using-in-javascript/ >Using in Javascript</a></li><li class=nav-link><a href=/sdk/software/guides/using-in-dotnet/ >Using in .Net</a></li><li class=nav-link><a href=/sdk/software/guides/using-in-java/ >Using in Java</a> <span class=beta>Beta</span></li><li class=nav-link><a href=/sdk/software/guides/data-feed/ >Data Feed</a></li><li class=nav-link><a href=/sdk/software/guides/mygeotab-urls/ >Using MyGeotab URLs</a></li><li class=nav-link><a href=/sdk/software/guides/using-go-devices/ >Using GO Devices</a></li><li class=nav-link><a href=/sdk/software/guides/go-device-logging/ >GO Device Logging</a></li><li class=nav-link><a href=/sdk/software/guides/custom-telematics-devices/ >Using Custom Telematics Devices</a></li><li class=nav-link><a href=/sdk/software/guides/developing-addins/ >Developing Add-Ins</a></li><li class=nav-link><a href=/sdk/software/guides/addin-storage/ >Using Add-Ins for data storage</a></li><li class=nav-link><a href=/sdk/software/guides/drive-addins/ >Geotab Drive Add-Ins</a></li><li class=nav-link><a href=/sdk/software/guides/map-add-ins-docs/ >Map Add-ins</a></li><li class=nav-link><a href=https://github.com/Geotab/mg-media-files>Media Files</a> <span class=beta>Beta</span></li><li class=nav-link><a href=/sdk/software/guides/power-bi/ >Connect to Power BI</a></li><li class=nav-link><a href=/sdk/software/guides/geotab-data-connector/ >Using the Geotab Data Connector</a></li></ul></li><li><h5>API</h5><ul class="nav flex-column"><li class=nav-link><a href=/sdk/software/api/reference/ >Reference</a></li><li class=nav-link><a href=/sdk/software/api/runner.html>Runner</a></li><li class=nav-link><a href=/sdk/software/api/clients/ >API Clients</a></li></ul></li><li><h5>Code Samples</h5><ul class="nav flex-column"><li class=nav-link><a href=/sdk/software/js-samples/ >Javascript Examples</a></li><li class=nav-link><a href=/sdk/software/dotnet-samples/ >.Net Examples</a></li><li class=nav-link><a href=https://github.com/Geotab/sdk-java-samples>Java Examples</a> <span class=beta>Beta</span></li><li class=nav-link><a href=https://github.com/Geotab/sdk-addin-samples>Add-in Examples</a></li></ul></li></ul><hr><h4>Hardware</h4><ul class="nav flex-column"><li class=nav-link><a href=/sdk/hardware/introduction/ >Hardware Introduction</a></li><li><h5>Add-on Protocols</h5><ul class="nav flex-column"><li class=nav-link><a href=/sdk/hardware/addon-protocols/rs232-usb/ >RS232 & USB</a></li><li class=nav-link><a href=/sdk/hardware/addon-protocols/can/ >CAN</a></li><li class=nav-link><a href=/sdk/hardware/addon-protocols/ble/ >BLE</a></li></ul></li><li><h5>Code Samples</h5><ul class="nav flex-column"><li class=nav-link><a href=/sdk/hardware/samples/python/ >Python</a></li><li class=nav-link><a href=https://github.com/Geotab/android-external-device-example>Android</a></li><li class=nav-link><a href=https://github.com/Geotab/IOX-raspberryPi-demo>Raspberry Pi</a></li></ul></li><li><h5>Developing an IOX</h5><ul class="nav flex-column"><li class=nav-link><a href=/sdk/hardware/developing-an-iox/hardware-design-guide/ >Hardware Design Guide</a></li><li class=nav-link><a href=/sdk/hardware/developing-an-iox/messaging-protocol/ >Messaging Protocol</a></li><li class="nav-link active"><a href=/sdk/hardware/developing-an-iox/mime-protocol/ >MIME Protocol</a></li></ul></li></ul><hr><h4>MyAdmin SDK</h4><ul class="nav flex-column"><li class=nav-link><a href=/sdk/myadmin-sdk/introduction/ >MyAdmin SDK Introduction</a></li><li class=nav-link><a href=/sdk/myadmin-sdk/new/ >What's New</a></li><li><h5>Guides</h5><ul class="nav flex-column"><li class=nav-link><a href=/sdk/myadmin-sdk/guides/getting-started/ >Getting Started</a></li><li class=nav-link><a href=/sdk/myadmin-sdk/guides/concepts/ >Concepts</a></li><li class=nav-link><a href=/sdk/myadmin-sdk/guides/using-with-dotnet/ >Using with .NET</a></li><li class=nav-link><a href=/sdk/myadmin-sdk/guides/using-with-javascript/ >Using with JavaScript</a></li><li class=nav-link><a href=/sdk/myadmin-sdk/guides/using-third-party-devices/ >Using Third-Party Devices with MyGeotab</a> <span class=legacy>Legacy</span></li></ul></li><li><h5>API</h5><ul class="nav flex-column"><li class=nav-link><a href=/sdk/myadmin-sdk/api/reference/ >Reference</a></li></ul></li><li><h5>Code Samples</h5><ul class="nav flex-column"><li class=nav-link><a href=/sdk/myadmin-sdk/code-samples/dotnet-examples/ >.NET Examples</a></li><li class=nav-link><a href=/sdk/myadmin-sdk/code-samples/javascript-examples/ >JavaScript Examples</a></li></ul></li></ul><hr><h4>Resources</h4><ul class="nav flex-column"><li class=nav-link><a href=https://community.geotab.com/s/ >Forums</a></li><li class=nav-link><a href=https://www.geotab.com/dev-channel/ >Dev Channel</a></li><li class=nav-link><a href=/sdk/resources/toolkits/ >Toolkits</a></li></ul><hr></nav></div><main role=main><div class=container-fluid><div class=row><article class=col-md-12><header><a href=https://github.com/Geotab/sdk/blob/master/src/hardware/developing-an-iox/mime.md class="float-right small"><svg class="octicon octicon-mark-github" viewBox="0 0 16 16" version=1.1 width=16 height=16 aria-hidden=true><path d="M8 0c4.42 0 8 3.58 8 8a8.013 8.013 0 0 1-5.45 7.59c-.4.08-.55-.17-.55-.38 0-.27.01-1.13.01-2.2 0-.75-.25-1.23-.54-1.48 1.78-.2 3.65-.88 3.65-3.95 0-.88-.31-1.59-.82-2.15.08-.2.36-1.02-.08-2.12 0 0-.67-.22-2.2.82-.64-.18-1.32-.27-2-.27-.68 0-1.36.09-2 .27-1.53-1.03-2.2-.82-2.2-.82-.44 1.1-.16 1.92-.08 2.12-.51.56-.82 1.28-.82 2.15 0 3.06 1.86 3.75 3.64 3.95-.23.2-.44.55-.51 1.07-.46.21-1.61.55-2.33-.66-.15-.24-.6-.83-1.23-.82-.67.01-.27.38.01.53.34.19.73.9.82 1.13.16.45.68 1.31 2.69.94 0 .67.01 1.3.01 1.49 0 .21-.15.45-.55.38A7.995 7.995 0 0 1 0 8c0-4.42 3.58-8 8-8Z"></path></svg> Edit on GitHub</a> <a href="https://community.geotab.com/s/topic/0TO2J000000gAUAWA2/developer-discussions?language=en_US&viewMore=1" class="float-right small mx-2"><svg class="octicon octicon-people" viewBox="0 0 16 16" version=1.1 width=16 height=16 aria-hidden=true><path d="M2 5.5a3.5 3.5 0 1 1 5.898 2.549 5.508 5.508 0 0 1 3.034 4.084.75.75 0 1 1-1.482.235 4 4 0 0 0-7.9 0 .75.75 0 0 1-1.482-.236A5.507 5.507 0 0 1 3.102 8.05 3.493 3.493 0 0 1 2 5.5ZM11 4a3.001 3.001 0 0 1 2.22 5.018 5.01 5.01 0 0 1 2.56 3.012.749.749 0 0 1-.885.954.752.752 0 0 1-.549-.514 3.507 3.507 0 0 0-2.522-2.372.75.75 0 0 1-.574-.73v-.352a.75.75 0 0 1 .416-.672A1.5 1.5 0 0 0 11 5.5.75.75 0 0 1 11 4Zm-5.5-.5a2 2 0 1 0-.001 3.999A2 2 0 0 0 5.5 3.5Z"></path></svg> Ask developers in the Community</a><h1>MIME Protocol</h1></header><div><h2 id=mime>MIME</h2><p>The MIME protocol can be used to exchange data between MyGeotab and an external device when the total message size exceeds the packet.</p><ul><li>When sending messages from MyGeotab to the external device: MyGeotab will break the larger message into smaller packets for transmission.</li><li>When sending messages from the external device to myGetoab: MyGeotab will reassemble the individual packets into the complete message.</li></ul><h2 id=prerequisites>Prerequisites</h2><ul><li>An external device must be connected, and its external device ID must be in the range of 4200-4299<ul><li>This connection is established using IOX-specific messaging, such as <a href=/sdk/hardware/developing-an-iox/messaging-protocol/#iox-single-frame-log-data-0x1d>message 0x1D</a> for custom IOX devices or <a href=/sdk/hardware/addon-protocols/rs232-usb/#msg-type-0x81-handshake-confirmation>message 0x81</a> for IOX-RS232/USB</li><li><a href=/sdk/hardware/addon-protocols/rs232-usb/#contact-solutions-engineering>Contact Solutions Engineering</a> with integration details if you require an external device ID for your integration</li></ul></li></ul><h3 id=protocol>Protocol</h3><p>The complete MIME message is broken into chunks and sent as binary data packets. The first byte within the message is a sequence counter. All the remaining bytes contain the MIME data.</p><h4 id=binary-data-packets>Binary data packets</h4><p>To accommodate external devices with memory constraints, the packet size is adjustable when sending messages to/from MyGeotab. The packets have a maximum size of 1000 bytes.</p><table><thead><tr><th>¬†</th><th>Bytes</th><th>Position</th></tr></thead><tbody><tr><td>Sequence number [1]</td><td>1</td><td>0</td></tr><tr><td>MIME data</td><td>x</td><td>1</td></tr></tbody></table><p>[1] A sequence number of 0 is only used for the first packet. The sequence number increments by 1 for each subsequent packet. If the sequence number reaches 255 (0xFF) and more packets need to be sent, the sequence number must reset to a value of 1 and continue counting.</p><h4 id=mime-data>MIME data</h4><table><thead><tr><th>¬†</th><th>Bytes</th><th>Position</th></tr></thead><tbody><tr><td>MIME type length = x</td><td>1</td><td>0</td></tr><tr><td>MIME type in ASCII</td><td>x</td><td>1</td></tr><tr><td>Payload Length = y</td><td>4</td><td>1 + x</td></tr><tr><td>Binary Payload</td><td>y</td><td>5 + x</td></tr></tbody></table><h4 id=acknowledge-message>Acknowledge message</h4><p>When transferring MIME data from the external device to MyGeotab, once the complete message is received MyGeotab will reply with an acknowledge message indicating the total number of payload bytes received.</p><table><thead><tr><th>¬†</th><th>Bytes</th><th>Position</th></tr></thead><tbody><tr><td>Sequence Number = 0</td><td>1</td><td>0</td></tr><tr><td>MIME type length = 3</td><td>1</td><td>1</td></tr><tr><td>MIME type in ASCII = ‚ÄòACK‚Äô</td><td>3</td><td>2</td></tr><tr><td>Payload Length</td><td>4</td><td>5</td></tr><tr><td>Total Number of Payload Bytes Received</td><td>x</td><td>9</td></tr></tbody></table><h3 id=example>Example</h3><p>This is an example of binary data packets for image data transferred using the MIME type ‚Äúimage/jpeg‚Äù. The image size is 83000 bytes. The packet size is 235.</p><h4 id=first-packet>First packet:</h4><table><thead><tr><th>¬†</th><th>Bytes</th><th>Position</th></tr></thead><tbody><tr><td>Sequence number = 0</td><td>1</td><td>0</td></tr><tr><td>MIME type length = 10</td><td>1</td><td>1</td></tr><tr><td>MIME type (‚Äúimage/jpeg‚Äù)</td><td>10</td><td>2</td></tr><tr><td>Payload Length = 83000</td><td>4</td><td>12</td></tr><tr><td>Binary Payload (the first 219 bytes)</td><td>219</td><td>16</td></tr></tbody></table><h4 id=second-packet>Second packet:</h4><table><thead><tr><th>¬†</th><th>Bytes</th><th>Position</th></tr></thead><tbody><tr><td>Sequence number = 1</td><td>1</td><td>0</td></tr><tr><td>Binary Payload (the next 234 bytes)</td><td>234</td><td>1</td></tr></tbody></table><h3 id=mygeotab-api>MyGeotab API</h3><p>To send/receive messages between MyGeotab and the external device, please download the source code of the <a href=/sdk/software/js-samples/#starter-kit>Starter Kit</a> sample, and replace the <a href=https://github.com/Geotab/sdk/blob/master/src/software/js-samples/starterKit.html>Sample API</a> with the following script. The alternative is to paste the script in the <a href=/sdk/software/api/runner.html>Runner</a>.</p><h4 id=mime-messages-from-mygeotab-to-the-external-device>MIME messages from MyGeotab to the external device:</h4><div class="language-javascript highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=nx>api</span><span class=p>.</span><span class=nf>call</span><span class=p>(</span><span class=dl>"</span><span class=s2>Add</span><span class=dl>"</span><span class=p>,</span> <span class=p>{</span>
    <span class=dl>"</span><span class=s2>typeName</span><span class=dl>"</span><span class=p>:</span> <span class=dl>"</span><span class=s2>TextMessage</span><span class=dl>"</span><span class=p>,</span>
    <span class=dl>"</span><span class=s2>entity</span><span class=dl>"</span><span class=p>:</span> <span class=p>{</span>
        <span class=dl>"</span><span class=s2>device</span><span class=dl>"</span><span class=p>:</span> <span class=p>{</span><span class=dl>"</span><span class=s2>id</span><span class=dl>"</span><span class=p>:</span><span class=nx>device</span><span class=p>.</span><span class=nx>id</span><span class=p>},</span> <span class=c1>// Replace with device ID that should receive the data</span>
        <span class=dl>"</span><span class=s2>messageContent</span><span class=dl>"</span><span class=p>:</span> <span class=p>{</span>
            <span class=dl>"</span><span class=s2>contentType</span><span class=dl>"</span><span class=p>:</span> <span class=dl>"</span><span class=s2>MimeContent</span><span class=dl>"</span><span class=p>,</span>
            <span class=dl>"</span><span class=s2>channelNumber</span><span class=dl>"</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
            <span class=dl>"</span><span class=s2>mimeType</span><span class=dl>"</span><span class=p>:</span> <span class=dl>"</span><span class=s2>text</span><span class=dl>"</span><span class=p>,</span> <span class=c1>// Can be changed to any free format text value</span>
            <span class=dl>"</span><span class=s2>binaryDataPacketDelay</span><span class=dl>"</span><span class=p>:</span> <span class=dl>"</span><span class=s2>00:00:03.0000000</span><span class=dl>"</span><span class=p>,</span> <span class=c1>// Applies a configurable delay of up to 5 seconds in between each sequenced message of a multimessage MIME payload</span>
            <span class=dl>"</span><span class=s2>data</span><span class=dl>"</span><span class=p>:</span> <span class=nx>base64_encoded_byte</span> <span class=c1>// Replace with your data encoded in base64</span>
        <span class=p>},</span>
    <span class=dl>"</span><span class=s2>isDirectionToVehicle</span><span class=dl>"</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
    <span class=dl>"</span><span class=s2>messageSize</span><span class=dl>"</span><span class=p>:</span> <span class=mi>235</span> <span class=c1>// If unspecified defaults to 235. Max of 1000.</span>
    <span class=p>},</span>
<span class=p>},</span> <span class=kd>function</span><span class=p>(</span><span class=nx>result</span><span class=p>)</span> <span class=p>{</span>
    <span class=nx>console</span><span class=p>.</span><span class=nf>log</span><span class=p>(</span><span class=dl>"</span><span class=s2>Done: </span><span class=dl>"</span><span class=p>,</span> <span class=nx>result</span><span class=p>);</span>
<span class=p>},</span> <span class=kd>function</span><span class=p>(</span><span class=nx>e</span><span class=p>)</span> <span class=p>{</span>
    <span class=nx>console</span><span class=p>.</span><span class=nf>error</span><span class=p>(</span><span class=dl>"</span><span class=s2>Failed:</span><span class=dl>"</span><span class=p>,</span> <span class=nx>e</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div></div><h4 id=retrieving-mime-data-from-mygeotab>Retrieving MIME data from MyGeotab:</h4><p>Once the data has been sent to the cloud, you can use the MyGeotab SDK to pull the message content out of the target database. For each MIME payload, the data is stored within a single TextMessage Object and can be retrieved using the Get method (search criteria can be added):</p><div class="language-javascript highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=nx>api</span><span class=p>.</span><span class=nf>call</span><span class=p>(</span><span class=dl>"</span><span class=s2>Get</span><span class=dl>"</span><span class=p>,</span> <span class=p>{</span>
    <span class=dl>"</span><span class=s2>typeName</span><span class=dl>"</span><span class=p>:</span><span class=dl>"</span><span class=s2>TextMessage</span><span class=dl>"</span><span class=p>,</span>
    <span class=dl>"</span><span class=s2>resultsLimit</span><span class=dl>"</span><span class=p>:</span><span class=mi>10</span>
<span class=p>});</span>
</code></pre></div></div><p>The payload is stored in MyGeotab in Base64 encoded format. Decoding this payload from Base64 to bytes should yield the expected content which was passed through. In the event that the database has multiple devices sending MIME data at different times, you may want to specify the originating device and/or filter by the time interval during which MIME data was sent:</p><div class="language-javascript highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=nx>api</span><span class=p>.</span><span class=nf>call</span><span class=p>(</span><span class=dl>"</span><span class=s2>Get</span><span class=dl>"</span><span class=p>,</span> <span class=p>{</span> <span class=c1>// First API call is to get the ID of a device given its serial number</span>
    <span class=dl>"</span><span class=s2>typeName</span><span class=dl>"</span><span class=p>:</span> <span class=dl>"</span><span class=s2>Device</span><span class=dl>"</span><span class=p>,</span>
    <span class=dl>"</span><span class=s2>search</span><span class=dl>"</span><span class=p>:</span> <span class=p>{</span>
        <span class=dl>"</span><span class=s2>serialNumber</span><span class=dl>"</span><span class=p>:</span> <span class=dl>"</span><span class=s2>G9##########</span><span class=dl>"</span> <span class=c1>// Replace with your GO device serial number</span>
    <span class=p>},</span>
    <span class=dl>"</span><span class=s2>resultsLimit</span><span class=dl>"</span><span class=p>:</span> <span class=mi>1</span>
<span class=p>},</span> <span class=kd>function</span><span class=p>(</span><span class=nx>deviceResult</span><span class=p>)</span> <span class=p>{</span>
    <span class=nx>console</span><span class=p>.</span><span class=nf>log</span><span class=p>(</span><span class=dl>"</span><span class=s2>Found device ID: </span><span class=dl>"</span><span class=p>,</span> <span class=nx>deviceResult</span><span class=p>[</span><span class=mi>0</span><span class=p>].</span><span class=nx>id</span><span class=p>);</span>
    <span class=nx>api</span><span class=p>.</span><span class=nf>call</span><span class=p>(</span><span class=dl>"</span><span class=s2>Get</span><span class=dl>"</span><span class=p>,</span> <span class=p>{</span> <span class=c1>// Second API call is to get all TextMessages sent to/from this device</span>
        <span class=dl>"</span><span class=s2>typeName</span><span class=dl>"</span><span class=p>:</span> <span class=dl>"</span><span class=s2>TextMessage</span><span class=dl>"</span><span class=p>,</span>
        <span class=dl>"</span><span class=s2>search</span><span class=dl>"</span><span class=p>:</span> <span class=p>{</span>
            <span class=dl>"</span><span class=s2>deviceSearch</span><span class=dl>"</span><span class=p>:</span> <span class=p>{</span><span class=dl>"</span><span class=s2>id</span><span class=dl>"</span><span class=p>:</span> <span class=nx>deviceResult</span><span class=p>[</span><span class=mi>0</span><span class=p>].</span><span class=nx>id</span> <span class=p>},</span> <span class=c1>// Optional: Return only TextMessages sent to/from this device</span>
            <span class=dl>"</span><span class=s2>modifiedSinceDate</span><span class=dl>"</span><span class=p>:</span> <span class=dl>"</span><span class=s2>2023-09-01T14:00:00.000Z</span><span class=dl>"</span><span class=p>,</span> <span class=c1>// Optional: Specify the minimum datetime for messages</span>
            <span class=dl>"</span><span class=s2>toDate</span><span class=dl>"</span><span class=p>:</span> <span class=dl>"</span><span class=s2>2023-09-20T18:30:00.000Z</span><span class=dl>"</span><span class=p>,</span> <span class=c1>// Optional: Specify the maximum datetime for messages</span>
            <span class=dl>"</span><span class=s2>contentTypes</span><span class=dl>"</span><span class=p>:</span> <span class=p>[</span><span class=dl>"</span><span class=s2>MimeContent</span><span class=dl>"</span><span class=p>],</span> <span class=c1>// Optional: Return only MimeContent</span>
            <span class=dl>"</span><span class=s2>isDirectionToVehicle</span><span class=dl>"</span><span class=p>:</span> <span class=kc>false</span> <span class=c1>// Optional: Return only messages sent from MyGeotab to IOX (true) or from IOX to MyGeotab (false)</span>
        <span class=p>},</span>
        <span class=dl>"</span><span class=s2>resultsLimit</span><span class=dl>"</span><span class=p>:</span> <span class=mi>100</span>
    <span class=p>},</span> <span class=kd>function</span><span class=p>(</span><span class=nx>textMessageResult</span><span class=p>)</span> <span class=p>{</span>
        <span class=nx>console</span><span class=p>.</span><span class=nf>log</span><span class=p>(</span><span class=dl>"</span><span class=s2>TextMessages: </span><span class=dl>"</span><span class=p>,</span> <span class=nx>textMessageResult</span><span class=p>);</span>
        <span class=k>if </span><span class=p>(</span><span class=nx>textMessageResult</span><span class=p>.</span><span class=nx>length</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
            <span class=nx>console</span><span class=p>.</span><span class=nf>log</span><span class=p>(</span><span class=dl>"</span><span class=s2>base64 data for first TextMessage: </span><span class=dl>"</span><span class=p>,</span> <span class=nx>textMessageResult</span><span class=p>[</span><span class=mi>0</span><span class=p>].</span><span class=nx>messageContent</span><span class=p>.</span><span class=nx>data</span><span class=p>);</span>
        <span class=p>}</span>
    <span class=p>},</span> <span class=kd>function</span><span class=p>(</span><span class=nx>textMessageError</span><span class=p>)</span> <span class=p>{</span>
        <span class=nx>console</span><span class=p>.</span><span class=nf>error</span><span class=p>(</span><span class=dl>"</span><span class=s2>TextMessage search failed: </span><span class=dl>"</span><span class=p>,</span> <span class=nx>textMessageError</span><span class=p>);</span>
    <span class=p>});</span>
<span class=p>},</span> <span class=kd>function</span><span class=p>(</span><span class=nx>deviceError</span><span class=p>)</span> <span class=p>{</span>
    <span class=nx>console</span><span class=p>.</span><span class=nf>error</span><span class=p>(</span><span class=dl>"</span><span class=s2>Device search failed:</span><span class=dl>"</span><span class=p>,</span> <span class=nx>deviceError</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div></div></div></article></div></div><footer class="footer mt-auto py-3"><a href=https://www.geotab.com/security/ target=_blank>Security</a> &nbsp;&nbsp;|&nbsp;&nbsp; <a href=https://docs.google.com/document/d/1sVygLN02w2xNovFY4q5vw-oAzfYxCd7WLhyToElgDbs/pub rel=noopener target=_blank>Privacy Policy</a> &nbsp;&nbsp;|&nbsp;&nbsp; <a href=/myadmin-sdk/introduction/ >MyAdmin SDK</a> &nbsp;&nbsp;|&nbsp;&nbsp; <a href=https://docs.google.com/document/d/1jA8Qc8WZMhmaqdjd8Ng8rY4iMI073xCfLNt_DSP72TQ/edit rel=noopener target=_blank>End User Agreement</a> &nbsp;&nbsp;|&nbsp;&nbsp; <a href="https://docs.google.com/document/d/1aFJnFYpHCN4bFe6yVhj5m5AiJClfucRhJWVSDBqRObg/edit?usp=sharing" rel=noopener target=_blank>API Terms of Service</a><div class="copyright-container copyright-white-text">Copyright &copy; 2017 Geotab</div></footer></main></div><script src=/sdk/assets/javascript/index.js></script></body></html>