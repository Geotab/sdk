<!DOCTYPE html><html lang=En><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><script src=https://cmp.osano.com/Azq8VcSSUm67lg5f/3c378e5d-3772-41f7-8106-94eeee3a3c15/osano.js></script><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-5V5GBX4');</script><title>Python Code Samples | Geotab Developers</title><meta name=generator content="Jekyll v4.2.2"><meta property=og:title content="Python Code Samples"><meta name=author content="The Geotab Team"><meta property=og:locale content=en_US><meta name=description content="This site provides tools for integrating with various types of Geotab products."><meta property=og:description content="This site provides tools for integrating with various types of Geotab products."><link rel=canonical href=https://geotab.github.io/sdk/hardware/samples/python/ ><meta property=og:url content=https://geotab.github.io/sdk/hardware/samples/python/ ><meta property=og:site_name content="Geotab Developers"><meta property=og:type content=website><meta name=twitter:card content=summary><meta property=twitter:title content="Python Code Samples"><script type=application/ld+json>{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"The Geotab Team"},"description":"This site provides tools for integrating with various types of Geotab products.","headline":"Python Code Samples","url":"https://geotab.github.io/sdk/hardware/samples/python/"}</script><link rel=stylesheet href=/sdk/assets/stylesheets/style-7593abd5bb.min.css><link rel=stylesheet href=/sdk/assets/stylesheets/style.css><link rel=apple-touch-icon-precomposed sizes=144x144 href=/sdk/assets/images/touch/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=/sdk/favicon.ico></head><body><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5V5GBX4" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><header><nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark" title=navigationBar><a class=navbar-brand href=/sdk/ ><img src=/sdk/assets/images/pillar.svg width=30 height=30 class="d-inline-block align-top" alt=""> Geotab Developers </a><button class="navbar-toggler d-lg-none" id=toggler type=button aria-label="navigation bar toggler"><span class=navbar-toggler-icon></span></button></nav></header><div id=wrapper><div id=sidebar-wrapper class=bg-light><nav id=sidebar class=sidebar><div class="flex-shrink-0 p-3" style="width: 280px;"><ul class="list-unstyled ps-0"><li class=mb-1><button class="btn btn-toggle d-inline-flex align-items-center rounded border-0 collapsed" data-bs-toggle=collapse data-bs-target=#home-collapse aria-expanded=false>Home</button><div class=collapse id=home-collapse style=""><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a href=# class="link-dark d-inline-flex text-decoration-none rounded">Overview</a></li><li><a href=# class="link-dark d-inline-flex text-decoration-none rounded">Updates</a></li><li><a href=# class="link-dark d-inline-flex text-decoration-none rounded">Reports</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle d-inline-flex align-items-center rounded border-0 collapsed" data-bs-toggle=collapse data-bs-target=#dashboard-collapse aria-expanded=false>Dashboard</button><div class=collapse id=dashboard-collapse style=""><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a href=# class="link-dark d-inline-flex text-decoration-none rounded">Overview</a></li><li><a href=# class="link-dark d-inline-flex text-decoration-none rounded">Weekly</a></li><li><a href=# class="link-dark d-inline-flex text-decoration-none rounded">Monthly</a></li><li><a href=# class="link-dark d-inline-flex text-decoration-none rounded">Annually</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle d-inline-flex align-items-center rounded border-0 collapsed" data-bs-toggle=collapse data-bs-target=#orders-collapse aria-expanded=false>Orders</button><div class=collapse id=orders-collapse style=""><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a href=# class="link-dark d-inline-flex text-decoration-none rounded">New</a></li><li><a href=# class="link-dark d-inline-flex text-decoration-none rounded">Processed</a></li><li><a href=# class="link-dark d-inline-flex text-decoration-none rounded">Shipped</a></li><li><a href=# class="link-dark d-inline-flex text-decoration-none rounded">Returned</a></li></ul></div></li><li class="border-top my-3"></li><li class=mb-1><button class="btn btn-toggle d-inline-flex align-items-center rounded border-0 collapsed" data-bs-toggle=collapse data-bs-target=#account-collapse aria-expanded=false>Account</button><div class=collapse id=account-collapse style=""><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a href=# class="link-dark d-inline-flex text-decoration-none rounded">New...</a></li><li><a href=# class="link-dark d-inline-flex text-decoration-none rounded">Profile</a></li><li><a href=# class="link-dark d-inline-flex text-decoration-none rounded">Settings</a></li><li><a href=# class="link-dark d-inline-flex text-decoration-none rounded">Sign out</a></li></ul></div></li></ul></div></nav></div><div id=sidebar-wrapper class=bg-light><nav id=sidebar class=sidebar><div class="flex-shrink-0 p-3" style="width: 280px;"><ul class="list-unstyled ps-0"><li class=mb-1><button class="btn btn-toggle d-inline-flex align-items-center rounded border-0 collapsed" data-bs-toggle=collapse data-bs-target=#home-collapse aria-expanded=false>MyGeotab SDK</button><div class=collapse id=home-collapse style=""><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li class=nav-link><a href=/sdk/software/introduction/ class="link-dark d-inline-flex text-decoration-none rounded">MyGeotab SDK Introduction</a></li><li class=nav-link><a href=/sdk/resources/new/ class="link-dark d-inline-flex text-decoration-none rounded">What's New</a></li><li><button class="btn btn-toggle d-inline-flex align-items-center rounded border-0 collapsed" data-bs-toggle=collapse data-bs-target=#home-collapse aria-expanded=false>Guides</button><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li class=nav-link><a href=/sdk/software/guides/getting-started/ class="link-dark d-inline-flex text-decoration-none rounded">Getting Started</a></li><li class=nav-link><a href=/sdk/software/guides/concepts/ class="link-dark d-inline-flex text-decoration-none rounded">Concepts</a></li><li class=nav-link><a href=/sdk/software/guides/using-in-javascript/ class="link-dark d-inline-flex text-decoration-none rounded">Using in Javascript</a></li><li class=nav-link><a href=/sdk/software/guides/using-in-dotnet/ class="link-dark d-inline-flex text-decoration-none rounded">Using in .Net</a></li><li class=nav-link><a href=/sdk/software/guides/using-in-java/ class="link-dark d-inline-flex text-decoration-none rounded">Using in Java</a> <span class=beta>Beta</span></li><li class=nav-link><a href=/sdk/software/guides/data-feed/ class="link-dark d-inline-flex text-decoration-none rounded">Data Feed</a></li><li class=nav-link><a href=/sdk/software/guides/mygeotab-urls/ class="link-dark d-inline-flex text-decoration-none rounded">Using MyGeotab URLs</a></li><li class=nav-link><a href=/sdk/software/guides/using-go-devices/ class="link-dark d-inline-flex text-decoration-none rounded">Using GO Devices</a></li><li class=nav-link><a href=/sdk/software/guides/go-device-logging/ class="link-dark d-inline-flex text-decoration-none rounded">GO Device Logging</a></li><li class=nav-link><a href=/sdk/software/guides/custom-telematics-devices/ class="link-dark d-inline-flex text-decoration-none rounded">Using Custom Telematics Devices</a></li><li class=nav-link><a href=/sdk/software/guides/developing-addins/ class="link-dark d-inline-flex text-decoration-none rounded">Developing Add-Ins</a></li><li class=nav-link><a href=/sdk/software/guides/addin-storage/ class="link-dark d-inline-flex text-decoration-none rounded">Using Add-Ins for data storage</a></li><li class=nav-link><a href=/sdk/software/guides/drive-addins/ class="link-dark d-inline-flex text-decoration-none rounded">Geotab Drive Add-Ins</a></li><li class=nav-link><a href=/sdk/software/guides/map-add-ins-docs/ class="link-dark d-inline-flex text-decoration-none rounded">Map Add-ins</a></li><li class=nav-link><a href=https://github.com/Geotab/mg-media-files class="link-dark d-inline-flex text-decoration-none rounded">Media Files</a> <span class=beta>Beta</span></li><li class=nav-link><a href=/sdk/software/guides/power-bi/ class="link-dark d-inline-flex text-decoration-none rounded">Connect to Power BI</a></li></ul></li><li><button class="btn btn-toggle d-inline-flex align-items-center rounded border-0 collapsed" data-bs-toggle=collapse data-bs-target=#home-collapse aria-expanded=false>API</button><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li class=nav-link><a href=/sdk/software/api/reference/ class="link-dark d-inline-flex text-decoration-none rounded">Reference</a></li><li class=nav-link><a href=/sdk/software/api/runner.html class="link-dark d-inline-flex text-decoration-none rounded">Runner</a></li><li class=nav-link><a href=/sdk/software/api/clients/ class="link-dark d-inline-flex text-decoration-none rounded">API Clients</a></li></ul></li><li><button class="btn btn-toggle d-inline-flex align-items-center rounded border-0 collapsed" data-bs-toggle=collapse data-bs-target=#home-collapse aria-expanded=false>Code Samples</button><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li class=nav-link><a href=/sdk/software/js-samples/ class="link-dark d-inline-flex text-decoration-none rounded">Javascript Examples</a></li><li class=nav-link><a href=/sdk/software/dotnet-samples/ class="link-dark d-inline-flex text-decoration-none rounded">.Net Examples</a></li><li class=nav-link><a href=https://github.com/Geotab/sdk-java-samples class="link-dark d-inline-flex text-decoration-none rounded">Java Examples</a> <span class=beta>Beta</span></li><li class=nav-link><a href=https://github.com/Geotab/sdk-addin-samples class="link-dark d-inline-flex text-decoration-none rounded">Add-in Examples</a></li></ul></li></ul></div></li></ul><ul class="list-unstyled ps-0"><li class=mb-1><button class="btn btn-toggle d-inline-flex align-items-center rounded border-0 collapsed" data-bs-toggle=collapse data-bs-target=#home-collapse aria-expanded=false>Hardware</button><div class=collapse id=home-collapse style=""><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li class=nav-link><a href=/sdk/hardware/introduction/ class="link-dark d-inline-flex text-decoration-none rounded">Hardware Introduction</a></li><li><button class="btn btn-toggle d-inline-flex align-items-center rounded border-0 collapsed" data-bs-toggle=collapse data-bs-target=#home-collapse aria-expanded=false>Add-on Protocols</button><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li class=nav-link><a href=/sdk/hardware/addon-protocols/rs232-usb/ class="link-dark d-inline-flex text-decoration-none rounded">RS232 & USB</a></li><li class=nav-link><a href=/sdk/hardware/addon-protocols/can/ class="link-dark d-inline-flex text-decoration-none rounded">CAN</a></li><li class=nav-link><a href=/sdk/hardware/addon-protocols/ble/ class="link-dark d-inline-flex text-decoration-none rounded">BLE</a></li></ul></li><li><button class="btn btn-toggle d-inline-flex align-items-center rounded border-0 collapsed" data-bs-toggle=collapse data-bs-target=#home-collapse aria-expanded=false>Code Samples</button><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li class="nav-link active"><a href=/sdk/hardware/samples/python/ class="link-dark d-inline-flex text-decoration-none rounded">Python</a></li><li class=nav-link><a href=https://github.com/Geotab/android-external-device-example class="link-dark d-inline-flex text-decoration-none rounded">Android</a></li></ul></li><li><button class="btn btn-toggle d-inline-flex align-items-center rounded border-0 collapsed" data-bs-toggle=collapse data-bs-target=#home-collapse aria-expanded=false>Developing an IOX</button><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li class=nav-link><a href=/sdk/hardware/developing-an-iox/hardware-design-guide/ class="link-dark d-inline-flex text-decoration-none rounded">Hardware Design Guide</a></li><li class=nav-link><a href=/sdk/hardware/developing-an-iox/messaging-protocol/ class="link-dark d-inline-flex text-decoration-none rounded">Messaging Protocol</a></li></ul></li></ul></div></li></ul><ul class="list-unstyled ps-0"><li class=mb-1><button class="btn btn-toggle d-inline-flex align-items-center rounded border-0 collapsed" data-bs-toggle=collapse data-bs-target=#home-collapse aria-expanded=false>MyAdmin SDK</button><div class=collapse id=home-collapse style=""><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li class=nav-link><a href=/sdk/myadmin-sdk/introduction/ class="link-dark d-inline-flex text-decoration-none rounded">MyAdmin SDK Introduction</a></li><li class=nav-link><a href=/sdk/myadmin-sdk/new/ class="link-dark d-inline-flex text-decoration-none rounded">What's New</a></li><li><button class="btn btn-toggle d-inline-flex align-items-center rounded border-0 collapsed" data-bs-toggle=collapse data-bs-target=#home-collapse aria-expanded=false>Guides</button><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li class=nav-link><a href=/sdk/myadmin-sdk/guides/getting-started/ class="link-dark d-inline-flex text-decoration-none rounded">Getting Started</a></li><li class=nav-link><a href=/sdk/myadmin-sdk/guides/concepts/ class="link-dark d-inline-flex text-decoration-none rounded">Concepts</a></li><li class=nav-link><a href=/sdk/myadmin-sdk/guides/using-with-dotnet/ class="link-dark d-inline-flex text-decoration-none rounded">Using with .NET</a></li><li class=nav-link><a href=/sdk/myadmin-sdk/guides/using-with-javascript/ class="link-dark d-inline-flex text-decoration-none rounded">Using with JavaScript</a></li><li class=nav-link><a href=/sdk/myadmin-sdk/guides/using-third-party-devices/ class="link-dark d-inline-flex text-decoration-none rounded">Using Third-Party Devices with MyGeotab</a></li></ul></li><li><button class="btn btn-toggle d-inline-flex align-items-center rounded border-0 collapsed" data-bs-toggle=collapse data-bs-target=#home-collapse aria-expanded=false>API</button><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li class=nav-link><a href=/sdk/myadmin-sdk/api/reference/ class="link-dark d-inline-flex text-decoration-none rounded">Reference</a></li></ul></li><li><button class="btn btn-toggle d-inline-flex align-items-center rounded border-0 collapsed" data-bs-toggle=collapse data-bs-target=#home-collapse aria-expanded=false>Code Samples</button><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li class=nav-link><a href=/sdk/myadmin-sdk/code-samples/dotnet-examples/ class="link-dark d-inline-flex text-decoration-none rounded">.NET Examples</a></li><li class=nav-link><a href=/sdk/myadmin-sdk/code-samples/javascript-examples/ class="link-dark d-inline-flex text-decoration-none rounded">JavaScript Examples</a></li></ul></li></ul></div></li></ul><ul class="list-unstyled ps-0"><li class=mb-1><button class="btn btn-toggle d-inline-flex align-items-center rounded border-0 collapsed" data-bs-toggle=collapse data-bs-target=#home-collapse aria-expanded=false>Resources</button><div class=collapse id=home-collapse style=""><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li class=nav-link><a href=https://community.geotab.com/s/ class="link-dark d-inline-flex text-decoration-none rounded">Forums</a></li><li class=nav-link><a href=https://www.geotab.com/dev-channel/ class="link-dark d-inline-flex text-decoration-none rounded">Dev Channel</a></li><li class=nav-link><a href=/sdk/resources/toolkits/ class="link-dark d-inline-flex text-decoration-none rounded">Toolkits</a></li></ul></div></li></ul></div></nav></div><main role=main><div class=container-fluid><div class=row><article class=col-md-12><header><a href=https://github.com/Geotab/sdk/blob/master/src/hardware/samples/python.md class="float-right small"><svg class="octicon octicon-mark-github" viewBox="0 0 16 16" version=1.1 width=16 height=16 aria-hidden=true><path fill-rule=evenodd d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg> Edit on GitHub</a> <a href="https://community.geotab.com/s/topic/0TO2J000000gAUAWA2/developer-discussions?language=en_US&viewMore=1" class="float-right small mx-2"><svg class="octicon octicon-people" viewBox="0 0 16 16" version=1.1 width=16 height=16 aria-hidden=true><path fill-rule=evenodd d="M5.5 3.5a2 2 0 100 4 2 2 0 000-4zM2 5.5a3.5 3.5 0 115.898 2.549 5.507 5.507 0 013.034 4.084.75.75 0 11-1.482.235 4.001 4.001 0 00-7.9 0 .75.75 0 01-1.482-.236A5.507 5.507 0 013.102 8.05 3.49 3.49 0 012 5.5zM11 4a.75.75 0 100 1.5 1.5 1.5 0 01.666 2.844.75.75 0 00-.416.672v.352a.75.75 0 00.574.73c1.2.289 2.162 1.2 2.522 2.372a.75.75 0 101.434-.44 5.01 5.01 0 00-2.56-3.012A3 3 0 0011 4z"></path></svg> Ask developers in the Community</a><h1>Python Code Samples</h1></header><div><p>All Python sample code was tested using Python 3.5.2 (64-bit) running under Windows 10. You will need to install pySerial to test these samples.</p><p><code class="language-plaintext highlighter-rouge">pip install pyserial</code></p><h2 id=spoof-an-external-device>Spoof an External Device</h2><p>Run this python script while connected to a GO device via an IOX-RS232</p><div class="language-py highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=kn>import</span> <span class=nn>serial</span>
<span class=kn>import</span> <span class=nn>time</span>

<span class=k>def</span> <span class=nf>checksum</span><span class=p>(</span><span class=n>message</span><span class=p>):</span>
 <span class=n>b0</span> <span class=o>=</span> <span class=mi>0</span>
 <span class=n>b1</span> <span class=o>=</span> <span class=mi>0</span>

 <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=nb>len</span><span class=p>(</span><span class=n>message</span><span class=p>)):</span>
  <span class=n>b0</span> <span class=o>+=</span> <span class=nb>int</span><span class=p>(</span><span class=n>message</span><span class=p>[</span><span class=n>i</span><span class=p>])</span>
  <span class=n>b1</span> <span class=o>+=</span> <span class=n>b0</span>
 <span class=k>return</span> <span class=nb>bytes</span><span class=p>([</span><span class=n>b0</span><span class=o>%</span><span class=mi>256</span><span class=p>,</span> <span class=n>b1</span><span class=o>%</span><span class=mi>256</span><span class=p>])</span>

<span class=k>def</span> <span class=nf>createMessage</span><span class=p>(</span><span class=n>message</span><span class=p>):</span>
 <span class=n>message</span> <span class=o>=</span> <span class=nb>bytes</span><span class=p>([</span><span class=mh>0x02</span><span class=p>])</span> <span class=o>+</span> <span class=n>message</span>
 <span class=n>check</span> <span class=o>=</span> <span class=n>checksum</span><span class=p>(</span><span class=n>message</span><span class=p>)</span>
 <span class=n>message</span> <span class=o>=</span> <span class=n>message</span> <span class=o>+</span> <span class=n>check</span> <span class=o>+</span> <span class=nb>bytes</span><span class=p>([</span><span class=mh>0x03</span><span class=p>])</span>
 <span class=k>return</span> <span class=n>message</span>

<span class=c1># look for ttyUSB in Linux (ls /dev/tty\*)
# with serial.Serial(port="/dev/ttyUSB0", baudrate = 9600, timeout=1) as tester:
# Use COMx in windows
# with serial.Serial(port="COM4", baudrate = 9600, timeout = 10) as tester:
</span>
<span class=c1># send sync char
</span> <span class=k>print</span><span class=p>(</span><span class=s>"sending sync char"</span><span class=p>)</span>
 <span class=k>print</span><span class=p>(</span><span class=s>"['0x55']"</span><span class=p>)</span>
 <span class=n>tester</span><span class=p>.</span><span class=n>write</span><span class=p>(</span><span class=nb>bytes</span><span class=p>([</span><span class=mh>0x55</span><span class=p>]))</span>
 <span class=k>print</span><span class=p>(</span><span class=s>"waiting for handshake request..."</span><span class=p>)</span>
 <span class=n>readback</span> <span class=o>=</span> <span class=n>tester</span><span class=p>.</span><span class=n>read</span><span class=p>(</span><span class=mi>6</span><span class=p>)</span>

 <span class=k>print</span><span class=p>([</span><span class=nb>hex</span><span class=p>(</span><span class=n>b</span><span class=p>)</span> <span class=k>for</span> <span class=n>b</span> <span class=ow>in</span> <span class=n>readback</span><span class=p>])</span>

 <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>readback</span><span class=p>)</span> <span class=o>==</span> <span class=mi>6</span> <span class=ow>and</span> <span class=n>readback</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>==</span> <span class=mi>1</span><span class=p>:</span>
  <span class=k>print</span><span class=p>(</span><span class=s>"handshake request received"</span><span class=p>)</span>
  <span class=c1>#send the handshake response
</span>  <span class=n>deviceID</span> <span class=o>=</span> <span class=mi>4208</span> <span class=c1>#4208 is a test Device ID
</span>  <span class=n>handshakeResponse</span> <span class=o>=</span> <span class=n>createMessage</span><span class=p>(</span><span class=nb>bytes</span><span class=p>([</span><span class=mh>0x81</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=n>deviceID</span><span class=o>%</span><span class=mi>256</span><span class=p>,</span> <span class=p>(</span><span class=n>deviceID</span> <span class=o>&gt;&gt;</span> <span class=mi>8</span><span class=p>)</span><span class=o>%</span><span class=mi>256</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>]))</span>
  <span class=k>print</span><span class=p>(</span><span class=s>"sending handshake response"</span><span class=p>)</span>
  <span class=k>print</span><span class=p>([</span><span class=nb>hex</span><span class=p>(</span><span class=n>b</span><span class=p>)</span> <span class=k>for</span> <span class=n>b</span> <span class=ow>in</span> <span class=n>handshakeResponse</span><span class=p>])</span>
  <span class=n>tester</span><span class=p>.</span><span class=n>write</span><span class=p>(</span><span class=n>handshakeResponse</span><span class=p>)</span>
  <span class=n>time</span><span class=p>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
  <span class=c1># send some status data
</span>  <span class=n>statusDataID</span> <span class=o>=</span> <span class=mi>35349</span> <span class=c1>#status data id of "Test engine measurement / fake data"
</span>  <span class=n>dataValue</span> <span class=o>=</span> <span class=mi>200</span> <span class=c1>#data value of 10 will show on MyGeotab (because of the conversion factor of 0.1 and offset of -10)
</span>
  <span class=n>dataMessage</span> <span class=o>=</span> <span class=n>createMessage</span><span class=p>(</span><span class=nb>bytes</span><span class=p>([</span><span class=mh>0x80</span><span class=p>,</span> <span class=mi>6</span><span class=p>,</span> <span class=n>statusDataID</span><span class=o>%</span><span class=mi>256</span><span class=p>,</span> <span class=p>(</span><span class=n>statusDataID</span> <span class=o>&gt;&gt;</span> <span class=mi>8</span><span class=p>)</span><span class=o>%</span><span class=mi>256</span><span class=p>,</span> <span class=n>dataValue</span><span class=o>%</span><span class=mi>256</span><span class=p>,</span> <span class=p>(</span><span class=n>dataValue</span> <span class=o>&gt;&gt;</span> <span class=mi>8</span><span class=p>)</span><span class=o>%</span><span class=mi>256</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>]))</span>

  <span class=k>print</span><span class=p>(</span><span class=s>"sending status data"</span><span class=p>)</span>
  <span class=k>print</span><span class=p>([</span><span class=nb>hex</span><span class=p>(</span><span class=n>b</span><span class=p>)</span> <span class=k>for</span> <span class=n>b</span> <span class=ow>in</span> <span class=n>dataMessage</span><span class=p>])</span>
  <span class=n>tester</span><span class=p>.</span><span class=n>write</span><span class=p>(</span><span class=n>dataMessage</span><span class=p>)</span>
  <span class=k>print</span><span class=p>(</span><span class=s>"waiting for data ACK..."</span><span class=p>)</span>
  <span class=n>readback</span> <span class=o>=</span> <span class=n>tester</span><span class=p>.</span><span class=n>read</span><span class=p>(</span><span class=mi>6</span><span class=p>)</span>

  <span class=k>print</span><span class=p>([</span><span class=nb>hex</span><span class=p>(</span><span class=n>b</span><span class=p>)</span> <span class=k>for</span> <span class=n>b</span> <span class=ow>in</span> <span class=n>readback</span><span class=p>])</span>

  <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>readback</span><span class=p>)</span> <span class=o>==</span> <span class=mi>6</span> <span class=ow>and</span> <span class=n>readback</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>==</span> <span class=mi>2</span><span class=p>:</span>
   <span class=k>print</span><span class=p>(</span><span class=s>"data ACK received"</span><span class=p>)</span>
 <span class=n>Else</span><span class=p>:</span>
  <span class=k>print</span><span class=p>(</span><span class=s>"invalid response"</span><span class=p>)</span>
</code></pre></div></div><p>If the script executes successfully against an awake (ideally with Ignition On) GO device, the output should resemble:</p><div class="language-py highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=c1># sending sync char
</span><span class=p>[</span><span class=s>'0x55'</span><span class=p>]</span>

<span class=c1># waiting for handshake request…
</span><span class=p>[</span><span class=s>'0x2'</span><span class=p>,</span> <span class=s>'0x1'</span><span class=p>,</span> <span class=s>'0x0'</span><span class=p>,</span> <span class=s>'0x3'</span><span class=p>,</span> <span class=s>'0x8'</span><span class=p>,</span> <span class=s>'0x3'</span><span class=p>]</span>

<span class=c1># handshake request received
# sending handshake response
</span><span class=p>[</span><span class=s>'0x2'</span><span class=p>,</span> <span class=s>'0x81'</span><span class=p>,</span> <span class=s>'0x4'</span><span class=p>,</span> <span class=s>'0x70'</span><span class=p>,</span> <span class=s>'0x10'</span><span class=p>,</span> <span class=s>'0x0'</span><span class=p>,</span> <span class=s>'0x0'</span><span class=p>,</span> <span class=s>'0x07'</span><span class=p>,</span> <span class=s>'0x18'</span><span class=p>,</span> <span class=s>'0x3'</span><span class=p>]</span>

<span class=c1># sending status data
</span><span class=p>[</span><span class=s>'0x2'</span><span class=p>,</span> <span class=s>'0x80'</span><span class=p>,</span> <span class=s>'0x6'</span><span class=p>,</span> <span class=s>'0x15'</span><span class=p>,</span> <span class=s>'0x8a'</span><span class=p>,</span> <span class=s>'0xc8'</span><span class=p>,</span> <span class=s>'0x0'</span><span class=p>,</span> <span class=s>'0x0'</span><span class=p>,</span> <span class=s>'0x0'</span><span class=p>,</span> <span class=s>'0xef'</span><span class=p>,</span> <span class=s>'0x8c'</span><span class=p>,</span> <span class=s>'0x3'</span><span class=p>]</span>

<span class=c1># waiting for data ACK…
</span><span class=p>[</span><span class=s>'0x2'</span><span class=p>,</span> <span class=s>'0x2'</span><span class=p>,</span> <span class=s>'0x0'</span><span class=p>,</span> <span class=s>'0x4'</span><span class=p>,</span> <span class=s>'0xa'</span><span class=p>,</span> <span class=s>'0x3'</span><span class=p>]</span>

<span class=c1># data ACK received
</span></code></pre></div></div><h2 id=spoof-a-go-device>Spoof a GO device</h2><p>Run this Python script to emulate a GO device while your external device is connected via the RS232 port:</p><div class="language-py highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=kn>import</span> <span class=nn>serial</span>
<span class=kn>import</span> <span class=nn>time</span>

<span class=k>def</span> <span class=nf>checksum</span><span class=p>(</span><span class=n>message</span><span class=p>):</span>
 <span class=n>b0</span> <span class=o>=</span> <span class=mi>0</span>
 <span class=n>b1</span> <span class=o>=</span> <span class=mi>0</span>
 <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=nb>len</span><span class=p>(</span><span class=n>message</span><span class=p>)):</span>
  <span class=n>b0</span> <span class=o>+=</span> <span class=nb>int</span><span class=p>(</span><span class=n>message</span><span class=p>[</span><span class=n>i</span><span class=p>])</span>
  <span class=n>b1</span> <span class=o>+=</span> <span class=n>b0</span>
 <span class=k>return</span> <span class=nb>bytes</span><span class=p>([</span><span class=n>b0</span><span class=o>%</span><span class=mi>256</span><span class=p>,</span> <span class=n>b1</span><span class=o>%</span><span class=mi>256</span><span class=p>])</span>

<span class=k>def</span> <span class=nf>createMessage</span><span class=p>(</span><span class=n>message</span><span class=p>):</span>
 <span class=n>message</span> <span class=o>=</span> <span class=nb>bytes</span><span class=p>([</span><span class=mh>0x02</span><span class=p>])</span> <span class=o>+</span> <span class=n>message</span>
 <span class=n>check</span> <span class=o>=</span> <span class=n>checksum</span><span class=p>(</span><span class=n>message</span><span class=p>)</span>
 <span class=n>message</span> <span class=o>=</span> <span class=n>message</span> <span class=o>+</span> <span class=n>check</span> <span class=o>+</span> <span class=nb>bytes</span><span class=p>([</span><span class=mh>0x03</span><span class=p>])</span>
 <span class=k>return</span> <span class=n>message</span>

<span class=c1># look for ttyUSB in Linux (ls /dev/tty\*)
# with serial.Serial(port="/dev/ttyUSB1", baudrate = 9600, timeout = 60) as tester:
# Use COMx in windows
# with serial.Serial(port="COM7", baudrate = 9600, timeout = 60) as tester:
</span>
 <span class=c1># read sync char
</span> <span class=k>print</span><span class=p>(</span><span class=s>"waiting for sync char..."</span><span class=p>)</span>
 <span class=n>readback</span> <span class=o>=</span> <span class=n>tester</span><span class=p>.</span><span class=n>read</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>

 <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>readback</span><span class=p>)</span> <span class=ow>and</span> <span class=n>readback</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>==</span> <span class=mh>0x55</span><span class=p>:</span>
  <span class=k>print</span><span class=p>(</span><span class=s>"sync char received"</span><span class=p>)</span>
  <span class=k>print</span><span class=p>([</span><span class=nb>hex</span><span class=p>(</span><span class=n>b</span><span class=p>)</span> <span class=k>for</span> <span class=n>b</span> <span class=ow>in</span> <span class=n>readback</span><span class=p>])</span>

  <span class=n>handshakeRequest</span> <span class=o>=</span> <span class=n>createMessage</span><span class=p>(</span><span class=nb>bytes</span><span class=p>([</span><span class=mh>0x1</span><span class=p>,</span> <span class=mi>0</span><span class=p>]))</span>
  <span class=k>print</span><span class=p>(</span><span class=s>"sending handshake request"</span><span class=p>)</span>
  <span class=k>print</span><span class=p>([</span><span class=nb>hex</span><span class=p>(</span><span class=n>b</span><span class=p>)</span> <span class=k>for</span> <span class=n>b</span> <span class=ow>in</span> <span class=n>handshakeRequest</span><span class=p>])</span>
  <span class=n>tester</span><span class=p>.</span><span class=n>write</span><span class=p>(</span><span class=n>handshakeRequest</span><span class=p>)</span>

  <span class=k>print</span><span class=p>(</span><span class=s>"waiting for handshake response..."</span><span class=p>)</span>
  <span class=n>readback</span> <span class=o>=</span> <span class=n>tester</span><span class=p>.</span><span class=n>read</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span>
  <span class=k>print</span><span class=p>([</span><span class=nb>hex</span><span class=p>(</span><span class=n>b</span><span class=p>)</span> <span class=k>for</span> <span class=n>b</span> <span class=ow>in</span> <span class=n>readback</span><span class=p>])</span>

  <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>readback</span><span class=p>)</span> <span class=o>==</span> <span class=mi>10</span> <span class=ow>and</span> <span class=n>readback</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>==</span> <span class=mh>0x81</span><span class=p>:</span>
   <span class=k>print</span><span class=p>(</span><span class=s>"handshake response received"</span><span class=p>)</span>

   <span class=k>while</span><span class=p>(</span><span class=mi>1</span><span class=p>):</span>
    <span class=k>print</span><span class=p>(</span><span class=s>"waiting for status data..."</span><span class=p>)</span>
    <span class=n>readback</span> <span class=o>=</span> <span class=n>tester</span><span class=p>.</span><span class=n>read</span><span class=p>(</span><span class=mi>12</span><span class=p>)</span>
    <span class=k>print</span><span class=p>([</span><span class=nb>hex</span><span class=p>(</span><span class=n>b</span><span class=p>)</span> <span class=k>for</span> <span class=n>b</span> <span class=ow>in</span> <span class=n>readback</span><span class=p>])</span>

    <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>readback</span><span class=p>)</span> <span class=o>==</span> <span class=mi>12</span> <span class=ow>and</span> <span class=n>readback</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>==</span> <span class=mh>0x80</span><span class=p>:</span>
     <span class=k>print</span><span class=p>(</span><span class=s>"status data received"</span><span class=p>)</span>
     <span class=n>statusDataID</span> <span class=o>=</span> <span class=n>readback</span><span class=p>[</span><span class=mi>3</span><span class=p>]</span> <span class=o>+</span> <span class=p>(</span><span class=n>readback</span><span class=p>[</span><span class=mi>4</span><span class=p>]</span> <span class=o>&lt;&lt;</span> <span class=mi>8</span><span class=p>)</span>
     <span class=n>dataValue</span> <span class=o>=</span> <span class=n>readback</span><span class=p>[</span><span class=mi>5</span><span class=p>]</span> <span class=o>+</span> <span class=p>(</span><span class=n>readback</span><span class=p>[</span><span class=mi>6</span><span class=p>]</span> <span class=o>&lt;&lt;</span> <span class=mi>8</span><span class=p>)</span>

     <span class=k>print</span><span class=p>(</span><span class=s>"status data id: "</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>statusDataID</span><span class=p>)</span> <span class=o>+</span> <span class=s>", value: "</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>dataValue</span><span class=p>))</span>
     <span class=n>ackMessage</span> <span class=o>=</span> <span class=n>createMessage</span><span class=p>(</span><span class=nb>bytes</span><span class=p>([</span><span class=mh>0x2</span><span class=p>,</span> <span class=mh>0x0</span><span class=p>]))</span>
     <span class=k>print</span><span class=p>(</span><span class=s>"sending ack"</span><span class=p>)</span>
     <span class=k>print</span><span class=p>([</span><span class=nb>hex</span><span class=p>(</span><span class=n>b</span><span class=p>)</span> <span class=k>for</span> <span class=n>b</span> <span class=ow>in</span> <span class=n>ackMessage</span><span class=p>])</span>
     <span class=n>tester</span><span class=p>.</span><span class=n>write</span><span class=p>(</span><span class=n>ackMessage</span><span class=p>)</span>
     <span class=k>break</span>
</code></pre></div></div></div></article></div></div><footer class="footer mt-auto py-3"><a href=https://www.geotab.com/security/ target=_blank>Security</a> &nbsp;&nbsp;|&nbsp;&nbsp; <a href=https://docs.google.com/document/d/1sVygLN02w2xNovFY4q5vw-oAzfYxCd7WLhyToElgDbs/pub rel=noopener target=_blank>Privacy Policy</a> &nbsp;&nbsp;|&nbsp;&nbsp; <a href=/myadmin-sdk/introduction/ >MyAdmin SDK</a> &nbsp;&nbsp;|&nbsp;&nbsp; <a href=https://docs.google.com/document/d/1jA8Qc8WZMhmaqdjd8Ng8rY4iMI073xCfLNt_DSP72TQ/edit rel=noopener target=_blank>End User Agreement</a><div class="copyright-container copyright-white-text">Copyright &copy; 2017 Geotab</div></footer></main></div><script src=/sdk/assets/javascript/index.js></script></body></html>