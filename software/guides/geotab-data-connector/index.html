<!DOCTYPE html><html lang=En><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><script src=https://cmp.osano.com/Azq8VcSSUm67lg5f/3c378e5d-3772-41f7-8106-94eeee3a3c15/osano.js></script><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-5V5GBX4');</script><title>Using the Geotab Data Connector | Geotab Developers</title><meta name=generator content="Jekyll v4.2.2"><meta property=og:title content="Using the Geotab Data Connector"><meta name=author content="The Geotab Team"><meta property=og:locale content=en_US><meta name=description content="This site provides tools for integrating with various types of Geotab products."><meta property=og:description content="This site provides tools for integrating with various types of Geotab products."><link rel=canonical href=https://geotab.github.io/sdk/software/guides/geotab-data-connector/ ><meta property=og:url content=https://geotab.github.io/sdk/software/guides/geotab-data-connector/ ><meta property=og:site_name content="Geotab Developers"><meta property=og:type content=website><meta name=twitter:card content=summary><meta property=twitter:title content="Using the Geotab Data Connector"><script type=application/ld+json>{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"The Geotab Team"},"description":"This site provides tools for integrating with various types of Geotab products.","headline":"Using the Geotab Data Connector","url":"https://geotab.github.io/sdk/software/guides/geotab-data-connector/"}</script><link rel=stylesheet href=/sdk/assets/stylesheets/style-7593abd5bb.min.css><link rel=stylesheet href=/sdk/assets/stylesheets/style.css><link rel=apple-touch-icon-precomposed sizes=144x144 href=/sdk/assets/images/touch/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=/sdk/favicon.ico></head><body><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5V5GBX4" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><header><nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark" title=navigationBar><a class=navbar-brand href=/sdk/ ><img src=/sdk/assets/images/pillar.svg width=30 height=30 class="d-inline-block align-top" alt=""> Geotab Developers </a><button class="navbar-toggler d-lg-none" id=toggler type=button aria-label="navigation bar toggler"><span class=navbar-toggler-icon></span></button></nav></header><div id=wrapper><div id=sidebar-wrapper class=bg-light><nav id=sidebar class=sidebar><h4>MyGeotab SDK</h4><ul class="nav flex-column"><li class=nav-link><a href=/sdk/software/introduction/ >MyGeotab SDK Introduction</a></li><li class=nav-link><a href=/sdk/resources/new/ >What's New</a></li><li><h5>Guides</h5><ul class="nav flex-column"><li class=nav-link><a href=/sdk/software/guides/getting-started/ >Getting Started</a></li><li class=nav-link><a href=/sdk/software/guides/concepts/ >Concepts</a></li><li class=nav-link><a href=/sdk/software/guides/using-in-javascript/ >Using in Javascript</a></li><li class=nav-link><a href=/sdk/software/guides/using-in-dotnet/ >Using in .Net</a></li><li class=nav-link><a href=/sdk/software/guides/using-in-java/ >Using in Java</a> <span class=beta>Beta</span></li><li class=nav-link><a href=/sdk/software/guides/data-feed/ >Data Feed</a></li><li class=nav-link><a href=/sdk/software/guides/mygeotab-urls/ >Using MyGeotab URLs</a></li><li class=nav-link><a href=/sdk/software/guides/using-go-devices/ >Using GO Devices</a></li><li class=nav-link><a href=/sdk/software/guides/go-device-logging/ >GO Device Logging</a></li><li class=nav-link><a href=/sdk/software/guides/custom-telematics-devices/ >Using Custom Telematics Devices</a></li><li class=nav-link><a href=/sdk/software/guides/developing-addins/ >Developing Add-Ins</a></li><li class=nav-link><a href=/sdk/software/guides/addin-storage/ >Using Add-Ins for data storage</a></li><li class=nav-link><a href=/sdk/software/guides/drive-addins/ >Geotab Drive Add-Ins</a></li><li class=nav-link><a href=/sdk/software/guides/map-add-ins-docs/ >Map Add-ins</a></li><li class=nav-link><a href=https://github.com/Geotab/mg-media-files>Media Files</a> <span class=beta>Beta</span></li><li class=nav-link><a href=/sdk/software/guides/power-bi/ >Connect to Power BI</a></li><li class="nav-link active"><a href=/sdk/software/guides/geotab-data-connector/ >Using the Geotab Data Connector</a></li></ul></li><li><h5>API</h5><ul class="nav flex-column"><li class=nav-link><a href=/sdk/software/api/reference/ >Reference</a></li><li class=nav-link><a href=/sdk/software/api/runner.html>Runner</a></li><li class=nav-link><a href=/sdk/software/api/clients/ >API Clients</a></li></ul></li><li><h5>Code Samples</h5><ul class="nav flex-column"><li class=nav-link><a href=/sdk/software/js-samples/ >Javascript Examples</a></li><li class=nav-link><a href=/sdk/software/dotnet-samples/ >.Net Examples</a></li><li class=nav-link><a href=https://github.com/Geotab/sdk-java-samples>Java Examples</a> <span class=beta>Beta</span></li><li class=nav-link><a href=https://github.com/Geotab/sdk-addin-samples>Add-in Examples</a></li></ul></li></ul><hr><h4>Hardware</h4><ul class="nav flex-column"><li class=nav-link><a href=/sdk/hardware/introduction/ >Hardware Introduction</a></li><li><h5>Add-on Protocols</h5><ul class="nav flex-column"><li class=nav-link><a href=/sdk/hardware/addon-protocols/rs232-usb/ >RS232 & USB</a></li><li class=nav-link><a href=/sdk/hardware/addon-protocols/can/ >CAN</a></li><li class=nav-link><a href=/sdk/hardware/addon-protocols/ble/ >BLE</a></li></ul></li><li><h5>Code Samples</h5><ul class="nav flex-column"><li class=nav-link><a href=/sdk/hardware/samples/python/ >Python</a></li><li class=nav-link><a href=https://github.com/Geotab/android-external-device-example>Android</a></li></ul></li><li><h5>Developing an IOX</h5><ul class="nav flex-column"><li class=nav-link><a href=/sdk/hardware/developing-an-iox/hardware-design-guide/ >Hardware Design Guide</a></li><li class=nav-link><a href=/sdk/hardware/developing-an-iox/messaging-protocol/ >Messaging Protocol</a></li></ul></li></ul><hr><h4>MyAdmin SDK</h4><ul class="nav flex-column"><li class=nav-link><a href=/sdk/myadmin-sdk/introduction/ >MyAdmin SDK Introduction</a></li><li class=nav-link><a href=/sdk/myadmin-sdk/new/ >What's New</a></li><li><h5>Guides</h5><ul class="nav flex-column"><li class=nav-link><a href=/sdk/myadmin-sdk/guides/getting-started/ >Getting Started</a></li><li class=nav-link><a href=/sdk/myadmin-sdk/guides/concepts/ >Concepts</a></li><li class=nav-link><a href=/sdk/myadmin-sdk/guides/using-with-dotnet/ >Using with .NET</a></li><li class=nav-link><a href=/sdk/myadmin-sdk/guides/using-with-javascript/ >Using with JavaScript</a></li><li class=nav-link><a href=/sdk/myadmin-sdk/guides/using-third-party-devices/ >Using Third-Party Devices with MyGeotab</a> <span class=legacy>Legacy</span></li></ul></li><li><h5>API</h5><ul class="nav flex-column"><li class=nav-link><a href=/sdk/myadmin-sdk/api/reference/ >Reference</a></li></ul></li><li><h5>Code Samples</h5><ul class="nav flex-column"><li class=nav-link><a href=/sdk/myadmin-sdk/code-samples/dotnet-examples/ >.NET Examples</a></li><li class=nav-link><a href=/sdk/myadmin-sdk/code-samples/javascript-examples/ >JavaScript Examples</a></li></ul></li></ul><hr><h4>Resources</h4><ul class="nav flex-column"><li class=nav-link><a href=https://community.geotab.com/s/ >Forums</a></li><li class=nav-link><a href=https://www.geotab.com/dev-channel/ >Dev Channel</a></li><li class=nav-link><a href=/sdk/resources/toolkits/ >Toolkits</a></li></ul><hr></nav></div><main role=main><div class=container-fluid><div class=row><article class=col-md-12><header><a href=https://github.com/Geotab/sdk/blob/master/src/software/guides/geotab-data-connector.md class="float-right small"><svg class="octicon octicon-mark-github" viewBox="0 0 16 16" version=1.1 width=16 height=16 aria-hidden=true><path fill-rule=evenodd d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg> Edit on GitHub</a> <a href="https://community.geotab.com/s/topic/0TO2J000000gAUAWA2/developer-discussions?language=en_US&viewMore=1" class="float-right small mx-2"><svg class="octicon octicon-people" viewBox="0 0 16 16" version=1.1 width=16 height=16 aria-hidden=true><path fill-rule=evenodd d="M5.5 3.5a2 2 0 100 4 2 2 0 000-4zM2 5.5a3.5 3.5 0 115.898 2.549 5.507 5.507 0 013.034 4.084.75.75 0 11-1.482.235 4.001 4.001 0 00-7.9 0 .75.75 0 01-1.482-.236A5.507 5.507 0 013.102 8.05 3.49 3.49 0 012 5.5zM11 4a.75.75 0 100 1.5 1.5 1.5 0 01.666 2.844.75.75 0 00-.416.672v.352a.75.75 0 00.574.73c1.2.289 2.162 1.2 2.522 2.372a.75.75 0 101.434-.44 5.01 5.01 0 00-2.56-3.012A3 3 0 0011 4z"></path></svg> Ask developers in the Community</a><h1>Using the Geotab Data Connector</h1></header><div><h2 id=overview>Overview</h2><p>This guide describes the general flow for ETL users to consume <a href="https://docs.google.com/document/d/1PEY6L5i3UlVV-5S9FaAV0MHnReCl9vgLxs_mLs26yVo/edit?usp=sharing">Geotab Data Connector</a>. OData Connector implemented OData protocol V4, or you may consider it just as a RESTful service.</p><h2 id=endpoint>Endpoint</h2><p>Before making your first call, it is strongly recommended to skip the <a href=#general-entry>general entry</a> and make the call directly to <a href=#odata-connector>OData Connector</a>. If you are not sure what the URL to call is, please contact the support team.</p><h3 id=general-entry>General Entry</h3><p>Feel free to skip this section if you plan to make calls directly to OData Connector. If you have to make a call to the general entry (https://data-connector.geotab.com), make sure you are ready to handle the 302 response and make another call to the returned URL.</p><p>Sample general entry response:</p><div class="language-plaintext highlighter-rouge"><div class=highlight><pre class=highlight><code>&gt; GET /odata/v4/svc/VehicleKpi_Daily?%24search=this_year&amp;%24top=1 HTTP/1.1
&gt; Host: data-connector.geotab.com
&gt; User-Agent: insomnia/2022.6.0
&gt; Authorization: Basic {credential_base64_encoded}
&gt; Accept: */*


* TLSv1.3 (IN), TLS handshake, Newsession Ticket (4):
* Mark bundle as not supporting multiuse


&lt; HTTP/1.1 302 
&lt; Location: https://odata-connector-1.geotab.com/odata/v4/svc/VehicleKpi_Daily?%24search=this_year&amp;%24top=1
&lt; Content-Language: en-US
&lt; Content-Length: 0
&lt; Date: Tue, 07 Feb 2023 16:32:57 GMT
</code></pre></div></div><p>If you are making calls to the general entry with postman or insomnia, the 400 error code is expected since postman or insomnia redirect requests WITHOUT the auth header.</p><h3 id=odata-connector>OData Connector</h3><p>Given the right url, you may test the service connection by making calls to the service root: https://odata-connector-1.geotab.com/odata/v4/svc/</p><p>No credential is required for this service root.</p><h4 id=curl>Curl</h4><p>Sample request:</p><div class="language-plaintext highlighter-rouge"><div class=highlight><pre class=highlight><code>curl --request GET \
&gt;   --url https://odata-connector-1.geotab.com/odata/v4/svc/
</code></pre></div></div><p>Sample response:</p><div class="language-plaintext highlighter-rouge"><div class=highlight><pre class=highlight><code>{
	"@odata.context": "https://odata-connector-1.geotab.com/odata/v4/svc/$metadata",
	"value": [
		{
			"name": "LatestVehicleMetadata",
			"url": "LatestVehicleMetadata"
		},
		{
			"name": "VehicleKpi_Daily",
			"url": "VehicleKpi_Daily"
		},
		{
			"name": "VehicleKpi_Hourly",
			"url": "VehicleKpi_Hourly"
		},
		{
			"name": "DeviceGroups",
			"url": "DeviceGroups"
		},
		{
			"name": "VehicleKpi_Monthly",
			"url": "VehicleKpi_Monthly"
		}
	]
}
</code></pre></div></div><p>Make sure to attach one of the above table names after the service root and attach your base64 encoded credentials in the following format: <code class="language-plaintext highlighter-rouge">&lt;database&gt;/&lt;username&gt;:&lt;password&gt;</code></p><p><strong>e.g.</strong> abccompany/geotab-data-connector@geotab.com:password Sample request:</p><div class="language-plaintext highlighter-rouge"><div class=highlight><pre class=highlight><code>curl --request GET \
&gt;   --url https://odata-connector-1.geotab.com/odata/v4/svc/VehicleKpi_Daily \
&gt;   --header 'Authorization: Basic {credential_base64_encoded}'
</code></pre></div></div><p>Sample response:</p><pre><code class=language-{>	"@odata.context": "https://odata-connector-1.geotab.com/odata/v4/svc/$metadata#VehicleKpi_Daily",
	"value": [
		{
			"UTC_Date": "2023-01-03",
			"Local_Date": "2023-01-02",
			"CompanyGuid": "B010CC02-xxxx-xxxx-xxx",
			"Vin": null,
			"SerialNo": "G94B210xxxx",
			"DeviceId": "b4xxxx",
			"Device_Health": "Device did not communicate within the day",
			"MinOdometer_Km": null,
			"MaxOdometer_Km": null,
			"DriveDuration_Seconds": 0.0,
			"IdleDuration_Seconds": 0.0,
			"TotalEngine_Hours": 0.0,
			"GPS_Distance_Km": 0.0,
			"Stops_Count": 0,
			"TotalFuel_Litres": null,
			"IdleFuel_Litres": null,
			"FuelEconomy_Distance_Km": null,
			"UniqueVehicleFault_Count": null,
			"UniqueDeviceFault_Count": null,
			"LatestLongitude": null,
			"LatestLatitude": null
		}
	]
}
</code></pre><p>You can also specify a date range as the query option, for more information about the query option, see <a href="https://docs.google.com/document/d/1PEY6L5i3UlVV-5S9FaAV0MHnReCl9vgLxs_mLs26yVo/edit#heading=h.xcvdktyx0p8t">here</a>.</p><h4 id=python>Python</h4><p>The following example shows how to consume OData Connector with Python, feel free to use any programming language, library or framework. Dependencies:</p><div class="language-plaintext highlighter-rouge"><div class=highlight><pre class=highlight><code>#@title Import Libraries
import requests
import getpass
import json
import numpy as np
import pandas as pd
import datetime
from datetime import date, timezone
from datetime import timedelta
</code></pre></div></div><p>Setup credential and query options :</p><div class="language-plaintext highlighter-rouge"><div class=highlight><pre class=highlight><code>#@title Grab user login info, database, username, password and date range
database = 'database'   #@param {type:"string"}
username = 'username'  #@param {type:"string"}
wStartDate = "2022-12-01" #@param {type:"date"}
wEndDate = "2022-12-05" #@param {type:"date"}
wVehicleKPI = "VehicleKPI_Daily" #@param ["VehicleKPI_Hourly", "VehicleKPI_Daily", "VehicleKPI_Monthly"]
password = 'password' #@param {type:"string"}
</code></pre></div></div><p>Get data from latest vehicle metadata and visualization:</p><div class="language-plaintext highlighter-rouge"><div class=highlight><pre class=highlight><code>#Retrieve latest Vehicle metadata based on table selected and date range.
#Connect to table
r=requests.get('https://odata-connector-1.geotab.com/odata/v4/svc/LatestVehicleMetadata', auth=(database + '/' + username, password) , verify=False)
#Display http request status code.
print(r.status_code)
#Load the data into a dataframe.  (Data is contained within the 'value' key.)
vDf= pd.DataFrame(r.json()['value'])
#Display the first 5 records.
vDf.head(5)
</code></pre></div></div><p>Get data from vehicle KPI table with date range:</p><div class="language-plaintext highlighter-rouge"><div class=highlight><pre class=highlight><code>#Retrieve appropriate Vehicle KPI data based on table selected and date range.
#Connect to table
r=requests.get('https://odata-connector-1.geotab.com/odata/v4/svc/' + wVehicleKPI  + '?$search=from_' + wStartDate +  '_to_' +  wEndDate, auth=(database + '/' + username, password) , verify=False)


#Display http request status code.
print(r.status_code)


#Load the data into a dataframe.  (Data is contained within the 'value' key.)
kpiDf= pd.DataFrame(r.json()['value'])
#Display the first 5 records.
kpiDf.head(5)
</code></pre></div></div><h2 id=table-schema>Table Schema</h2><p>Please refer to <a href="https://docs.google.com/document/d/1-Id2ReZcR8c-qudzY-dw8AzGTlMEzwO_mScg45vplDU/edit?usp=sharing">Geotab Data Connector – Data Schema and Dictionary</a> for current available data and details about table schema.</p></div></article></div></div><footer class="footer mt-auto py-3"><a href=https://www.geotab.com/security/ target=_blank>Security</a> &nbsp;&nbsp;|&nbsp;&nbsp; <a href=https://docs.google.com/document/d/1sVygLN02w2xNovFY4q5vw-oAzfYxCd7WLhyToElgDbs/pub rel=noopener target=_blank>Privacy Policy</a> &nbsp;&nbsp;|&nbsp;&nbsp; <a href=/myadmin-sdk/introduction/ >MyAdmin SDK</a> &nbsp;&nbsp;|&nbsp;&nbsp; <a href=https://docs.google.com/document/d/1jA8Qc8WZMhmaqdjd8Ng8rY4iMI073xCfLNt_DSP72TQ/edit rel=noopener target=_blank>End User Agreement</a><div class="copyright-container copyright-white-text">Copyright &copy; 2017 Geotab</div></footer></main></div><script src=/sdk/assets/javascript/index.js></script></body></html>