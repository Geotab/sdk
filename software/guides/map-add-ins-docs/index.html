<!DOCTYPE html><html><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>Geotab Deeper Add-In Overview | MyGeotab SDK</title><meta name=generator content="Jekyll v3.8.5"><meta property=og:title content="Geotab Deeper Add-In Overview"><meta name=author content="The Geotab Team"><meta property=og:locale content=en_US><meta name=description content="The Geotab SDK (Software Development Kit) is a powerful set of tools for automating tasks and working with the data in MyGeotab. Within these documents you will find information on how to develop JavaScript and C# applications, build and integrate Add-Ins and use MyGeotab with third-party systems."><meta property=og:description content="The Geotab SDK (Software Development Kit) is a powerful set of tools for automating tasks and working with the data in MyGeotab. Within these documents you will find information on how to develop JavaScript and C# applications, build and integrate Add-Ins and use MyGeotab with third-party systems."><link rel=canonical href=https://geotab.github.io/sdk/software/guides/map-add-ins-docs/ ><meta property=og:url content=https://geotab.github.io/sdk/software/guides/map-add-ins-docs/ ><meta property=og:site_name content="MyGeotab SDK"><script type=application/ld+json>{"description":"The Geotab SDK (Software Development Kit) is a powerful set of tools for automating tasks and working with the data in MyGeotab. Within these documents you will find information on how to develop JavaScript and C# applications, build and integrate Add-Ins and use MyGeotab with third-party systems.","author":{"@type":"Person","name":"The Geotab Team"},"@type":"WebPage","url":"https://geotab.github.io/sdk/software/guides/map-add-ins-docs/","headline":"Geotab Deeper Add-In Overview","@context":"http://schema.org"}</script><link rel=stylesheet href=/sdk/assets/stylesheets/style-0c11cad69b.min.css><link rel=apple-touch-icon-precomposed sizes=144x144 href=/sdk/assets/images/touch/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=/sdk/favicon.ico></head><body><header><nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark"><a class=navbar-brand href=/sdk/ ><img src=/sdk/assets/images/pillar.svg width=30 height=30 class="d-inline-block align-top" alt=""> MyGeotab SDK </a><button class="navbar-toggler d-lg-none" id=toggler type=button><span class=navbar-toggler-icon></span></button></nav></header><div id=wrapper><div id=sidebar-wrapper class=bg-light><nav id=sidebar class=sidebar><h4>Software</h4><ul class="nav flex-column"><li class=nav-link><a href=/sdk/software/introduction/ >Introduction</a></li><li class=nav-link><a href=/sdk/resources/new/ >What's New</a></li><h5>Guides</h5><ul class="nav flex-column"><li class=nav-link><a href=/sdk/software/guides/getting-started/ >Getting Started</a></li><li class=nav-link><a href=/sdk/software/guides/concepts/ >Concepts</a></li><li class=nav-link><a href=/sdk/software/guides/using-in-javascript/ >Using in Javascript</a></li><li class=nav-link><a href=/sdk/software/guides/using-in-dotnet/ >Using in .Net</a></li><li class=nav-link><a href=/sdk/software/guides/data-feed>Data Feed</a></li><li class=nav-link><a href=/sdk/software/guides/mygeotab-urls/ >Using MyGeotab URLs</a></li><li class=nav-link><a href=/sdk/software/guides/using-go-devices/ >Using GO Devices</a></li><li class=nav-link><a href=/sdk/software/guides/go-device-logging/ >GO Device Logging</a></li><li class=nav-link><a href=/sdk/software/guides/third-party-devices/ >Using Third-Party Devices</a></li><li class=nav-link><a href=/sdk/software/guides/developing-addins/ >Developing Add-Ins</a></li><li class=nav-link><a href=/sdk/software/guides/drive-addins/ >Geotab Drive Add-Ins</a></li><li class="nav-link active"><a href=/sdk/software/guides/map-add-ins-docs/ >Map Add-ins</a> <span class=beta>Beta</span></li></ul><h5>API</h5><ul class="nav flex-column"><li class=nav-link><a href=/sdk/software/api/reference/ >Reference</a></li><li class=nav-link><a href=/sdk/software/api/runner.html>Runner</a></li><li class=nav-link><a href=/sdk/software/api/clients/ >API Clients</a></li></ul><h5>Code Samples</h5><ul class="nav flex-column"><li class=nav-link><a href=/sdk/software/js-samples/ >Javascript Examples</a></li><li class=nav-link><a href=https://github.com/Geotab/sdk-dotnet-samples>.Net Examples</a></li><li class=nav-link><a href=https://github.com/Geotab/sdk-addin-samples>Add-in Examples</a></li></ul></ul><h4>Hardware</h4><ul class="nav flex-column"><li class=nav-link><a href=/sdk/hardware/introduction/ >Introduction</a></li><h5>Add-on Protocols</h5><ul class="nav flex-column"><li class=nav-link><a href=/sdk/hardware/addon-protocols/rs232-usb/ >RS232 & USB</a></li><li class=nav-link><a href=/sdk/hardware/addon-protocols/can/ >CAN</a></li><li class=nav-link><a href=/sdk/hardware/addon-protocols/ble/ >BLE</a></li></ul><h5>Code Samples</h5><ul class="nav flex-column"><li class=nav-link><a href=/sdk/hardware/samples/python/ >Python</a></li><li class=nav-link><a href=https://github.com/Geotab/android-external-device-example>Android</a></li></ul><h5>Developing an IOX</h5><ul class="nav flex-column"><li class=nav-link><a href=/sdk/hardware/developing-an-iox/hardware-design-guide/ >Hardware Design Guide</a></li><li class=nav-link><a href=/sdk/hardware/developing-an-iox/messaging-protocol/ >Messaging Protocol</a></li></ul></ul><h4>Resources</h4><ul class="nav flex-column"><li class=nav-link><a href=https://helpdesk.geotab.com/hc/en-us/community/topics/200655183-SDK-Forum>Forums</a></li><li class=nav-link><a href=https://www.geotab.com/dev-channel/ >Dev Channel</a></li></ul></nav></div><main role=main><div class=container-fluid><div class=row><article class=col-md-12><header><h1>Geotab Deeper Add-In Overview</h1></header><div><style>.docs-service {
    margin: 1rem 0;
    position: relative;
    display: flex;
    flex-direction: column;
    min-width: 0;
    word-wrap: break-word;
    background-color: rgb(255, 255, 255);
    background-clip: border-box;
    border: 1px solid rgba(0,0,0,.125);
    border-radius: .25rem;
}

.docs-service__part {
    flex: 1 1 auto;
    padding: 1.25rem;
    border-top: 1px solid rgba(0,0,0,.125);
}

.docs-service__title {
    margin-bottom: .5rem;
    font-family: inherit;
    font-weight: 500;
    line-height: 1.2;
    color: inherit;
}

.docs-service__part:first-child {
    border-top: none;
}</style><div><p>Deeper Add-Ins, also referred to as Deeper Integrations or simply Map Add-Ins, embed third-party integrations within the Maps page and the Trips History page of MyGeotab, enabling Geotab customers to access the integration from within the native MyGeotab Map and Trips History pages. A panel will slide out on the right-side of the page, allowing users to manipulate the map and see data presented by the integration alongside Geotab GO device data.</p><p>Below is an example of a Deeper Add-In on the Trips History page. When a user hovers over any part of a trip, this add-in displays the vehicles odometer and fuel level in the native tooltip that appears when hovering your mouse over any part of the trip. Note that the other details in the tooltip are displayed by the MyGeotab system by default.</p><figure><img src=../map-add-ins-docs-1.jpg alt="Example of adding new information to vehicle tooltip on the map."><figcaption>Pic 1 - Tooltip with additional information.</figcaption></figure><p>This document provides the setup process and functionality available to Partners looking to build Deeper Add-Ins.</p><h2>How to Install Deeper Add-Ins</h2><p>Deeper Add-Ins are installed on the System Settings page, just <a href=https://geotab.github.io/sdk/software/guides/developing-addins/ target=_blank>like regular Add-Ins</a>. The difference is in the contents of the configuration file. Deeper Add-Ins have following configuration JSON file:</p><div><pre class=code-example>
    <code class=language-json data-lang=json>
{
    "name": "Tooltip",
    "supportEmail": "",
    "version": "1.0",
    "items": [{
        "page": "map",
        "title": "Tooltips",
        "mapScript": {
            "src": "/tooltip/addin.js",
            "style": "/tooltip/addin.css"
        }
    }]
}
    </code>
</pre></div><p>The five main properties of the configuration file are as follows:</p><ol><li><strong>page</strong> - Defines which page the Add-In will exist within. It has two possible values: “map” (for the Maps page) or “tripsHistory” (for the Trips History page). The default value is “map”.</li><li><strong>src</strong> - JavaScript file reference for this Add-In. In the example above, the JS file was dropped into MyGeotab, but an external reference is possible and recommended.</li><li><strong>style</strong> - CSS file reference for this Add-In.</li><li><strong>title</strong> - The title that will be displayed in the right-side panel if there are multiple Deeper Add-Ins installed.</li><li><strong>url</strong> - HTML file reference for this Add-In. This option should be used instead of <strong>src</strong> and <strong>style</strong>. All link to stylesheets and javascript modules can be listed in this HTML file. Also all content of the &lt;body&gt; tag will be automatically added to add-in tab. (<a href=https://github.com/Geotab/sdk-map-addin-samples/tree/master/html target=_blank>Example</a>)</li></ol><p>The script file from the “src” property and the style file from the “style” property will be added to the MyGeotab page iframe in the right-side panel.</p><p>The starting point for the Deeper Add-In JS script will be the function that is added as a method to “window.geotab.addin”. For example:</p><div class=highlights><pre>
    <code class=language-js data-lang=js>
geotab.addin.request = (elt, service) => {
    // code for Deeper Add-In
}
    </code>
</pre></div><p>This function has two arguments:</p><ol><li><strong>elt</strong> - The HTMLElement for the Add-In. Inside it is everything that belongs to the Add-In. Nothing will be removed or changed.</li><li><strong><a href=#services-list>services</a></strong> - JavaScript file reference for this Add-In. In the example above, the JS file was dropped into MyGeotab, but an external reference is possible and recommended.</li></ol><h2>How Deeper Add-Ins are Opened Inside MyGeotab</h2><p>In MyGeotab, Deeper Add-Ins are opened inside an sandboxed iframe. This means that custom scripts is run inside the iframe.</p><p>There are a few differences between a script run in the browser and a script run inside an iframe. When the user leaves the Map or Trips History page, the content of the iframe is cleared by the browser.</p><ul><li>When the user returns to the page, the scripts inside the iframe are reloaded.</li><li>The current Add-In state should be saved in localStorage, IndexedDB, or elsewhere, if necessary.</li></ul><p class=important>Don't access any elements or API in main window because they can be changed in future. To make sure that your add-ins won't be broken in later versions of MyGeotab all communications with main window should be made with documented services.</p><p>The maximum width of the Deeper Add-In panel is 450 px. The height is responsive to fill the height of the iframe that the panel exists within. The width may become smaller for mobile devices.</p><p>The following screenshots display how the panel size changes between a laptop screen and a mobile phone screen.</p><figure><img src=../map-add-ins-docs-2.jpg alt="Example of how map add-ins look like on laptop screen size"><figcaption>Pic 2 - Add-ins on the map page (desktop).</figcaption></figure><figure><img src=../map-add-ins-docs-3.jpg alt="Example of how map add-ins look like on mobile screen size"><figcaption>Pic 3 - Add-ins on the map page (mobile).</figcaption></figure><p>Each Deeper Add-In exists within its own tab on the right-side panel. Each Add-In has its own HTMLElement where it can append content. The Add-In function will be called when a user visits the Add-In by clicking on its tab. After that, the “focus” and “blur” events will be fired when the user opens or leaves the Add-In tab, respectively (See services.page).</p><p>The screenshot below displays the tabs for different Deeper Add-Ins. The different Add-Ins are named “Canvas”, “Hello from the other side of the frame”, and “Tooltip for map”.</p><figure><img src=../map-add-ins-docs-4.jpg alt="Example of how tabs looks like if multiple map add-ins are installed"><figcaption>Pic 4 - Multiple add-ins on the map page.</figcaption></figure><h2 id=services-list>Deeper Add-In Services</h2><div class=services-list><div class=docs-service><div class=docs-service__part><h3 class=docs-service__title><span class=docs-service__name>page</span> service (<a href=https://github.com/Geotab/sdk-map-addin-samples/tree/master/page target=_blank>Example</a>)</h3><p>Service for getting/setting page state and moving between MyGeotab page</p><h4>Methods</h4><table><thead><th>Service methods</th><th>Description</th></thead><tbody><tr><td>set (key: string, value: string): Promise&lt;boolean&gt;</td><td>Sets new key/value pair to page state</td></tr><tr><td>get (): Promise&lt;object&gt;</td><td>Gets page state</td></tr><tr><td>go (page: string, state?: object): Promise&lt;boolean&gt;</td><td>Changes current page</td></tr><tr><td>hasAccessToPage (page: string): Promise&lt;boolean&gt;</td><td>Checks whether current user has access to MyGeotab page</td></tr><tr><td>getFilterState (): Promise&lt;<a href=#IGroupFilterId_9098983511349479>IGroupFilterId</a>[]&gt;</td><td>Gets current company filter state</td></tr><tr><td>attach (eventName: string, eventHandler: (serviceData: any) => void): void</td><td>Attaches event handler to service</td></tr><tr><td>detach (eventName: string, eventHandler?: (serviceData: any) => void): void</td><td>Detaches event handler to service</td></tr></tbody></table><h4>Properties</h4><table><thead><th>Service property name</th><th>Type</th><th>Description</th></thead><tbody><tr><td>active</td><td>boolean</td><td>Current map add-in state. It's true if current add-in is focused</td></tr></tbody></table><h4>Events</h4><table><thead><th>Event name</th><th>Event object</th><th>Description</th></thead><tbody><tr><td>focus</td><td>Empty object</td><td>Event is fired when user focuses on current map add-in</td></tr><tr><td>blur</td><td>Empty object</td><td>Event is fired when user focuses on another map add-in</td></tr><tr><td>stateChange</td><td><div>state: (object) - Updated page state</div></td><td>Event is fired when the state of the page is changed</td></tr><tr><td>filterChange</td><td><div>groups: (<a href=#IGroupFilterId_9098983511349479>IGroupFilterId</a>[]) - Updated array of filter groups</div></td><td>Event is fired when the company filter groups is changed</td></tr></tbody></table></div><div class=docs-service__part><div class=docs-interface><h4 id=IGroupFilterId_9098983511349479>Interface IGroupFilterId</h4><p>Group id object that is selected by user in company filter</p><table><thead><th>Property</th><th>Type</th></thead><tbody><tr><td>id</td><td>string</td></tr></tbody></table></div></div></div><div class=docs-service><div class=docs-service__part><h3 class=docs-service__title><span class=docs-service__name>localStorage</span> service (<a href=https://github.com/Geotab/sdk-map-addin-samples/tree/master/localStorage target=_blank>Example</a>)</h3><p>Service to request information stored in browser LocalStorage</p><h4>Methods</h4><table><thead><th>Service methods</th><th>Description</th></thead><tbody><tr><td>set (key: string, value: string): Promise&lt;boolean&gt;</td><td>Sets key-value pairs to browser localStorage with key</td></tr><tr><td>remove (key: string): Promise&lt;boolean&gt;</td><td>Removes value from browser localStorage by key</td></tr><tr><td>get (key: string): Promise&lt;string&gt;</td><td>Gets value from browser localStorage by key</td></tr></tbody></table></div></div><div class=docs-service><div class=docs-service__part><h3 class=docs-service__title><span class=docs-service__name>api</span> service (<a href=https://github.com/Geotab/sdk-map-addin-samples/tree/master/request target=_blank>Example</a>)</h3><p>Service for requesting data from Geotab server</p><h4>Methods</h4><table><thead><th>Service methods</th><th>Description</th></thead><tbody><tr><td>call (method: string, params: object): Promise&lt;any[]&gt;</td><td>Sends single request to Geotab server</td></tr><tr><td>multiCall (calls: <a href=#TApiCall_5345683199380336>TApiCall</a>[]): Promise&lt;any[][]&gt;</td><td>Sends multiple requests to Geotab server in one batch</td></tr><tr><td>getSession (): Promise&lt;ISessionInfo&gt;</td><td>Gets current user session information</td></tr></tbody></table></div><div class=docs-service__part><div class=docs-type><h4 id=TApiCall_5345683199380336>Type TApiCall</h4><p><pre><code class=language-js data-lang=js>[string, object]</code></pre></p><p>Tuple for calling server methods where first element is method name and second is an object with parameters.</p></div></div></div><div class=docs-service><div class=docs-service__part><h3 class=docs-service__title><span class=docs-service__name>events</span> service (<a href=https://github.com/Geotab/sdk-map-addin-samples/tree/master/events target=_blank>Example</a>)</h3><p>Service for catching events that happens when user interact with different entities on the map</p><h4>Methods</h4><table><thead><th>Service methods</th><th>Description</th></thead><tbody><tr><td>attach (eventName: string, eventHandler: (serviceData: any) => void): void</td><td>Attaches event handler to service</td></tr><tr><td>detach (eventName: string, eventHandler?: (serviceData: any) => void): void</td><td>Detaches event handler to service</td></tr></tbody></table><h4>Events</h4><table><thead><th>Event name</th><th>Event object</th><th>Description</th></thead><tbody><tr><td>move</td><td><div>data: (<a href=#ICoordinate_9360730390494372>ICoordinate</a>) - Position of the pointer on the map</div></td><td>Event is fired when user moves pointer over the map</td></tr><tr><td>over</td><td><div>data: (<a href=#TEventData_17548217952829526>TEventData</a>) - Main information about entity</div></td><td>Event is fired when user moves pointer over an obejct on the map</td></tr><tr><td>out</td><td><div>data: (<a href=#TEventData_17548217952829526>TEventData</a>) - Main information about entity</div></td><td>Event is fired when user moves pointer out of an obejct on the map</td></tr><tr><td>click</td><td><div>data: (<a href=#TEventData_17548217952829526>TEventData</a>) - Main information about entity</div></td><td>Event is fired when user clicks on an obejct on the map</td></tr></tbody></table></div><div class=docs-service__part><div class=docs-interface><h4 id=IZoneEvent_41586038932589475>Interface IZoneEvent</h4><p>Event object that is sent to add-in when user interacts with zone</p><table><thead><th>Property</th><th>Type</th></thead><tbody><tr><td>type</td><td>&quot;zone&quot;</td></tr><tr><td>entity</td><td><a href=#IZoneEventData_44042843256501873>IZoneEventData</a></td></tr></tbody></table></div></div><div class=docs-service__part><div class=docs-interface><h4 id=IZoneEventData_44042843256501873>Interface IZoneEventData</h4><p>Zone object that is sent to add-in when user interacts with zone</p><table><thead><th>Property</th><th>Type</th></thead><tbody><tr><td>id</td><td>string</td></tr></tbody></table></div></div><div class=docs-service__part><div class=docs-interface><h4 id=IDeviceEvent_30163573678461186>Interface IDeviceEvent</h4><p>Event object that is sent to add-in when user interacts with device</p><table><thead><th>Property</th><th>Type</th></thead><tbody><tr><td>type</td><td>&quot;device&quot;</td></tr><tr><td>entity</td><td><a href=#IDeviceEventData_2923566451586521>IDeviceEventData</a></td></tr></tbody></table></div></div><div class=docs-service__part><div class=docs-interface><h4 id=IDeviceEventData_2923566451586521>Interface IDeviceEventData</h4><p>Device object that is sent to add-in when user interacts with device</p><table><thead><th>Property</th><th>Type</th></thead><tbody><tr><td>id</td><td>string</td></tr></tbody></table></div></div><div class=docs-service__part><div class=docs-interface><h4 id=IRouteEvent_24176276971063237>Interface IRouteEvent</h4><p>Event object that is sent to add-in when user interacts with route</p><table><thead><th>Property</th><th>Type</th></thead><tbody><tr><td>type</td><td>&quot;route&quot;</td></tr><tr><td>entity</td><td><a href=#IRouteEventData_8248259915560439>IRouteEventData</a></td></tr></tbody></table></div></div><div class=docs-service__part><div class=docs-interface><h4 id=IRouteEventData_8248259915560439>Interface IRouteEventData</h4><p>Route object that is sent to add-in when user interacts with route</p><table><thead><th>Property</th><th>Type</th></thead><tbody><tr><td>id</td><td>string</td></tr></tbody></table></div></div><div class=docs-service__part><div class=docs-interface><h4 id=ITripEvent_1095796138370515>Interface ITripEvent</h4><p>Event object that is sent to add-in when user interacts with trip</p><table><thead><th>Property</th><th>Type</th></thead><tbody><tr><td>type</td><td>&quot;trip&quot;</td></tr><tr><td>entity</td><td><a href=#ITripEventData_5051625304962382>ITripEventData</a></td></tr></tbody></table></div></div><div class=docs-service__part><div class=docs-interface><h4 id=ITripEventData_5051625304962382>Interface ITripEventData</h4><p>Trip object that is sent to add-in when user interacts with trip</p><table><thead><th>Property</th><th>Type</th><th>Description</th></thead><tbody><tr><td>id</td><td>string</td><td>Id of the trip</td></tr><tr><td>device</td><td>{ id: string; }</td><td>Device id object that drove this trip</td></tr><tr><td>dateTime</td><td>string</td><td>Date and time of the trip point</td></tr></tbody></table></div></div><div class=docs-service__part><div class=docs-interface><h4 id=IExceptionsEvent_03095104080644484>Interface IExceptionsEvent</h4><p>Event object that is sent to add-in when user interacts with device exceptions</p><table><thead><th>Property</th><th>Type</th></thead><tbody><tr><td>type</td><td>&quot;exceptions&quot;</td></tr><tr><td>entity</td><td><a href=#IExceptionsEventData_7157557693392491>IExceptionsEventData</a></td></tr></tbody></table></div></div><div class=docs-service__part><div class=docs-interface><h4 id=IExceptionsEventData_7157557693392491>Interface IExceptionsEventData</h4><p>Exceptions object that is sent to add-in when user interacts with exception icon on the map</p><table><thead><th>Property</th><th>Type</th></thead><tbody><tr><td>exceptions</td><td><a href=#IExceptionEventData_6444035965958528>IExceptionEventData</a>[]</td></tr></tbody></table></div></div><div class=docs-service__part><div class=docs-interface><h4 id=IExceptionEventData_6444035965958528>Interface IExceptionEventData</h4><p>Exception object that is sent to add-in when user interacts with exception icon on the map</p><table><thead><th>Property</th><th>Type</th><th>Description</th></thead><tbody><tr><td>to</td><td>string</td><td>Date and time when this exception ends</td></tr><tr><td>from</td><td>string</td><td>Date and time when this exception starts</td></tr><tr><td>id</td><td>string</td><td>Id of the exception</td></tr><tr><td>rule</td><td>{ id: string; }</td><td>Rule id object of this exception</td></tr><tr><td>device</td><td>{ id: string; }</td><td>Device id object where this exception happen</td></tr></tbody></table></div></div><div class=docs-service__part><div class=docs-type><h4 id=TEventData_17548217952829526>Type TEventData</h4><p><pre><code class=language-js data-lang=js><a href=#IZoneEvent_41586038932589475>IZoneEvent</a> | <a href=#IDeviceEvent_30163573678461186>IDeviceEvent</a> | <a href=#IRouteEvent_24176276971063237>IRouteEvent</a> | <a href=#ITripEvent_1095796138370515>ITripEvent</a> | <a href=#IExceptionsEvent_03095104080644484>IExceptionsEvent</a></code></pre></p><p>Event object that is sent to add-in when user interacts with different types of entitis on the map</p></div></div></div><div class=docs-service><div class=docs-service__part><h3 class=docs-service__title><span class=docs-service__name>map</span> service (<a href=https://github.com/Geotab/sdk-map-addin-samples/tree/master/map target=_blank>Example</a>)</h3><p>Service for manipulating viewport of the map and getting updates about changed map viewport</p><h4>Methods</h4><table><thead><th>Service methods</th><th>Description</th></thead><tbody><tr><td>setBounds (bounds: <a href=#IMapBounds_023731171390437567>IMapBounds</a>): Promise&lt;boolean&gt;</td><td>Sets map bounds</td></tr><tr><td>getBounds (): Promise&lt;<a href=#IMapBounds_023731171390437567>IMapBounds</a>&gt;</td><td>Gets current map bounds</td></tr><tr><td>setZoom (zoom: number): Promise&lt;boolean&gt;</td><td>Sets map zoom level</td></tr><tr><td>getZoom (): Promise&lt;number&gt;</td><td>Gets current map zoom level</td></tr><tr><td>attach (eventName: string, eventHandler: (serviceData: any) => void): void</td><td>Attaches event handler to service</td></tr><tr><td>detach (eventName: string, eventHandler?: (serviceData: any) => void): void</td><td>Detaches event handler to service</td></tr></tbody></table><h4>Events</h4><table><thead><th>Event name</th><th>Event object</th><th>Description</th></thead><tbody><tr><td>change</td><td>Empty object</td><td>Event is fired when viewport of map is changed. This event fires each time when use drags or zooms map</td></tr><tr><td>changed</td><td><div>viewport: (<a href=#IChangedViewport_9940525146327717>IChangedViewport</a>) - Current map zoom and bounds</div></td><td>Event is fired when user finished dragging and zooming map</td></tr></tbody></table></div><div class=docs-service__part><div class=docs-interface><h4 id=IChangedViewport_9940525146327717>Interface IChangedViewport</h4><p>Current map viewport</p><table><thead><th>Property</th><th>Type</th><th>Description</th></thead><tbody><tr><td>zoom</td><td>number</td><td>Current map zoom</td></tr><tr><td>bounds</td><td><a href=#IMapBounds_023731171390437567>IMapBounds</a></td><td>Current map bounds</td></tr></tbody></table></div></div><div class=docs-service__part><div class=docs-interface><h4 id=IMapBounds_023731171390437567>Interface IMapBounds</h4><p>Object that represents a map bounding box.</p><table><thead><th>Property</th><th>Type</th><th>Description</th></thead><tbody><tr><td>sw</td><td><a href=#IMapLatLng_8914788191107179>IMapLatLng</a></td><td>The southwest corner of the bounding box.</td></tr><tr><td>ne</td><td><a href=#IMapLatLng_8914788191107179>IMapLatLng</a></td><td>The northeast corner of the bounding box.</td></tr></tbody></table></div></div><div class=docs-service__part><div class=docs-interface><h4 id=IMapLatLng_8914788191107179>Interface IMapLatLng</h4><p>An object that represents longitude and latitude</p><table><thead><th>Property</th><th>Type</th><th>Description</th></thead><tbody><tr><td>lat</td><td>number</td><td>Latitude, measured in degrees.</td></tr><tr><td>lng</td><td>number</td><td>Longitude, measured in degrees.</td></tr></tbody></table></div></div></div><div class=docs-service><div class=docs-service__part><h3 class=docs-service__title><span class=docs-service__name>tooltip</span> service (<a href=https://github.com/Geotab/sdk-map-addin-samples/tree/master/tooltip target=_blank>Example</a>)</h3><p>Service for showing additional information in entities tooltip</p><h4>Methods</h4><table><thead><th>Service methods</th><th>Description</th></thead><tbody><tr><td>showAt (position: <a href=#TPosition_7366708519730412>TPosition</a>, pattern: <a href=#ITooltip_9063177280037997>ITooltip</a>, sequence: number): void</td><td>Shows custom tooltip at certain position on the map</td></tr><tr><td>show (pattern: <a href=#ITooltip_9063177280037997>ITooltip</a>, sequence: number): void</td><td>Adds additional information to already shown tooltip on the map</td></tr><tr><td>hide (): void</td><td>Hids additional information from already shown and custom tooltip</td></tr></tbody></table></div><div class=docs-service__part><div class=docs-interface><h4 id=ITooltip_9063177280037997>Interface ITooltip</h4><p>Custom map add-in tooltip options. It can be either a text information or an image</p><table><thead><th>Property</th><th>Type</th><th>Description</th></thead><tbody><tr><td>icon</td><td>string</td><td>Icon image for custom tooltip part.</td></tr><tr><td>image</td><td><a href=#ITooltipImage_43880809372053853>ITooltipImage</a></td><td>Image options that should be shown instead of text in tooltip</td></tr><tr><td>main</td><td>string</td><td>Main tooltip text</td></tr><tr><td>secondary</td><td>string[]</td><td>Secondary information that will be written with smaller font</td></tr><tr><td>additional</td><td>string[]</td><td>Some additional tooltip information</td></tr></tbody></table></div></div><div class=docs-service__part><div class=docs-interface><h4 id=ITooltipImage_43880809372053853>Interface ITooltipImage</h4><p>Custom tooltip image options. It can be either link to external image, base64 image or image stored in ArrayBuffer</p><table><thead><th>Property</th><th>Type</th><th>Description</th></thead><tbody><tr><td>url</td><td>string</td><td>Either link to external image or serialized base64 image or stringified SVG image</td></tr><tr><td>buffer</td><td>ArrayBuffer</td><td>Image stored in ArrayBuffer</td></tr><tr><td>width</td><td>number</td><td>Width of the image</td></tr><tr><td>height</td><td>number</td><td>Height of the image</td></tr></tbody></table></div></div></div><div class=docs-service><div class=docs-service__part><h3 class=docs-service__title><span class=docs-service__name>actionList</span> service (<a href=https://github.com/Geotab/sdk-map-addin-samples/tree/master/action target=_blank>Example</a>)</h3><p>Service for showing a custom action list instead of the existing one, or adding custom buttons to existing action lists.</p><h4>Methods</h4><table><thead><th>Service methods</th><th>Description</th></thead><tbody><tr><td>show (position: <a href=#TPosition_7366708519730412>TPosition</a>, title: string, items: <a href=#IMenuActionItem_029612845099294516>IMenuActionItem</a>[]): void</td><td>Shows custom action menu on certain position</td></tr><tr><td>attachMenu (menuName: <a href=#TMenuType_23233765865529943>TMenuType</a>, handler: <a href=#TMenuHandler_1651454077367045>TMenuHandler</a>): void</td><td>Subscribes on event when one of the MyGeotab map menus is shown to add new action button</td></tr><tr><td>detachMenu (menuName: <a href=#TMenuType_23233765865529943>TMenuType</a>, handler?: <a href=#TMenuHandler_1651454077367045>TMenuHandler</a>): void</td><td>Unsubscribes on event when one of the MyGeotab map menus is shown</td></tr><tr><td>attach (eventName: string, eventHandler: (serviceData: any) => void): void</td><td>Attaches event handler to service</td></tr><tr><td>detach (eventName: string, eventHandler?: (serviceData: any) => void): void</td><td>Detaches event handler to service</td></tr></tbody></table><h4>Events</h4><table><thead><th>Event name</th><th>Event object</th><th>Description</th></thead><tbody><tr><td>CustomEvent</td><td><div>data: (object) - Data from `IAddinActionItem.data` for the current button</div></td><td>Event is fired when user clicks on custom button in action list. Event name is defined by "clickEvent" property in custom button object.</td></tr></tbody></table></div><div class=docs-service__part><div class=docs-interface><h4 id=IMenuActionItem_029612845099294516>Interface IMenuActionItem</h4><p>Custom action button options</p><table><thead><th>Property</th><th>Type</th><th>Description</th></thead><tbody><tr><td>title</td><td>string</td><td>Button title</td></tr><tr><td>icon</td><td>string</td><td>Button icon image</td></tr><tr><td>url</td><td>string</td><td>URL to external page. If this property is used than button will be an anchor element</td></tr><tr><td>clickEvent</td><td>string</td><td>Name of the event that will be fired when user clicks on this button</td></tr><tr><td>zIndex</td><td>number</td><td>Number that defined position of the custom action button in menu</td></tr><tr><td>data</td><td>object</td><td>Custom data that will be send with `clickEvent` when user clicks on this button</td></tr></tbody></table></div></div><div class=docs-service__part><div class=docs-interface><h4 id=IMenuEventData_6809985707913828>Interface IMenuEventData</h4><p>Data that is passed to add-in when all types of map action menus are about to be shown</p><table><thead><th>Property</th><th>Type</th></thead><tbody><tr><td>x</td><td>number</td></tr><tr><td>y</td><td>number</td></tr><tr><td>menuName</td><td>string</td></tr><tr><td>location</td><td><a href=#ILocation_47443820316200935>ILocation</a></td></tr></tbody></table></div></div><div class=docs-service__part><div class=docs-interface><h4 id=IMapMenuEventData_5465331585004432>Interface IMapMenuEventData extends <a href=#IMenuEventData_6809985707913828>IMenuEventData</a></h4><p>Data that is passed to add-in when map action menu is about to be shown</p></div></div><div class=docs-service__part><div class=docs-interface><h4 id=IZoneMenuEventData_09090521325190326>Interface IZoneMenuEventData extends <a href=#IMenuEventData_6809985707913828>IMenuEventData</a></h4><p>Data that is passed to add-in when zone action menu is about to be shown</p><table><thead><th>Property</th><th>Type</th></thead><tbody><tr><td>zone</td><td>{ id: string; }</td></tr></tbody></table></div></div><div class=docs-service__part><div class=docs-interface><h4 id=IRouteMenuEventData_37133845860864345>Interface IRouteMenuEventData extends <a href=#IMenuEventData_6809985707913828>IMenuEventData</a></h4><p>Data that is passed to add-in when route action menu is about to be shown</p><table><thead><th>Property</th><th>Type</th></thead><tbody><tr><td>route</td><td>{ id: string; }</td></tr></tbody></table></div></div><div class=docs-service__part><div class=docs-interface><h4 id=IMarkerMenuEventData_33955682754560623>Interface IMarkerMenuEventData extends <a href=#IMenuEventData_6809985707913828>IMenuEventData</a></h4><p>Data that is passed to add-in when location marker action menu is about to be shown</p><table><thead><th>Property</th><th>Type</th></thead><tbody><tr><td>title</td><td>string</td></tr></tbody></table></div></div><div class=docs-service__part><div class=docs-interface><h4 id=IDeviceMenuEventData_8833740855806305>Interface IDeviceMenuEventData extends <a href=#IMenuEventData_6809985707913828>IMenuEventData</a></h4><p>Data that is passed to add-in when device action menu is about to be shown</p><table><thead><th>Property</th><th>Type</th></thead><tbody><tr><td>device</td><td>{ id: string; }</td></tr></tbody></table></div></div><div class=docs-service__part><div class=docs-interface><h4 id=ITripMenuEventData_23882461194470617>Interface ITripMenuEventData extends <a href=#IMenuEventData_6809985707913828>IMenuEventData</a></h4><p>Data that is passed to add-in when trip action menu is about to be shown</p><table><thead><th>Property</th><th>Type</th></thead><tbody><tr><td>dateTime</td><td>string</td></tr><tr><td>device</td><td>{ id: string; }</td></tr><tr><td>trip</td><td><a href=#ITripData_8276889804597649>ITripData</a></td></tr></tbody></table></div></div><div class=docs-service__part><div class=docs-interface><h4 id=ITripData_8276889804597649>Interface ITripData</h4><p>Trip data that is passed to add-in when trip action menu is about to be shown</p><table><thead><th>Property</th><th>Type</th></thead><tbody><tr><td>start</td><td>string</td></tr><tr><td>stop</td><td>string</td></tr></tbody></table></div></div><div class=docs-service__part><div class=docs-type><h4 id=TMenuType_23233765865529943>Type TMenuType</h4><p><pre><code class=language-js data-lang=js>&quot;zone&quot; | &quot;map&quot; | &quot;device&quot; | &quot;route&quot; | &quot;marker&quot; | &quot;trip&quot;</code></pre></p><p>Types of menus where custom action buttons can be added</p></div></div><div class=docs-service__part><div class=docs-type><h4 id=TMenuHandler_1651454077367045>Type TMenuHandler</h4><p><pre><code class=language-js data-lang=js>(menuName: string, data: <a href=#TMenuEventData_711554926312495>TMenuEventData</a>) =&gt; <a href=#IMenuActionItem_029612845099294516>IMenuActionItem</a>[] | Promise&lt;<a href=#IMenuActionItem_029612845099294516>IMenuActionItem</a>[]&gt;</code></pre></p><p>Function that will be called when certain action menu is about to be opened</p></div></div><div class=docs-service__part><div class=docs-type><h4 id=TMenuEventData_711554926312495>Type TMenuEventData</h4><p><pre><code class=language-js data-lang=js><a href=#IMapMenuEventData_5465331585004432>IMapMenuEventData</a> | <a href=#IZoneMenuEventData_09090521325190326>IZoneMenuEventData</a> | <a href=#IRouteMenuEventData_37133845860864345>IRouteMenuEventData</a> | <a href=#IMarkerMenuEventData_33955682754560623>IMarkerMenuEventData</a> | <a href=#IDeviceMenuEventData_8833740855806305>IDeviceMenuEventData</a> | <a href=#ITripMenuEventData_23882461194470617>ITripMenuEventData</a></code></pre></p><p>Data that is passed to add-in based on type of menu that is shown</p></div></div></div><div class=docs-service><div class=docs-service__part><h3 class=docs-service__title><span class=docs-service__name>canvas</span> service (<a href=https://github.com/Geotab/sdk-map-addin-samples/tree/master/mapElements target=_blank>Example</a>)</h3><p>Service for drawing custom shapes on the map</p><h4>Methods</h4><table><thead><th>Service methods</th><th>Description</th></thead><tbody><tr><td>path (path: <a href=#IPathSeg_3333674895364078>IPathSeg</a>[], zIndex: number): <a href=#ICanvasElement_8459057171879436>ICanvasElement</a></td><td>Draws SVG path element on the map</td></tr><tr><td>rect (coords: <a href=#TPosition_7366708519730412>TPosition</a>, width: number, height: number, radius: number, zIndex: number): <a href=#ICanvasElement_8459057171879436>ICanvasElement</a></td><td>Draws SVG rect element on the map</td></tr><tr><td>circle (coords: <a href=#TPosition_7366708519730412>TPosition</a>, radius: number, zIndex: number): <a href=#ICanvasElement_8459057171879436>ICanvasElement</a></td><td>Draws SVG circle element on the map</td></tr><tr><td>text (coords: <a href=#TPosition_7366708519730412>TPosition</a>, text: string, zIndex: number): <a href=#ICanvasElement_8459057171879436>ICanvasElement</a></td><td>Draws SVG text element on the map</td></tr><tr><td>marker (coords: <a href=#TPosition_7366708519730412>TPosition</a>, width: number, height: number, source: <a href=#TMarkerSource_46512197559650414>TMarkerSource</a>, zIndex: number): <a href=#ICanvasElement_8459057171879436>ICanvasElement</a></td><td>Draws custom image element on the map</td></tr><tr><td>clear (): void</td><td>Clears all drawn elements on the map</td></tr></tbody></table></div><div class=docs-service__part><div class=docs-interface><h4 id=IPathSeg_3333674895364078>Interface IPathSeg</h4><p>Segment of the path element that will be added in `d` attribute</p><table><thead><th>Property</th><th>Type</th><th>Description</th></thead><tbody><tr><td>type</td><td>string</td><td>Type of the segment. Supported types `M`, `m`, `L`, `l`, `Z`, `C`, `c`, `S`, `s`</td></tr><tr><td>points</td><td><a href=#TPathSegPoint_7092445778380438>TPathSegPoint</a>[]</td><td>Locations or coordinates that should be used in current segment</td></tr></tbody></table></div></div><div class=docs-service__part><div class=docs-interface><h4 id=ICanvasElement_8459057171879436>Interface ICanvasElement</h4><p>New map element object</p><table><thead><th>Method</th><th>Description</th></thead><tbody><tr><td>change (attrs: <a href=#IFrameCanvasElementStyleAttributes_46279222035579015>IFrameCanvasElementStyleAttributes</a>): <a href=#ICanvasElement_8459057171879436>ICanvasElement</a></td><td>Changes style attributes of the current map element</td></tr><tr><td>remove (): void</td><td>Removes current map element</td></tr><tr><td>isRemoved (): boolean</td><td>Returns true if element was removed</td></tr><tr><td>attach (event: <a href=#TCanvasElementEvent_8500628213537043>TCanvasElementEvent</a>, handler: (data: <a href=#ICoordinate_9360730390494372>ICoordinate</a>) =&gt; void): <a href=#ICanvasElement_8459057171879436>ICanvasElement</a></td><td>Attaches event handler to current element event</td></tr><tr><td>detach (event: <a href=#TCanvasElementEvent_8500628213537043>TCanvasElementEvent</a>, handler?: (data: <a href=#ICoordinate_9360730390494372>ICoordinate</a>) =&gt; void): <a href=#ICanvasElement_8459057171879436>ICanvasElement</a></td><td>Detaches event handler from current element event</td></tr></tbody></table></div></div><div class=docs-service__part><div class=docs-interface><h4 id=IFrameCanvasElementStyleAttributes_46279222035579015>Interface IFrameCanvasElementStyleAttributes</h4><p>Style properties that can be changed for every custom element</p><table><thead><th>Property</th><th>Type</th><th>Description</th></thead><tbody><tr><td>fill</td><td>string</td><td>Background color of the element</td></tr><tr><td>stroke</td><td>string</td><td>Border color of the element</td></tr><tr><td>stroke-width</td><td>number</td><td>Border width of the element</td></tr><tr><td>fill-opacity</td><td>number</td><td>Opacity of the element</td></tr><tr><td>font-size</td><td>number</td><td>Text element font size</td></tr><tr><td>font-weight</td><td>number</td><td>Text element font weight</td></tr></tbody></table></div></div><div class=docs-service__part><div class=docs-type><h4 id=TPathSegPoint_7092445778380438>Type TPathSegPoint</h4><p><pre><code class=language-js data-lang=js><a href=#ILocation_47443820316200935>ILocation</a> | <a href=#ICoordinate_9360730390494372>ICoordinate</a> | number</code></pre></p><p>Location or coordinate of the next point</p></div></div><div class=docs-service__part><div class=docs-type><h4 id=TCanvasElementEvent_8500628213537043>Type TCanvasElementEvent</h4><p><pre><code class=language-js data-lang=js>&quot;click&quot; | &quot;over&quot; | &quot;out&quot;</code></pre></p><p>Supported custom map element event types</p></div></div><div class=docs-service__part><div class=docs-type><h4 id=TMarkerSource_46512197559650414>Type TMarkerSource</h4><p><pre><code class=language-js data-lang=js>string | ArrayBuffer</code></pre></p><p>Marker can be presented as a encoded SVG or base64 string or URL to third party resource or binary array in ArrayBuffer</p></div></div></div></div><div class=deps-list><div class=docs-service><div class=docs-service__part><div class=docs-interface><h4 id=ICoordinate_9360730390494372>Interface ICoordinate</h4><p></p><table><thead><th>Property</th><th>Type</th></thead><tbody><tr><td>x</td><td>number</td></tr><tr><td>y</td><td>number</td></tr></tbody></table></div></div><div class=docs-service__part><div class=docs-interface><h4 id=ILocation_47443820316200935>Interface ILocation</h4><p></p><table><thead><th>Property</th><th>Type</th></thead><tbody><tr><td>lat</td><td>number</td></tr><tr><td>lng</td><td>number</td></tr></tbody></table></div></div><div class=docs-service__part><div class=docs-type><h4 id=TPosition_7366708519730412>Type TPosition</h4><p><pre><code class=language-js data-lang=js><a href=#ILocation_47443820316200935>ILocation</a> | <a href=#ICoordinate_9360730390494372>ICoordinate</a></code></pre></p><p></p></div></div></div></div><h2>Sample Add-Ins</h2><p><a href=https://github.com/Geotab/sdk-map-addin-samples target=_blank>Here are some examples</a> and <a href=https://github.com/Geotab/map-addins-definitions/ target=_blank>types definition file</a> that can help developers understand how to work with the new Add-Ins. Please download them, extract the files, then follow the instructions in the ReadMe document. Remember to have Feature Preview enabled in your MyGeotab User Options so you can see the Deeper Add-ins.</p></div></div></article></div></div><footer class="footer mt-auto py-3"><a href=https://www.geotab.com/security/ target=_blank>Security</a> &nbsp;&nbsp;|&nbsp;&nbsp; <a href=https://docs.google.com/document/d/1sVygLN02w2xNovFY4q5vw-oAzfYxCd7WLhyToElgDbs/pub rel=noopener target=_blank>Privacy Policy</a> &nbsp;&nbsp;|&nbsp;&nbsp; <a href=https://myadmin.geotab.com/sdk rel=noopener target=_blank>MyAdmin SDK</a> &nbsp;&nbsp;|&nbsp;&nbsp; <a href=https://docs.google.com/document/d/1jA8Qc8WZMhmaqdjd8Ng8rY4iMI073xCfLNt_DSP72TQ/edit rel=noopener target=_blank>End User Agreement</a><div class="copyright-container copyright-white-text">Copyright &copy; 2017 Geotab</div></footer></main></div><script src=/sdk/assets/javascript/index-b894a07771.min.js></script></body></html>