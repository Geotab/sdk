<!DOCTYPE html><html lang=En><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><script src=https://cmp.osano.com/Azq8VcSSUm67lg5f/3c378e5d-3772-41f7-8106-94eeee3a3c15/osano.js></script><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-5V5GBX4');</script><title>Using in JavaScript | Geotab Developers</title><meta name=generator content="Jekyll v4.3.3"><meta property=og:title content="Using in JavaScript"><meta name=author content="The Geotab Team"><meta property=og:locale content=en_US><meta name=description content="This site provides tools for integrating with various types of Geotab products."><meta property=og:description content="This site provides tools for integrating with various types of Geotab products."><link rel=canonical href=https://geotab.github.io/sdk/software/guides/using-in-javascript/ ><meta property=og:url content=https://geotab.github.io/sdk/software/guides/using-in-javascript/ ><meta property=og:site_name content="Geotab Developers"><meta property=og:type content=website><meta name=twitter:card content=summary><meta property=twitter:title content="Using in JavaScript"><script type=application/ld+json>{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"The Geotab Team"},"description":"This site provides tools for integrating with various types of Geotab products.","headline":"Using in JavaScript","url":"https://geotab.github.io/sdk/software/guides/using-in-javascript/"}</script><link rel=stylesheet href=/sdk/assets/stylesheets/style-7593abd5bb.min.css><link rel=stylesheet href=/sdk/assets/stylesheets/style-d6e8286b92.min.css><link rel=stylesheet href=/sdk/assets/stylesheets/style.css><link rel=apple-touch-icon-precomposed sizes=144x144 href=/sdk/assets/images/touch/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=/sdk/favicon.ico></head><body><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5V5GBX4" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><header><nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark" title=navigationBar><div class=navbar-deprecation-banner><span>üì¢ This site will be going away on April 30, 2024. Check out the new </span><a href=https://developers.geotab.com target=_blank rel="noreferrer noopener" title="Geotab SDK - Developers Site">developers.geotab.com</a></div><div><a class=navbar-brand href=/sdk/ ><img src=/sdk/assets/images/pillar.svg width=30 height=30 class="d-inline-block align-top" alt=""> Geotab Developers </a><button class="navbar-toggler d-lg-none" id=toggler type=button aria-label="navigation bar toggler"><span class=navbar-toggler-icon></span></button></div></nav></header><div id=wrapper><div id=sidebar-wrapper class=bg-light><nav id=sidebar class=sidebar><h4>MyGeotab SDK</h4><ul class="nav flex-column"><li class=nav-link><a href=/sdk/software/introduction/ >MyGeotab SDK Introduction</a></li><li class=nav-link><a href=/sdk/resources/new/ >What's New</a></li><li><h5>Guides</h5><ul class="nav flex-column"><li class=nav-link><a href=/sdk/software/guides/getting-started/ >Getting Started</a></li><li class=nav-link><a href=/sdk/software/guides/concepts/ >Concepts</a></li><li class="nav-link active"><a href=/sdk/software/guides/using-in-javascript/ >Using in Javascript</a></li><li class=nav-link><a href=/sdk/software/guides/using-in-dotnet/ >Using in .Net</a></li><li class=nav-link><a href=/sdk/software/guides/using-in-java/ >Using in Java</a> <span class=beta>Beta</span></li><li class=nav-link><a href=/sdk/software/guides/data-feed/ >Data Feed</a></li><li class=nav-link><a href=/sdk/software/guides/mygeotab-urls/ >Using MyGeotab URLs</a></li><li class=nav-link><a href=/sdk/software/guides/using-go-devices/ >Using GO Devices</a></li><li class=nav-link><a href=/sdk/software/guides/go-device-logging/ >GO Device Logging</a></li><li class=nav-link><a href=/sdk/software/guides/custom-telematics-devices/ >Using Custom Telematics Devices</a></li><li class=nav-link><a href=/sdk/software/guides/developing-addins/ >Developing Add-Ins</a></li><li class=nav-link><a href=/sdk/software/guides/addin-storage/ >Using Add-Ins for data storage</a></li><li class=nav-link><a href=/sdk/software/guides/drive-addins/ >Geotab Drive Add-Ins</a></li><li class=nav-link><a href=/sdk/software/guides/map-add-ins-docs/ >Map Add-ins</a></li><li class=nav-link><a href=https://github.com/Geotab/mg-media-files>Media Files</a> <span class=beta>Beta</span></li><li class=nav-link><a href=/sdk/software/guides/power-bi/ >Connect to Power BI</a></li><li class=nav-link><a href=/sdk/software/guides/geotab-data-connector/ >Using the Geotab Data Connector</a></li></ul></li><li><h5>API</h5><ul class="nav flex-column"><li class=nav-link><a href=/sdk/software/api/reference/ >Reference</a></li><li class=nav-link><a href=/sdk/software/api/runner.html>Runner</a></li><li class=nav-link><a href=/sdk/software/api/clients/ >API Clients</a></li></ul></li><li><h5>Code Samples</h5><ul class="nav flex-column"><li class=nav-link><a href=/sdk/software/js-samples/ >Javascript Examples</a></li><li class=nav-link><a href=/sdk/software/dotnet-samples/ >.Net Examples</a></li><li class=nav-link><a href=https://github.com/Geotab/sdk-java-samples>Java Examples</a> <span class=beta>Beta</span></li><li class=nav-link><a href=https://github.com/Geotab/sdk-addin-samples>Add-in Examples</a></li></ul></li></ul><hr><h4>Hardware</h4><ul class="nav flex-column"><li class=nav-link><a href=/sdk/hardware/introduction/ >Hardware Introduction</a></li><li><h5>Add-on Protocols</h5><ul class="nav flex-column"><li class=nav-link><a href=/sdk/hardware/addon-protocols/rs232-usb/ >RS232 & USB</a></li><li class=nav-link><a href=/sdk/hardware/addon-protocols/can/ >CAN</a></li><li class=nav-link><a href=/sdk/hardware/addon-protocols/ble/ >BLE</a></li></ul></li><li><h5>Code Samples</h5><ul class="nav flex-column"><li class=nav-link><a href=/sdk/hardware/samples/python/ >Python</a></li><li class=nav-link><a href=https://github.com/Geotab/android-external-device-example>Android</a></li><li class=nav-link><a href=https://github.com/Geotab/IOX-raspberryPi-demo>Raspberry Pi</a></li></ul></li><li><h5>Developing an IOX</h5><ul class="nav flex-column"><li class=nav-link><a href=/sdk/hardware/developing-an-iox/hardware-design-guide/ >Hardware Design Guide</a></li><li class=nav-link><a href=/sdk/hardware/developing-an-iox/messaging-protocol/ >Messaging Protocol</a></li><li class=nav-link><a href=/sdk/hardware/developing-an-iox/mime-protocol/ >MIME Protocol</a></li></ul></li></ul><hr><h4>MyAdmin SDK</h4><ul class="nav flex-column"><li class=nav-link><a href=/sdk/myadmin-sdk/introduction/ >MyAdmin SDK Introduction</a></li><li class=nav-link><a href=/sdk/myadmin-sdk/new/ >What's New</a></li><li><h5>Guides</h5><ul class="nav flex-column"><li class=nav-link><a href=/sdk/myadmin-sdk/guides/getting-started/ >Getting Started</a></li><li class=nav-link><a href=/sdk/myadmin-sdk/guides/concepts/ >Concepts</a></li><li class=nav-link><a href=/sdk/myadmin-sdk/guides/using-with-dotnet/ >Using with .NET</a></li><li class=nav-link><a href=/sdk/myadmin-sdk/guides/using-with-javascript/ >Using with JavaScript</a></li><li class=nav-link><a href=/sdk/myadmin-sdk/guides/using-third-party-devices/ >Using Third-Party Devices with MyGeotab</a> <span class=legacy>Legacy</span></li></ul></li><li><h5>API</h5><ul class="nav flex-column"><li class=nav-link><a href=/sdk/myadmin-sdk/api/reference/ >Reference</a></li></ul></li><li><h5>Code Samples</h5><ul class="nav flex-column"><li class=nav-link><a href=/sdk/myadmin-sdk/code-samples/dotnet-examples/ >.NET Examples</a></li><li class=nav-link><a href=/sdk/myadmin-sdk/code-samples/javascript-examples/ >JavaScript Examples</a></li></ul></li></ul><hr><h4>Resources</h4><ul class="nav flex-column"><li class=nav-link><a href=https://community.geotab.com/s/ >Forums</a></li><li class=nav-link><a href=https://www.geotab.com/dev-channel/ >Dev Channel</a></li><li class=nav-link><a href=/sdk/resources/toolkits/ >Toolkits</a></li></ul><hr></nav></div><main role=main><div class=container-fluid><div class=row><article class=col-md-12><header><a href=https://github.com/Geotab/sdk/blob/master/src/software/guides/using-in-javascript.md class="float-right small"><svg class="octicon octicon-mark-github" viewBox="0 0 16 16" version=1.1 width=16 height=16 aria-hidden=true><path d="M8 0c4.42 0 8 3.58 8 8a8.013 8.013 0 0 1-5.45 7.59c-.4.08-.55-.17-.55-.38 0-.27.01-1.13.01-2.2 0-.75-.25-1.23-.54-1.48 1.78-.2 3.65-.88 3.65-3.95 0-.88-.31-1.59-.82-2.15.08-.2.36-1.02-.08-2.12 0 0-.67-.22-2.2.82-.64-.18-1.32-.27-2-.27-.68 0-1.36.09-2 .27-1.53-1.03-2.2-.82-2.2-.82-.44 1.1-.16 1.92-.08 2.12-.51.56-.82 1.28-.82 2.15 0 3.06 1.86 3.75 3.64 3.95-.23.2-.44.55-.51 1.07-.46.21-1.61.55-2.33-.66-.15-.24-.6-.83-1.23-.82-.67.01-.27.38.01.53.34.19.73.9.82 1.13.16.45.68 1.31 2.69.94 0 .67.01 1.3.01 1.49 0 .21-.15.45-.55.38A7.995 7.995 0 0 1 0 8c0-4.42 3.58-8 8-8Z"></path></svg> Edit on GitHub</a> <a href="https://community.geotab.com/s/topic/0TO2J000000gAUAWA2/developer-discussions?language=en_US&viewMore=1" class="float-right small mx-2"><svg class="octicon octicon-people" viewBox="0 0 16 16" version=1.1 width=16 height=16 aria-hidden=true><path d="M2 5.5a3.5 3.5 0 1 1 5.898 2.549 5.508 5.508 0 0 1 3.034 4.084.75.75 0 1 1-1.482.235 4 4 0 0 0-7.9 0 .75.75 0 0 1-1.482-.236A5.507 5.507 0 0 1 3.102 8.05 3.493 3.493 0 0 1 2 5.5ZM11 4a3.001 3.001 0 0 1 2.22 5.018 5.01 5.01 0 0 1 2.56 3.012.749.749 0 0 1-.885.954.752.752 0 0 1-.549-.514 3.507 3.507 0 0 0-2.522-2.372.75.75 0 0 1-.574-.73v-.352a.75.75 0 0 1 .416-.672A1.5 1.5 0 0 0 11 5.5.75.75 0 0 1 11 4Zm-5.5-.5a2 2 0 1 0-.001 3.999A2 2 0 0 0 5.5 3.5Z"></path></svg> Ask developers in the Community</a><h1>Using in JavaScript</h1></header><div><h2 id=geotabapi-object>GeotabApi object</h2><p>Geotab provides JavaScript developers with easy to use and consistent access to our API through the <a href=https://github.com/Geotab/mg-api-js>GeotabApi</a> object. The GeotabAPI provides authentication handling, asynchronous method calling, error handling and multi-call support.</p><blockquote><p>Quick start in <a href=/sdk/software/api/clients/#javascript>API Clients</a></p></blockquote><h2 id=creating-a-geotabapi-object>Creating a GeotabApi object</h2><p>When creating the GeotabApi object, prepend a reference to the file <em>api.js</em> before the main JavaScript code:</p><div class="language-html highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=nt>&lt;script </span><span class=na>type=</span><span class=s>"text/javascript"</span> <span class=na>src=</span><span class=s>"api.js"</span><span class=nt>&gt;&lt;/script&gt;</span>
<span class=nt>&lt;script </span><span class=na>type=</span><span class=s>"text/javascript"</span><span class=nt>&gt;</span>
    <span class=c1>// Custom code goes here</span>
<span class=nt>&lt;/script&gt;</span>
</code></pre></div></div><p>In the main JavaScript code, initialize the GeotabApi object by providing the constructor with a callback function to handle the authentication:</p><div class="language-javascript highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=kd>var</span> <span class=nx>api</span> <span class=o>=</span> <span class=nx>GeotabApi</span><span class=p>(</span><span class=kd>function</span> <span class=p>(</span><span class=nx>authenticationCallback</span><span class=p>)</span> <span class=p>{</span>
	<span class=c1>// Handling getting credentials. Deals with these cases:</span>
	<span class=c1>//      a) No credentials yet (first page load)</span>
	<span class=c1>//      b) The credentials have expired (password changed or server moved)</span>
	<span class=c1>//      c) "api.forget()" has been called</span>
	<span class=c1>//</span>
	<span class=c1>// Show the dialog now &amp; set up listener to callback with credentials</span>
	<span class=c1>//</span>
	<span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=dl>"</span><span class=s2>submit</span><span class=dl>"</span><span class=p>).</span><span class=nx>addEventListener</span><span class=p>(</span><span class=dl>"</span><span class=s2>click</span><span class=dl>"</span><span class=p>,</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
		<span class=kd>var</span>
		<span class=nx>server</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=dl>"</span><span class=s2>server</span><span class=dl>"</span><span class=p>).</span><span class=nx>value</span><span class=p>,</span>
		<span class=nx>userName</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=dl>"</span><span class=s2>username</span><span class=dl>"</span><span class=p>).</span><span class=nx>value</span><span class=p>,</span>
		<span class=nx>password</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=dl>"</span><span class=s2>password</span><span class=dl>"</span><span class=p>).</span><span class=nx>value</span><span class=p>,</span>
		<span class=nx>database</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=dl>"</span><span class=s2>database</span><span class=dl>"</span><span class=p>).</span><span class=nx>value</span><span class=p>;</span>

		<span class=nx>authenticationCallback</span><span class=p>(</span><span class=nx>server</span><span class=p>,</span> <span class=nx>database</span><span class=p>,</span> <span class=nx>userName</span><span class=p>,</span> <span class=nx>password</span><span class=p>,</span>
			<span class=kd>function</span> <span class=p>(</span><span class=nx>errorString</span><span class=p>)</span> <span class=p>{</span>
			<span class=nx>alert</span><span class=p>(</span><span class=nx>errorString</span><span class=p>);</span>
		<span class=p>});</span>
	<span class=p>},</span> <span class=kc>false</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div></div><p>When the GeotabApi object has been set up, the first call to a method triggers the callback to get the credentials. Once the credentials have been entered by the user, authenticationCallback is called with the provided credentials, and then the original method result is retrieved. After this method has been called, the server, database, username, and session are all stored in localStorage.</p><h2 id=using-the-geotabapi-object>Using the GeotabApi object</h2><p>The following example shows how to use the GeotabApi object to request the location of a vehicle:</p><div class="language-javascript highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=c1>// Sample API invocation retrieves all "Device" objects</span>
<span class=kd>var</span> <span class=nx>deviceId</span> <span class=o>=</span> <span class=dl>"</span><span class=s2>b93B</span><span class=dl>"</span><span class=p>;</span> 
<span class=nx>api</span><span class=p>.</span><span class=nx>call</span><span class=p>(</span><span class=dl>"</span><span class=s2>Get</span><span class=dl>"</span><span class=p>,</span> <span class=p>{</span>
	<span class=na>typeName</span> <span class=p>:</span> <span class=dl>"</span><span class=s2>DeviceStatusInfo</span><span class=dl>"</span><span class=p>,</span>
	<span class=na>search</span> <span class=p>:</span> <span class=p>{</span>
		<span class=na>deviceSearch</span> <span class=p>:</span> <span class=p>{</span>
			<span class=na>id</span> <span class=p>:</span> <span class=nx>deviceId</span>
		<span class=p>}</span>
	<span class=p>}</span>
<span class=p>},</span> <span class=kd>function</span> <span class=p>(</span><span class=nx>result</span><span class=p>)</span> <span class=p>{</span>
	<span class=k>if</span> <span class=p>(</span><span class=nx>result</span> <span class=o>!=</span> <span class=kc>null</span> <span class=o>&amp;&amp;</span> <span class=nx>result</span><span class=p>.</span><span class=nx>length</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
		<span class=nx>alert</span><span class=p>(</span><span class=nx>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>(</span><span class=nx>result</span><span class=p>[</span><span class=mi>0</span><span class=p>]));</span>
	<span class=p>}</span>
<span class=p>},</span> <span class=kd>function</span> <span class=p>(</span><span class=nx>errorString</span><span class=p>)</span> <span class=p>{</span>
	<span class=nx>alert</span><span class=p>(</span><span class=nx>errorString</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div></div><h2 id=the-call-method-arguments>The Call method arguments</h2><p>The Call method is used to ‚ÄúCall‚Äù any of the APIs that the MyGeotab SDK provides. It takes 4 arguments:</p><table><thead><tr><th><strong>Argument</strong></th><th><strong>Description</strong></th></tr></thead><tbody><tr><td>method</td><td>The API method that is being called. For example, ‚ÄúGet‚Äù or ‚ÄúGetCountOf‚Äù. See the API reference for the full set of methods.</td></tr><tr><td>params</td><td>The parameter object that the API method expects. For example: <code class="language-plaintext highlighter-rouge">{ typeName: "DeviceStatusInfo", search { deviceSearch: { id: deviceId } }</code></td></tr><tr><td>callbackSuccess</td><td>The function that will be called back if the API call succeeds. The callback function has a single argument called ‚Äúresult‚Äù that contains any results returned by the API call.</td></tr><tr><td>callbackError</td><td>The function that will be called back if the API call fails. The callback function has a single argument that contains error information.</td></tr></tbody></table><h2 id=multicall>MultiCall</h2><p>A MultiCall is a way to make several API calls against a server with a single HTTP request. This eliminates potentially expensive round trip costs. When making multiple calls, we recommend leveraging MultiCalls as much as possible. For more information about multicalls, see https://geotab.github.io/sdk/software/guides/concepts/#multicall. Additionally, you can find a JS MultiCall example here: https://geotab.github.io/sdk/software/guides/concepts/#api-client-support.</p><h2 id=a-note-about-state>A note about state</h2><p>The GeotabApi object is designed to be stateless. The main reason for this is that a call could fail at any point due to session expiry or the database moving. The authenticationCallback will automatically be called when this situation is detected. The application will then prompt (or read from file etc.) for the required credentials. The call that was being attempted will resume when new credentials are received. This also means that there is no concept of being ‚Äúlogged in‚Äù or ‚Äúlogged out‚Äù of the server.</p><h1 id=next-steps>Next steps</h1><p>Once you have a basic understanding of how <em>api.js</em> and the JavaScript API work and want to learn more, you can take a look at our examples <a href=../../js-samples>here</a>.</p></div></article></div></div><footer class="footer mt-auto py-3"><a href=https://www.geotab.com/security/ target=_blank>Security</a> &nbsp;&nbsp;|&nbsp;&nbsp; <a href=https://docs.google.com/document/d/1sVygLN02w2xNovFY4q5vw-oAzfYxCd7WLhyToElgDbs/pub rel=noopener target=_blank>Privacy Policy</a> &nbsp;&nbsp;|&nbsp;&nbsp; <a href=/myadmin-sdk/introduction/ >MyAdmin SDK</a> &nbsp;&nbsp;|&nbsp;&nbsp; <a href=https://docs.google.com/document/d/1jA8Qc8WZMhmaqdjd8Ng8rY4iMI073xCfLNt_DSP72TQ/edit rel=noopener target=_blank>End User Agreement</a> &nbsp;&nbsp;|&nbsp;&nbsp; <a href="https://docs.google.com/document/d/1aFJnFYpHCN4bFe6yVhj5m5AiJClfucRhJWVSDBqRObg/edit?usp=sharing" rel=noopener target=_blank>API Terms of Service</a><div class="copyright-container copyright-white-text">Copyright &copy; 2017 Geotab</div></footer></main></div><script src=/sdk/assets/javascript/index.js></script></body></html>