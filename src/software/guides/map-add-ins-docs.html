--- 
layout: pageNoEdit
permalink: /software\guides\map-add-ins-docs/
title: Geotab Map Add-In Overview
---
    
    <style>.docs-service {
    margin: 1rem 0;
    position: relative;
    display: flex;
    flex-direction: column;
    min-width: 0;
    word-wrap: break-word;
    background-color: rgb(255, 255, 255);
    background-clip: border-box;
    border: 1px solid rgba(0,0,0,.125);
    border-radius: .25rem;
}

.docs-service__part {
    flex: 1 1 auto;
    padding: 1.25rem;
    border-top: 1px solid rgba(0,0,0,.125);
}

.docs-service__title {
    margin-bottom: .5rem;
    font-family: inherit;
    font-weight: 500;
    line-height: 1.2;
    color: inherit;
}

.docs-service__part:first-child {
    border-top: none;
}

.code-value {
    background: rgba(31,51,73,.05);
    padding: 0 5px;
}</style>
    <div>
      <p>
        Map Add-ins are integrations embedded within the Map or Trips History
        pages of the MyGeotab platform. Once installed, a panel will appear on
        the right-side of the Map or Trips History page, containing the UI of
        the Map Add-in. These Add-ins can read from and operate on the map, as
        well as access the MyGeotab APIs. This document outlines the
        installation process and APIs available for Map Add-In development.
      </p>
      <p>
        Below is an example of a Map Add-In installed within the Map page of
        MyGeotab. When a user clicks a vehicle on the map, this integration
        displays the relevant data for that vehicle.
      </p>
      <figure>
        <img
          src="../map-add-ins-docs-1.jpg"
          alt="Displaying vehicle information on the Map page, with a Map Add-in."
        />
        <figcaption>Figure #1 - The "Vehicle Info" Map Add-in.</figcaption>
      </figure>

      <h2>Installation</h2>
      <p>
        Map Add-ins are installed by uploading an
        <a
          href="https://geotab.github.io/sdk/software/guides/developing-addins/#add-in-configuration-files"
          target="_blank"
          >Add-in Configuration file</a
        >
        into MyGeotab. Click on Administration -> System... -> System Settings
        -> Add-Ins -> New Add-In, and upload the Add-in Configuration file. The
        following is an example of a Map Add-in's Configuration file:
      </p>
      <div>
        <pre class="code-example">
    <code class="language-json" data-lang="json">
{
    "name": "Tooltip",
    "supportEmail": "yourSupportEmail@company.com",
    "version": "1.0",
    "items": [{
        "page": "map",
        "title": "Tooltips",
        "noView": false,
        "mapScript": {
            "src": "addin.js",
            "style": "addin.css",
            "url": "addin.html"
        }
    }]
}
    </code>
</pre>
      </div>

      <p>The main properties of the Configuration file are as follows:</p>
      <ol>
        <li>
          <strong>page</strong> - This defines which page the Map Add-in will
          reside within. This could be “<strong>map</strong>” (The Map page) or
          “<strong>tripsHistory</strong>” (the Trips History page). The default
          value is “<strong>map</strong>”.
        </li>
        <li>
          <strong>title</strong> - This is a heading displayed at the top of the
          panel when there are multiple Map Add-ins installed. If a "title" is
          not provided, the Add-in defaults to the "name" parameter.
        </li>
        <li>
          <strong>noView</strong> - If <span class="code-value">true</span>, the
          add-in will not be displayed in the right-side panel. The default
          value is <span class="code-value">false</span>.
        </li>
        <li>
          <strong>src</strong> - The JavaScript file reference for the Add-in.
          This can be an externally hosted file or uploaded into MyGeotab by
          dragging and dropping it into the Configuration file window.
        </li>
        <li>
          <strong>style</strong> - The CSS file reference for this Add-In. This
          can be externally hosted or uploaded to MyGeotab.
        </li>
        <li>
          <strong>url</strong> -The HTML file reference for this Add-In. This
          option can be used instead of <strong>src</strong> and
          <strong>style</strong>. Links to CSS and JavaScript files can be made
          within this HTML file. All content within the &lt;body&gt; tags will
          be added to the Map Add-in UI (<a
            href="https://github.com/Geotab/sdk-map-addin-samples/tree/master/html"
            target="_blank"
            >Example</a
          >).
        </li>
      </ol>

      <p>
        You can find example Map Add-ins
        <a
          href="https://github.com/Geotab/sdk-map-addin-samples"
          target="_blank"
          >here</a
        >.
      </p>

      <h2>Usage</h2>
      <p>
        To view the Map Add-ins in a database, it is necessary to enable Feature
        Preview. In the MyGeotab portal, click on Administration -> Users ->
        select your user account -> UI Settings -> Feature Preview -> set to On
        -> Save Changes.
      </p>

      <h4>Iframe Setup</h4>
      <p>
        In the MyGeotab portal, Map Add-ins are loaded when the user visits the
        MyGeotab page containing the Add-in. For example, the Add-in in Figure
        #1 loads when the user visits the Map page.
      </p>

      <p>
        Map Add-ins are loaded inside an iframe with its sandbox attribute set
        to "allow-scripts". This allows the Map Add-in to run custom scripts,
        such as the JavaScript file from the "<strong>src</strong>" parameter in
        the Add-in Configuration file.
      </p>

      <p>Important Notes:</p>
      <ul>
        <li>
          When the user leaves the page, the content of the iframe is cleared by
          the browser.
        </li>
        <li>
          When the user returns to the page, the scripts inside the iframe are
          reloaded.
        </li>
        <li>
          If necessary, the current Add-In state can be saved in Local Storage,
          IndexedDB, or elsewhere.
        </li>
      </ul>

      <p class="important">
        Do not access elements or APIs outside the iframe panel; they can be
        changed without notice in future versions of MyGeotab, which might break
        your Add-In. Use only the services and methods documented here and on
        the API Reference page when interacting with a page outside the iframe.
      </p>

      <h4>Panel Size</h4>
      <p>
        The iframe panel has a fixed width of 450 pixels; the width shrinks to
        accomodate screens with widths below 600 pixels. The panel height is
        responsive, always reaching the bottom of the page.
      </p>
      <p>
        The figures below display how the panel size changes between a desktop
        screen and a mobile phone screen.
      </p>

      <figure>
        <img
          src="../map-add-ins-docs-2.jpg"
          alt="Example of how Map Add-ins look on a desktop screen."
        />
        <figcaption>Figure #2 - Map Add-in size on desktop.</figcaption>
      </figure>
      <figure>
        <img
          src="../map-add-ins-docs-3.jpg"
          alt="Example of how Map Add-ins look on a mobile screen."
        />
        <figcaption>Figure #3 - Map Add-in size on mobile.</figcaption>
      </figure>

      <p>
        If multiple Map Add-ins are installed, each is accessible by selecting
        the appropriate tab at the top of the panel. In Figure #4, there are 3
        add-ins installed on the page, denoted by the 3 tabs at the top of the
        panel. The add-ins are titled "Live Trip History", "Tooltip", and
        "Vehicle Info".
      </p>

      <figure>
        <img
          src="../map-add-ins-docs-4.jpg"
          alt="Example of multiple add-ins on the map."
        />
        <figcaption>Figure #4 - Multiple Add-ins on the Map page.</figcaption>
      </figure>

      <h4>Structure</h4>
      <p>
        The starting point for the Map Add-in JavaScript code is the function
        that is added as a method to "window.geotab.addin". For example:
      </p>
      <div class="highlights">
        <pre>
    <code class="language-js" data-lang="js">
geotab.addin.request = (elt, service) => {
    // code for Map Add-In
}
    </code>
        </pre>
      </div>
      <p>This function has two arguments:</p>
      <ol>
        <li>
          <strong>elt</strong> - The HTMLElement of the Add-In. It contains
          everything that belongs to the Add-In.
        </li>
        <li>
          <strong><a href="#services-list">service</a></strong> - The JavaScript
          file reference for the Add-in.
        </li>
      </ol>
      <p>
        The Add-in function will be called when a user visits the Add-in by
        clicking on its tab. After that, the "focus" and "blur" events will be
        fired when the user opens or leaves the Add-in tab, respectively (See
        Page Service).
      </p>

      <h2 id="services-list">Map Add-in Services</h2>
      <div class="services-list"><div class="docs-service">
        <div class="docs-service__part">
            <h3 class="docs-service__title">
                <span class="docs-service__name">page</span> service (<a href="https://github.com/Geotab/sdk-map-addin-samples/tree/master/page" target="_blank">Example</a>)
            </h3>
            <p>Service for getting/setting page state and moving between MyGeotab page</p>
            <h4>Methods</h4>
        <table>
            <thead>
                <th>Service methods</th>
                <th>Description</th>
            </thead>
            <tbody>
                <tr>
            <td>set (key: string, value: string): Promise&lt;boolean&gt;</td>
            <td>Sets new key/value pair to page state</td>
        </tr><tr>
            <td>get (): Promise&lt;object&gt;</td>
            <td>Gets page state</td>
        </tr><tr>
            <td>go (page: string, state?: object): Promise&lt;boolean&gt;</td>
            <td>Changes current page</td>
        </tr><tr>
            <td>hasAccessToPage (page: string): Promise&lt;boolean&gt;</td>
            <td>Checks whether current user has access to MyGeotab page</td>
        </tr><tr>
            <td>getFilterState (): Promise&lt;IGroupFilterId[]&gt;</td>
            <td>Gets current company filter state</td>
        </tr><tr>
            <td>attach (eventName: string, eventHandler: (serviceData: any) => void): void</td>
            <td>Attaches event handler to service</td>
        </tr><tr>
            <td>detach (eventName: string, eventHandler?: (serviceData: any) => void): void</td>
            <td>Detaches event handler to service</td>
        </tr>
            </tbody>
        </table>
            <h4>Properties</h4>
        <table>
            <thead>
                <th>Service property name</th>
                <th>Type</th>
                <th>Description</th>
            </thead>
            <tbody>
                <tr>
            <td>active</td>
            <td>boolean</td>
            <td>Current map add-in state. It's true if current add-in is focused</td>
        </tr>
            </tbody>
        </table>
            <h4>Events</h4>
        <table>
            <thead>
                <th>Event name</th>
                <th>Event object</th>
                <th>Description</th>
            </thead>
            <tbody>
                <tr>
            <td>focus</td>
            <td>Empty object</td>
            <td>Event is fired when user focuses on current map add-in</td>
        </tr><tr>
            <td>blur</td>
            <td>Empty object</td>
            <td>Event is fired when user focuses on another map add-in</td>
        </tr><tr>
            <td>stateChange</td>
            <td><div>
            state: (object) - Updated page state
        </div></td>
            <td>Event is fired when the state of the page is changed</td>
        </tr><tr>
            <td>filterChange</td>
            <td><div>
            groups: (IGroupFilterId[]) - Updated array of filter groups
        </div></td>
            <td>Event is fired when the company filter groups is changed</td>
        </tr>
            </tbody>
        </table>
        </div>
        
        
    </div><div class="docs-service">
        <div class="docs-service__part">
            <h3 class="docs-service__title">
                <span class="docs-service__name">localStorage</span> service (<a href="https://github.com/Geotab/sdk-map-addin-samples/tree/master/localStorage" target="_blank">Example</a>)
            </h3>
            <p>Service to request information stored in browser LocalStorage</p>
            <h4>Methods</h4>
        <table>
            <thead>
                <th>Service methods</th>
                <th>Description</th>
            </thead>
            <tbody>
                <tr>
            <td>set (key: string, value: string): Promise&lt;boolean&gt;</td>
            <td>Sets key-value pairs to browser localStorage with key</td>
        </tr><tr>
            <td>remove (key: string): Promise&lt;boolean&gt;</td>
            <td>Removes value from browser localStorage by key</td>
        </tr><tr>
            <td>get (key: string): Promise&lt;string&gt;</td>
            <td>Gets value from browser localStorage by key</td>
        </tr>
            </tbody>
        </table>
            
            
        </div>
        
        
    </div><div class="docs-service">
        <div class="docs-service__part">
            <h3 class="docs-service__title">
                <span class="docs-service__name">api</span> service (<a href="https://github.com/Geotab/sdk-map-addin-samples/tree/master/request" target="_blank">Example</a>)
            </h3>
            <p>Service for requesting data from Geotab server</p>
            <h4>Methods</h4>
        <table>
            <thead>
                <th>Service methods</th>
                <th>Description</th>
            </thead>
            <tbody>
                <tr>
            <td>call (method: string, params: object): Promise&lt;any[]&gt;</td>
            <td>Sends single request to Geotab server</td>
        </tr><tr>
            <td>multiCall (calls: TApiCall[]): Promise&lt;any[][]&gt;</td>
            <td>Sends multiple requests to Geotab server in one batch</td>
        </tr><tr>
            <td>getSession (): Promise&lt;ISessionInfo&gt;</td>
            <td>Gets current user session information</td>
        </tr>
            </tbody>
        </table>
            
            
        </div>
        
        
    </div><div class="docs-service">
        <div class="docs-service__part">
            <h3 class="docs-service__title">
                <span class="docs-service__name">events</span> service (<a href="https://github.com/Geotab/sdk-map-addin-samples/tree/master/events" target="_blank">Example</a>)
            </h3>
            <p>Service for catching events that happens when user interact with different entities on the map</p>
            <h4>Methods</h4>
        <table>
            <thead>
                <th>Service methods</th>
                <th>Description</th>
            </thead>
            <tbody>
                <tr>
            <td>attach (eventName: string, eventHandler: (serviceData: any) => void): void</td>
            <td>Attaches event handler to service</td>
        </tr><tr>
            <td>detach (eventName: string, eventHandler?: (serviceData: any) => void): void</td>
            <td>Detaches event handler to service</td>
        </tr>
            </tbody>
        </table>
            
            <h4>Events</h4>
        <table>
            <thead>
                <th>Event name</th>
                <th>Event object</th>
                <th>Description</th>
            </thead>
            <tbody>
                <tr>
            <td>move</td>
            <td><div>
            data: (ICoordinate) - Position of the pointer on the map
        </div></td>
            <td>Event is fired when user moves pointer over the map</td>
        </tr><tr>
            <td>over</td>
            <td><div>
            data: (TEventData) - Main information about entity
        </div></td>
            <td>Event is fired when user moves pointer over an obejct on the map</td>
        </tr><tr>
            <td>out</td>
            <td><div>
            data: (TEventData) - Main information about entity
        </div></td>
            <td>Event is fired when user moves pointer out of an obejct on the map</td>
        </tr><tr>
            <td>click</td>
            <td><div>
            data: (TEventData) - Main information about entity
        </div></td>
            <td>Event is fired when user clicks on an obejct on the map</td>
        </tr>
            </tbody>
        </table>
        </div>
        
        
    </div><div class="docs-service">
        <div class="docs-service__part">
            <h3 class="docs-service__title">
                <span class="docs-service__name">map</span> service (<a href="https://github.com/Geotab/sdk-map-addin-samples/tree/master/map" target="_blank">Example</a>)
            </h3>
            <p>Service for manipulating viewport of the map and getting updates about changed map viewport</p>
            <h4>Methods</h4>
        <table>
            <thead>
                <th>Service methods</th>
                <th>Description</th>
            </thead>
            <tbody>
                <tr>
            <td>setBounds (bounds: IMapBounds): Promise&lt;boolean&gt;</td>
            <td>Sets map bounds</td>
        </tr><tr>
            <td>getBounds (): Promise&lt;IMapBounds&gt;</td>
            <td>Gets current map bounds</td>
        </tr><tr>
            <td>setZoom (zoom: number): Promise&lt;boolean&gt;</td>
            <td>Sets map zoom level</td>
        </tr><tr>
            <td>getZoom (): Promise&lt;number&gt;</td>
            <td>Gets current map zoom level</td>
        </tr><tr>
            <td>attach (eventName: string, eventHandler: (serviceData: any) => void): void</td>
            <td>Attaches event handler to service</td>
        </tr><tr>
            <td>detach (eventName: string, eventHandler?: (serviceData: any) => void): void</td>
            <td>Detaches event handler to service</td>
        </tr>
            </tbody>
        </table>
            
            <h4>Events</h4>
        <table>
            <thead>
                <th>Event name</th>
                <th>Event object</th>
                <th>Description</th>
            </thead>
            <tbody>
                <tr>
            <td>change</td>
            <td>Empty object</td>
            <td>Event is fired when viewport of map is changed. This event fires each time when use drags or zooms map</td>
        </tr><tr>
            <td>changed</td>
            <td><div>
            viewport: (IChangedViewport) - Current map zoom and bounds
        </div></td>
            <td>Event is fired when user finished dragging and zooming map</td>
        </tr>
            </tbody>
        </table>
        </div>
        
        
    </div><div class="docs-service">
        <div class="docs-service__part">
            <h3 class="docs-service__title">
                <span class="docs-service__name">tooltip</span> service (<a href="https://github.com/Geotab/sdk-map-addin-samples/tree/master/tooltip" target="_blank">Example</a>)
            </h3>
            <p>Service for showing additional information in entities tooltip</p>
            <h4>Methods</h4>
        <table>
            <thead>
                <th>Service methods</th>
                <th>Description</th>
            </thead>
            <tbody>
                <tr>
            <td>showAt (position: TPosition, pattern: ITooltip, sequence: number): void</td>
            <td>Shows custom tooltip at certain position on the map</td>
        </tr><tr>
            <td>show (pattern: ITooltip, sequence: number): void</td>
            <td>Adds additional information to already shown tooltip on the map</td>
        </tr><tr>
            <td>hide (): void</td>
            <td>Hids additional information from already shown and custom tooltip</td>
        </tr><tr>
            <td>setConfig (config: ITooltipConfig): Promise&lt;boolean&gt;</td>
            <td>Sets configuration for changing current application tooltip</td>
        </tr><tr>
            <td>getConfig (): Promise&lt;ITooltipConfig&gt;</td>
            <td>Sets configuration for current application tooltip</td>
        </tr>
            </tbody>
        </table>
            
            
        </div>
        
        
    </div><div class="docs-service">
        <div class="docs-service__part">
            <h3 class="docs-service__title">
                <span class="docs-service__name">actionList</span> service (<a href="https://github.com/Geotab/sdk-map-addin-samples/tree/master/action" target="_blank">Example</a>)
            </h3>
            <p>Service for showing a custom action list instead of the existing one, or adding custom buttons to existing action lists.</p>
            <h4>Methods</h4>
        <table>
            <thead>
                <th>Service methods</th>
                <th>Description</th>
            </thead>
            <tbody>
                <tr>
            <td>show (position: TPosition, title: string, items: IMenuActionItem[]): void</td>
            <td>Shows custom action menu on certain position</td>
        </tr><tr>
            <td>attachMenu (menuName: TMenuType, handler: TMenuHandler): void</td>
            <td>Subscribes on event when one of the MyGeotab map menus is shown to add new action button</td>
        </tr><tr>
            <td>detachMenu (menuName: TMenuType, handler?: TMenuHandler): void</td>
            <td>Unsubscribes on event when one of the MyGeotab map menus is shown</td>
        </tr><tr>
            <td>attach (eventName: string, eventHandler: (serviceData: any) => void): void</td>
            <td>Attaches event handler to service</td>
        </tr><tr>
            <td>detach (eventName: string, eventHandler?: (serviceData: any) => void): void</td>
            <td>Detaches event handler to service</td>
        </tr>
            </tbody>
        </table>
            
            <h4>Events</h4>
        <table>
            <thead>
                <th>Event name</th>
                <th>Event object</th>
                <th>Description</th>
            </thead>
            <tbody>
                <tr>
            <td>CustomEvent</td>
            <td><div>
            data: (object) - Data from `IAddinActionItem.data` for the current button
        </div></td>
            <td>Event is fired when user clicks on custom button in action list. Event name is defined by "clickEvent" property in custom button object.</td>
        </tr>
            </tbody>
        </table>
        </div>
        
        
    </div><div class="docs-service">
        <div class="docs-service__part">
            <h3 class="docs-service__title">
                <span class="docs-service__name">canvas</span> service (<a href="https://github.com/Geotab/sdk-map-addin-samples/tree/master/mapElements" target="_blank">Example</a>)
            </h3>
            <p>Service for drawing custom shapes on the map</p>
            <h4>Methods</h4>
        <table>
            <thead>
                <th>Service methods</th>
                <th>Description</th>
            </thead>
            <tbody>
                <tr>
            <td>path (path: IPathSeg[], zIndex: number): ICanvasElement&lt;ICanvasPathAttributes&gt;</td>
            <td>Draws SVG path element on the map</td>
        </tr><tr>
            <td>rect (coords: TPosition, width: number, height: number, radius: number, zIndex: number): ICanvasElement&lt;ICanvasRectAttributes&gt;</td>
            <td>Draws SVG rect element on the map</td>
        </tr><tr>
            <td>circle (coords: TPosition, radius: number, zIndex: number): ICanvasElement&lt;ICanvasCircleAttributes&gt;</td>
            <td>Draws SVG circle element on the map</td>
        </tr><tr>
            <td>text (coords: TPosition, text: string, zIndex: number): ICanvasElement&lt;ICanvasTextAttributes&gt;</td>
            <td>Draws SVG text element on the map</td>
        </tr><tr>
            <td>marker (coords: TPosition, width: number, height: number, source: TMarkerSource, zIndex: number): ICanvasElement&lt;ICanvasMarkerAttributes&gt;</td>
            <td>Draws custom image element on the map</td>
        </tr><tr>
            <td>clear (): void</td>
            <td>Clears all drawn elements on the map</td>
        </tr>
            </tbody>
        </table>
            
            
        </div>
        
        
    </div></div>
      <div class="deps-list"><div class="docs-service"></div></div>

      <h2>Example Add-ins</h2>
      <p>
        <a
          href="https://github.com/Geotab/sdk-map-addin-samples"
          target="_blank"
          >Here are some examples</a
        >
        and
        <a
          href="https://github.com/Geotab/map-addins-definitions/"
          target="_blank"
          >type definition files</a
        >
        that can help you understand how to work with Map Add-ins. Download
        them, unzip the files, then follow the instructions in the ReadMe
        document. Remember to have Feature Preview enabled in your MyGeotab User
        Options so you can see the Map Add-ins!
      </p>
    </div>